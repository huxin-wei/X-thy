{"version":3,"sources":["components/AppContext.jsx","JS/variables.js","components/Sidebar.jsx","components/CreateLessonForm.jsx","components/Lesson.jsx","components/LessonPanel.jsx","components/DatePicker.jsx","components/TimeOffer.jsx","components/ClassOffer.jsx","components/Booking.jsx","components/CreateAvailabilityForm.jsx","components/Availability.jsx","components/AvailabilityPanel.jsx","components/AppModal.jsx","components/Appointment.jsx","components/Calendar.jsx","components/ChangePassword.jsx","components/AccountSettingPanel.jsx","components/AdminPanel.jsx","components/Login.jsx","components/Loading.jsx","App.js","index.js"],"names":["AppContext","createContext","API_URL","Sidebar","setUser","useContext","size","className","title","activeClassName","to","onClick","fetch","method","headers","credentials","then","res","json","data","success","Error","message","Cookies","remove","catch","error","console","log","alert","CreateLessonForm","props","useState","lessonName","setLessonName","description","setDescription","price30m","setPrice30m","price60m","setPrice60m","loading","setLoading","setError","mountedRef","useRef","useEffect","current","onSubmit","e","preventDefault","requestOptions","body","JSON","stringify","lesson","handleClose","signalAddSuccess","err","htmlFor","length","onChange","target","value","type","id","style","height","Math","min","scrollHeight","rows","maxLength","wrap","test","role","width","margin","disabled","Lesson","lessonId","removeLesson","isLoading","setIsLoading","fontSize","LessonPanel","lessons","setLessons","showForm","setShowForm","addSuccess","setAddSuccess","dummy","setDummy","filter","lesson_id","setTimeout","textAlign","color","map","lesson_name","price_30m","price_60m","MONTH","month","WEEK","DatePicker","date","setDate","setMonth","year","setYear","selectedMonth","setSelectedMonth","selectedYear","setSelectedYear","dates","setDates","handleDateChange","onDateChange","newDates","today","Date","dayOfMonthAtStart","getDay","numObj","getDate","currentDate","i","theDate","obj","upComming","checkFutureDay","checkSameDay","push","date1","date2","getMonth","getFullYear","thresholdDate","monthHandle","parseInt","onSelectDateHandle","display","borderBottom","monthObj","aDay","index","aDate","upcommingCSS","currentCSS","TimeOffer","fetchErrors","setFetchErrors","times","setTimes","selectedTime","setSelectedTime","fullDate","day","toUTCString","duration","sort","a","b","Array","isArray","flexWrap","justifyContent","time","minutes","getHours","getMinutes","getTotalMinutesFromDate","HHMMAPMstr","hours","floor","suffix","minutePart","substring","minutesToHhMmAPmString","onTimeSelected","ClassOffer","selectedLessonId","setSelectedLessonId","selectLesson","initDate","initMonth","initYear","INIT_FULLDATE","Booking","name","setName","email","setEmail","phone","setPhone","note","setNote","setDuration","setFullDate","setLesson","fullTime","setFullTime","submitErrors","setSubmitErrors","bookingSuccess","setBookingSuccess","handleSubmit","errors","d","maxWidth","padding","defaultValue","required","colSpan","verticalAlign","CrateAvailabilityForm","isChecked","selectedDays","dayError","setDayError","fromH","setFromH","fromM","setFromM","fromAP","setFromAP","toH","setToH","toM","setToM","toAP","setToAP","getSelectedDaysValue","val","forEach","timeFrom","timeTo","days","status","foundUnchecked","checked","onSelectedDayChange","marginTop","Availability","availability","removeAvailability","start_time","start_minute","end_time","end_minute","week","minWidth","getAvailDisplay","availability_id","AvailabilityPanel","availabilities","setAvailabilities","compare","CreateAvailabilityForm","window","location","href","avail","AppModal","show","onClose","children","closeOnEscapeKeyDown","keyCode","document","addEventListener","removeEventListener","stopPropagation","Appointment","onUpdate","appointment","setAppointment","showCancelForm","setShowCancelForm","cancelText","setCancelText","cancelLoading","setCancelLoading","cancelError","setCancelError","m","y","start_time_string","end_time_string","convertDateAndTimeRangeString","appointment_start","appointment_id","customer_name","customer_email","customer_phone","fee","placeholder","Calendar","dateInputDisplay","setDateInputDisplay","setWeek","setData","selectedAppt","setSelectedAppt","changeInputDateToFirstDayOfWeek","setHours","setMinutes","setSeconds","formatDate2","aWeek","beginDate","fetchWeekAppointment","Promise","resolve","reject","appointments","appt","appointmentId","customerName","appointmentStart","minuteStart","dateToMinuteStart","indexToUse","timeCol","splice","preparingData","startDate","endDate","colIndex","rowIndex","numSpan","processWeekAppointment","refresh","handleWeekChange","numWeek","dDisplay","handleApptClicked","currentTarget","join","overflowY","maxHeight","overflowX","backgroundColor","datevalue","formatDate","split","w","row","col","rowSpan","minHeight","position","top","right","ChangePassword","openPwdArea","setOpenPwdArea","currentPwd","setCurrentPwd","newPwd","setNewPwd","newPwdConfirm","setNewPwdConfirm","setSuccess","setErrors","resetFormState","AccountSettingPanel","openEmailArea","setOpenEmailArea","newEmail","setNewEmail","pwdForEmailChanging","setPwdForEmailChanging","eStep1Success","setEStep1Success","eStep1Error","setEStep1Error","eStep1Loading","setEStep1Loading","code","setCode","eStep2Loading","setEStep2Loading","eStep2Error","setEStep2Error","resetEState","currentEmail","password","AdminPanel","exact","path","Login","setPassword","forgotPassword","setForgotPassword","requestCodeLoading","setRequestCodeLoading","requestCodeError","setRequestCodeError","codeRequestSuccess","setCodeRequestSuccess","newPwdErrors","setNewPwdErrors","newPwdLoading","setNewPwdLoading","newPwdSuccess","setNewPwdSuccess","border","set","loggedIn","background","alignItems","paddingRight","textDecoration","handleRequestResetPwdCode","inputErrors","pwdError","re","validatePassword","pwd","pwdConfirm","Loading","App","user","get","Provider","basename","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.3675132e.chunk.js","sourcesContent":["import {createContext} from 'react'\n\nexport const AppContext = createContext({})","// export const API_URL = ''\n\nexport const API_URL = 'http://localhost:3001'\n\n// export const API_URL = 'http://13.239.16.220:3001'","import React, {useContext} from 'react'\nimport { NavLink } from 'react-router-dom'\nimport { GiSpellBook, GiTeacher, GiBookmark } from \"react-icons/gi\";\nimport {MdAccountBox} from \"react-icons/md\"\nimport {GoCalendar} from \"react-icons/go\"\nimport { RiLogoutBoxRLine } from 'react-icons/ri'\nimport Cookies from 'js-cookie'\nimport {AppContext} from './AppContext'\nimport { API_URL } from '../JS/variables';\n\nfunction Sidebar() {\n    const {setUser} = useContext(AppContext)\n    const size = 25\n\n    const logout = () => {\n        const requestOptions = {\n\t\t\tmethod: 'POST',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t'Accept': 'application/json'\n\t\t\t},\n            credentials: 'include'\n\t\t}\n        fetch(`${API_URL}/api/auth/logout`, requestOptions)\n            .then(res => res.json())\n            .then(data => {\n                if(!data.success){\n                    throw new Error(data.message)\n                }\n                Cookies.remove('loggedIn')\n                setUser(null)\n            })\n            .catch(error => {\n                console.log(error.message)\n                alert('Something went wrong. Cannot logout properly.')\n            })\n    }\n    return (\n        <div className=\"sidebar-wrapper\" >\n            <div className=\"sidebar-upper-wrapper\">\n                <ul>\n                    <li data-toggle=\"tooltip\" data-placement=\"right\" title=\"calendar\">\n                        <NavLink\n                            activeClassName=\"sidebar-link--active\"\n                            className=\"sidebar-link\"\n                            to=\"/calendar\">\n                            <GoCalendar size={size} />\n                            <p>Calendar</p>\n                        </NavLink>\n                    </li>\n                    <li data-toggle=\"tooltip\" data-placement=\"right\" title=\"manage guitar lessons\">\n                        <NavLink\n                            activeClassName=\"sidebar-link--active\"\n                            className=\"sidebar-link\"\n                            to=\"/lesson\">\n                            <GiSpellBook size={size} />\n                            <p>Lesson</p>\n\n                        </NavLink>\n                    </li>\n                    <li data-toggle=\"tooltip\" data-placement=\"right\" title=\"manage my availability\">\n                        <NavLink\n                            activeClassName=\"sidebar-link--active\"\n                            className=\"sidebar-link\"\n                            to=\"/availability\">\n                            <GiTeacher size={size} />\n                            <p>Availability</p>\n\n                        </NavLink>\n                    </li>\n                    <li data-toggle=\"tooltip\" data-placement=\"right\" title=\"book an appointment\">\n                        <NavLink\n                            activeClassName=\"sidebar-link--active\"\n                            className=\"sidebar-link\"\n                            to=\"/booking\">\n                            <GiBookmark size={size} />\n                            <p>Book appointment</p>\n\n                        </NavLink>\n                    </li>\n                    <li data-toggle=\"tooltip\" data-placement=\"right\" title=\"Account\">\n                        <NavLink\n                            activeClassName=\"sidebar-link--active\"\n                            className=\"sidebar-link\"\n                            to=\"/account\">\n                            <MdAccountBox size={size} />\n                            <p>Account</p>\n                        </NavLink>\n                    </li>\n                </ul>\n            </div>\n\n            <div className=\"sidebar-bottom-wrapper\">\n                <ul>\n                    <li data-toggle=\"tooltip\" data-placement=\"right\" title=\"log out\">\n                        <NavLink\n                            className=\"sidebar-link\"\n                            to=\"/\" onClick={() => {\n                                logout()\n                            }}>\n                            <RiLogoutBoxRLine size={size} />\n                            <p>Logout</p>\n\n                        </NavLink>\n                    </li>\n                </ul>\n            </div>\n        </div>\n    )\n}\n\nexport default Sidebar\n","import React, { useState, useEffect, useRef } from 'react'\nimport { API_URL } from '../JS/variables'\nconst MAX_DESCRIPTION_LENGTH = 500\nconst MAX_LESSON_NAME_LENGTH = 70\n\nfunction CreateLessonForm(props) {\n\tconst [lessonName, setLessonName] = useState('')\n\tconst [description, setDescription] = useState('')\n\tconst [price30m, setPrice30m] = useState('')\n\tconst [price60m, setPrice60m] = useState('')\n\tconst [loading, setLoading] = useState(false)\n\tconst [error, setError] = useState('')\n\tconst mountedRef = useRef(true)\n\n\tconst onLessonNameChange = (e) => {\n\t\tlet lessonName = e.target.value\n\t\tif (lessonName.length <= MAX_LESSON_NAME_LENGTH) {\n\t\t\tsetLessonName(e.target.value)\n\t\t} else {\n\t\t\te.target.value = lessonName\n\t\t}\n\t}\n\n\tconst onDescriptionChange = (e) => {\n\t\t// auto adjust textarea height\n\t\te.target.style.height = \"\";\n\t\te.target.style.height = Math.min(e.target.scrollHeight, 300) + \"px\";\n\n\t\tlet value = e.target.value\n\n\t\tif (value.length <= MAX_DESCRIPTION_LENGTH) {\n\t\t\tsetDescription(value)\n\t\t}\n\n\t\tif (value.length > MAX_DESCRIPTION_LENGTH) {\n\t\t\te.target.value = description\n\t\t}\n\t}\n\n\tconst onPrice30mChange = (e) => {\n\t\tlet value = e.target.value\n\t\tlet isMoney = /^\\d+\\.{0,1}\\d{0,2}$/.test(value)\n\t\tif (isMoney || value === '') {\n\t\t\tsetPrice30m(value)\n\t\t} else {\n\t\t\te.target.value = ''\n\t\t}\n\t}\n\n\tconst onPrice60mChange = (e) => {\n\t\tlet value = e.target.value\n\t\tlet isMoney = /^\\d+\\.{0,1}\\d{0,2}$/.test(value)\n\t\tif (isMoney || value === '') {\n\t\t\tsetPrice60m(value)\n\t\t} else {\n\t\t\te.target.value = ''\n\t\t}\n\t}\n\n\tuseEffect(() => {\n\t\treturn () => {\n\t\t\tmountedRef.current = false\n\t\t}\n\t}, [])\n\n\tconst handleAddNewLesson = (e) => {\n\t\te.preventDefault()\n\t\tif(!mountedRef.current) return null\n\t\tsetLoading(true)\n\t\tsetError('')\n\n\t\tconst requestOptions = {\n\t\t\tmethod: 'POST',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t'Accept': 'application/json'\n\t\t\t},\n\t\t\tbody: JSON.stringify({\n\t\t\t\tlesson: lessonName,\n\t\t\t\tdescription: description,\n\t\t\t\tprice30m: price30m,\n\t\t\t\tprice60m: price60m\n\t\t\t}),\n\t\t\tcredentials: 'include'\n\t\t}\n\n\t\tfetch(`${API_URL}/api/lesson/add`, requestOptions)\n\t\t\t.then(res => res.json())\n\t\t\t.then((data) => {\n\t\t\t\tif(!mountedRef.current) return null\n\t\t\t\tif(!data.success){\n\t\t\t\t\tthrow new Error(data.message)\n\t\t\t\t}\n\t\t\t\tprops.handleClose()\n\t\t\t\tprops.signalAddSuccess()\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tif(!mountedRef.current) return null\n\t\t\t\tconsole.log(err)\n\t\t\t\tsetError(err.message)\n\t\t\t\tsetLoading(false)\n\t\t\t})\n\t}\n\n\tconsole.log('Create lesson form re render')\n\n\treturn (\n\t\t<div>\n\t\t\t<div className=\"mt-3 mb-3\">\n\t\t\t\t<form onSubmit={handleAddNewLesson} className=\"form-default-box mw-600\">\n\t\t\t\t\t<div className=\"mb-3\">\n\t\t\t\t\t\t<label htmlFor=\"lessonName\" className=\"form-label\"><b>Lesson name</b> ({MAX_LESSON_NAME_LENGTH - lessonName.length} chars left)</label>\n\t\t\t\t\t\t<input onChange={onLessonNameChange} value={lessonName} type=\"text\" className=\"form-control\" id=\"lessonName\" />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"mb-3\">\n\t\t\t\t\t\t<label htmlFor=\"description\" className=\"form-label\"><b>Description</b> ({MAX_DESCRIPTION_LENGTH - description.length} chars left)</label>\n\t\t\t\t\t\t<textarea onChange={onDescriptionChange} className=\"form-control\" id=\"description\" rows={5} maxLength={300} wrap=\"soft\" />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"mb-3\">\n\t\t\t\t\t\t<b>Price rates</b>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"row g-2 mb-2\">\n\t\t\t\t\t\t<div className=\"col-auto\"><label htmlFor=\"price-30m\" className=\"form-label\">30 minutes</label></div>\n\t\t\t\t\t\t<div className=\"col-3\">\n\t\t\t\t\t\t\t<input type=\"text\"\n\t\t\t\t\t\t\t\tonChange={onPrice30mChange}\n\t\t\t\t\t\t\t\tvalue={price30m}\n\t\t\t\t\t\t\t\tmaxLength=\"10\"\n\t\t\t\t\t\t\t\tclassName=\"form-control\" id=\"price-30m\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"col-auto\">$</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"row g-2 mb-2 \">\n\t\t\t\t\t\t<div className=\"col-auto \"><label htmlFor=\"price-60m\" className=\"form-label align-middle\">60 minutes</label></div>\n\t\t\t\t\t\t<div className=\"col-3\">\n\t\t\t\t\t\t\t<input type=\"text\"\n\t\t\t\t\t\t\t\tonChange={onPrice60mChange}\n\t\t\t\t\t\t\t\tvalue={price60m}\n\t\t\t\t\t\t\t\tmaxLength=\"10\"\n\t\t\t\t\t\t\t\tclassName=\"form-control\" id=\"price-60m\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"col-auto\">$</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t{\n\t\t\t\t\t\terror\n\t\t\t\t\t\t&&\n\t\t\t\t\t\t<div className=\"alert alert-danger\" role=\"alert\">\n\t\t\t\t\t\t\t{error}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\n\t\t\t\t\t{/* {buttons panel} */}\n\t\t\t\t\t<div style={{ width: \"100%\", height: 30, margin: \"25px auto 10px auto\"}}>\n\t\t\t\t\t\t<button type=\"button\" className=\"btn btn-danger d-inline-block float-start\"\n\t\t\t\t\t\t\tonClick={() => props.handleClose()}>Cancel</button>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tloading ?\n\t\t\t\t\t\t\t\t<button className=\"btn btn-primary float-end\" type=\"button\" disabled>\n\t\t\t\t\t\t\t\t\t<span className=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\n\t\t\t\t\t\t\t\t\t<span className=\"sr-only\">Loading...</span>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t<button type=\"submit\" className=\"btn btn-primary d-inline-block float-end\">Add</button>\n\t\t\t\t\t\t}\n\t\t\t\t\t</div>\n\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nexport default CreateLessonForm\n","import React, { useState, useEffect, useRef } from 'react'\nimport { TiTrash } from 'react-icons/ti'\nimport { API_URL } from '../JS/variables'\n\nfunction Lesson({ lessonId, lessonName, description, price30m, price60m, removeLesson }) {\n\tconst [error, setError] = useState('')\n\tconst [isLoading, setIsLoading] = useState(false)\n\tconst mountedRef = useRef(true)\n\n\tuseEffect(() => {\n\t\treturn () => {\n\t\t\tmountedRef.current = false\n\t\t}\n\t}, [])\n\t\n\tconst deleteLesson = () => {\n\t\tsetIsLoading(true)\n\t\tsetError('')\n\t\tconst requestionOptions =\n\t\t{\n\t\t\tmethod: 'DELETE',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t'Accept': 'application/json'\n\t\t\t},\n\t\t\tcredentials: 'include'\n\t\t}\n\n\t\tfetch(`${API_URL}/api/lesson/delete/${lessonId}`, requestionOptions)\n\t\t\t.then(res => res.json())\n\t\t\t.then(data => {\n\t\t\t\tif (!data.success) {\n\t\t\t\t\tthrow new Error(data.message)\n\t\t\t\t}\n\t\t\t\tif (!mountedRef.current) return null\n\t\t\t\tsetIsLoading(false)\n\t\t\t\tsetError('')\n\t\t\t\tremoveLesson(lessonId)\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tif (!mountedRef.current) return null\n\t\t\t\tsetIsLoading(false)\n\t\t\t\tsetError(error.message)\n\t\t\t})\n\t}\n\n\treturn (\n\t\t<div className=\"mb-2 pd-4\">\n\t\t\t<div className=\"default-wrapper mw-600\">\n\t\t\t\t<h1 className=\"web-main-color\">{lessonName}</h1>\n\t\t\t\t<div className=\"ms-3 mb-2\">\n\t\t\t\t\t<p className=\"text-secondary\">{description}</p>\n\t\t\t\t\t<p className=\"mb-1 text-secondary\"><b>Fee rates</b></p>\n\t\t\t\t\t<p className=\"mb-1 text-secondary\">30 minutes: <b>${price30m}</b></p>\n\t\t\t\t\t<p className=\"mb-1 text-secondary\">60 minutes: <b>${price60m}</b></p>\n\t\t\t\t</div>\n\t\t\t\t{/* <button type=\"button\" title=\"edit\" className=\"btn btn-secondary py-1\">\n                        <TiEdit size={20} />\n                        <span className=\"align-middle\" style={{ fontSize: 15 }}>EDIT</span>\n                    </button> */}\n\t\t\t\t{error &&\n\t\t\t\t\t<div className=\"alert alert-danger\" role=\"alert\">\n\t\t\t\t\t\t{error}\n\t\t\t\t\t</div>\n\t\t\t\t}\n\n\t\t\t\t<div style={{ height: 30 }}>\n\t\t\t\t\t{\n\t\t\t\t\t\tisLoading ?\n\t\t\t\t\t\t\t<button className=\"btn btn-danger py-1 float-end\" type=\"button\" disabled>\n\t\t\t\t\t\t\t\t<span className=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\n\t\t\t\t\t\t\t\t<span className=\"sr-only\">Deleting...</span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t<button onClick={deleteLesson} type=\"button\" title=\"delete\" className=\"btn btn-danger py-1 float-end\" >\n\t\t\t\t\t\t\t\t<TiTrash size={20} />\n\t\t\t\t\t\t\t\t<span className=\"align-middle button-text\" style={{ fontSize: 12 }}>DELETE</span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nexport default Lesson\n","import React, { useState, useEffect, useRef } from 'react'\nimport CreateLessonForm from './CreateLessonForm'\nimport Lesson from './Lesson'\nimport { API_URL } from '../JS/variables'\n\n\nfunction LessonPanel() {\n\tconst [lessons, setLessons] = useState([])\n\tconst [showForm, setShowForm] = useState(false)\n\tconst [addSuccess, setAddSuccess] = useState(false)\n\tconst [dummy, setDummy] = useState(0)\n\tconst [isLoading, setIsLoading] = useState(false)\n\tconst [error, setError] = useState('')\n\n\tconst mountedRef = useRef(true)\n\n\tconst signalAddSuccess = () => {\n\t\tsetAddSuccess(true)\n\t\tsetDummy(dummy + 1)\n\t\tsetTimeout(() => {\n\t\t\tsetAddSuccess(false)\n\t\t}, 2000)\n\t}\n\n\tconst removeLesson = (lessonId) => {\n\t\tsetLessons(lessons.filter(lesson => lesson.lesson_id != lessonId))\n\t}\n\n\tuseEffect(() => {\n\t\treturn () => {\n\t\t\tmountedRef.current = false\n\t\t}\n\t}, [])\n\n\tuseEffect(() => {\n\t\tif (!mountedRef.current) return null\n\n\t\tsetIsLoading(true)\n\t\tsetError('')\n\n\t\tconst requestOptions = {\n\t\t\tmethod: 'GET',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t'Accept': 'application/json'\n\t\t\t},\n\t\t\tcredentials: 'include'\n\t\t}\n\t\tfetch(`${API_URL}/api/lesson/active`, requestOptions)\n\t\t\t.then(res => res.json())\n\t\t\t.then(data => {\n\t\t\t\tif (!data.success) {\n\t\t\t\t\tthrow new Error(data.message)\n\t\t\t\t}\n\t\t\t\tif (!data.lessons.length) {\n\t\t\t\t\tthrow new Error('There is no lesson. Please consider creating one.')\n\t\t\t\t}\n\t\t\t\tif (!mountedRef.current) return null\n\t\t\t\tsetLessons(data.lessons)\n\t\t\t\tsetIsLoading(false)\n\t\t\t\tsetError('')\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tif (!mountedRef.current) return null\n\t\t\t\tconsole.log(error.message)\n\t\t\t\tsetIsLoading(false)\n\t\t\t\tsetError(error.message)\n\t\t\t})\n\t}, [dummy])\n\n\treturn (\n\t\t<div className=\"pt-3\">\n\n\t\t\t{/* {msg when successfully add new lesson} */}\n\t\t\t{\n\t\t\t\taddSuccess &&\n\t\t\t\t<div className=\"alert alert-success\" role=\"alert\">\n\t\t\t\t\tSuccessfully added.\n\t\t\t\t</div>\n\t\t\t}\n\n\t\t\t{/* {show form when the button clicked} */}\n\t\t\t{\n\t\t\t\tshowForm ?\n\t\t\t\t\t<CreateLessonForm handleClose={() => setShowForm(false)} signalAddSuccess={signalAddSuccess} />\n\t\t\t\t\t:\n\t\t\t\t\t<div style={{ textAlign: \"center\" }}>\n\t\t\t\t\t\t<button className=\"btn btn-primary\" onClick={() => setShowForm(true)}>\n\t\t\t\t\t\t\tAdd Lesson\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t}\n\n\t\t\t<div className=\"pt-3\" style={{ textAlign: \"center\" }}>\n\n\t\t\t\t{/* {LOADING && ERROR} */}\n\t\t\t\t{\n\t\t\t\t\tisLoading ?\n\t\t\t\t\t\t<div className=\"text-center\">\n\t\t\t\t\t\t\t<div className=\"spinner-border\" role=\"status\" style={{ color: \"orange\" }}>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t: (error &&\n\t\t\t\t\t\t\t<div className=\"alert alert-danger\" role=\"alert\">\n\t\t\t\t\t\t\t\t{error}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)\n\n\t\t\t\t}\n\n\t\t\t\t{/* {ALL LESSONS} */}\n\t\t\t\t{\n\t\t\t\t\tlessons.map(lesson => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<Lesson\n\t\t\t\t\t\t\t\tkey={lesson.lesson_id}\n\t\t\t\t\t\t\t\tremoveLesson={removeLesson}\n\t\t\t\t\t\t\t\tlessonId={lesson.lesson_id}\n\t\t\t\t\t\t\t\tlessonName={lesson.lesson_name}\n\t\t\t\t\t\t\t\tdescription={lesson.description}\n\t\t\t\t\t\t\t\tprice30m={lesson.price_30m}\n\t\t\t\t\t\t\t\tprice60m={lesson.price_60m}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)\n\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nexport default LessonPanel\n","import React, { useState, useEffect } from 'react'\nimport { FaAngleLeft, FaAngleRight } from 'react-icons/fa'\n\nconst MONTH = [\n    { value: 0, month: 'JAN' },\n    { value: 1, month: 'FEB' },\n    { value: 2, month: 'MAR' },\n    { value: 3, month: 'APR' },\n    { value: 4, month: 'MAY' },\n    { value: 5, month: 'JUN' },\n    { value: 6, month: 'JUL' },\n    { value: 7, month: 'AUG' },\n    { value: 8, month: 'SEP' },\n    { value: 9, month: 'OCT' },\n    { value: 10, month: 'NOV' },\n    { value: 11, month: 'DEC' },\n]\n\nconst WEEK = [\n    'Sun', 'Mon', 'Tu', 'Wed', 'Th', 'Fri', 'Sat'\n]\n\nfunction DatePicker(props) {\n    const [date, setDate] = useState(props.date)\n    const [month, setMonth] = useState(props.month)\n    const [year, setYear] = useState(props.year)\n    const [selectedMonth, setSelectedMonth] = useState(props.month)\n    const [selectedYear, setSelectedYear] = useState(props.year)\n    const [dates, setDates] = useState([])\n    const handleDateChange = props.onDateChange\n\n    useEffect(() => {\n        let newDates = []\n        let today = new Date()\n        let startDayOfMonth = new Date(year, month, 1)\n        let dayOfMonthAtStart = startDayOfMonth.getDay()\n        let endDayOfMonth = new Date(year, month + 1, 0)\n        let numDayOfMonth = endDayOfMonth.getDate()\n\n        let numObj = numDayOfMonth + dayOfMonthAtStart\n\n        let currentDate = 1 - dayOfMonthAtStart\n        for (let i = 0; i < numObj; i++) {\n            let theDate = new Date(year, month, currentDate)\n            let upComming = currentDate > 0 && (checkFutureDay(theDate, today) || checkSameDay(theDate, today))\n\n            let obj = {\n                id: currentDate,\n                upComming: upComming\n            }\n            newDates.push(obj)\n            currentDate++\n        }\n        setDates(newDates)\n    }, [month, year])\n\n    const checkSameDay = (date1, date2) => {\n        return date1.getDate() == date2.getDate() && date1.getMonth() == date2.getMonth() && date1.getFullYear() == date2.getFullYear()\n    }\n\n    const checkFutureDay = (date, thresholdDate) => {\n        return date > thresholdDate\n    }\n\n    const incrementYear = () => {\n        setYear(year + 1)\n    }\n\n    const decrementYear = () => {\n        if (year > 1970) {\n            setYear(year - 1)\n        }\n    }\n\n    const monthHandle = (e) => {\n        setMonth(parseInt(e.target.id))\n    }\n\n    const onSelectDateHandle = (e) => {\n        setSelectedMonth(month)\n        setSelectedYear(year)\n        setDate(parseInt(e.target.id))\n        handleDateChange(parseInt(e.target.id), month, year)\n    }\n\n    return (\n        <div>\n            <div className=\"calendar-picker\">\n                <div style={{ display: \"flex\", margin: \"10px 3px\", borderBottom: \"2px solid #f2f2f2\" }}>\n                    <h3 style={{ margin: \"auto\", fontSize: 25 }}>\n                        {`${date} ${MONTH[selectedMonth].month} ${selectedYear}`}\n                    </h3>\n                </div>\n\n                <div style={{textAlign: \"center\"}}>\n                    <button onClick={decrementYear} className=\"float-start circle\" >\n                        <FaAngleLeft size={25} />\n                    </button>\n                    <span style={{ fontSize: 20 }}>{year}</span>\n                    <button onClick={incrementYear} className=\"float-end circle\">\n                        <FaAngleRight size={25} />\n                    </button>\n                </div>\n                <div className=\"month-picker py-2\">\n                    <div className=\"month-grid\">\n                        {\n                            MONTH.map(monthObj => {\n                                return (\n                                    <div key={monthObj.value} className={`${parseInt(monthObj.value) == parseInt(month) ? 'month-item-active' : ''} month-item`}>\n                                        <button id={monthObj.value} onClick={monthHandle}>\n                                            {monthObj.month}\n                                        </button>\n                                    </div>\n                                )\n                            })\n                        }\n                    </div>\n                </div>\n\n                <div className=\"date-grid py-2\">\n                    {\n                        WEEK.map((aDay, index) => {\n                            return (\n                                <div className=\"date-item date-item-header\" key={index} >\n                                    <div style={{ margin: \"auto\" }}>\n                                        {aDay}\n                                    </div>\n                                </div>\n                            )\n                        })\n                    }\n                    {\n                        dates.map(aDate => {\n                            let upcommingCSS = aDate.upComming ? 'date-item-upcomming' : ''\n                            let currentCSS = aDate.id == date && month == selectedMonth && year == selectedYear ? 'date-item-active' : ''\n\n                            return (\n                                <div className={`date-item ${upcommingCSS} ${currentCSS}`} key={aDate.id}>\n                                    <button disabled={!aDate.upComming ? true : false} onClick={onSelectDateHandle} id={aDate.id}>\n                                        <div id={aDate.id}>\n                                            <p id={aDate.id}>{aDate.id > 0 && aDate.id}</p>\n                                        </div>\n                                    </button>\n                                </div>\n                            )\n                        })\n                    }\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default DatePicker","import React, { useState, useEffect, useRef } from 'react'\nimport { API_URL } from '../JS/variables'\n\nfunction TimeOffer(props) {\n\tconst [fetchErrors, setFetchErrors] = useState([])\n\tconst [times, setTimes] = useState([])\n\tconst [selectedTime, setSelectedTime] = useState('')\n\tconst [isLoading, setIsLoading] = useState(false)\n\tconst mountedRef = useRef(true)\n\n\t// UTC TIME\n\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/UTC\n\n\tuseEffect(() => {\n\t\treturn () => {\n\t\t\tmountedRef.current = false\n\t\t}\n\t}, [])\n\n\tuseEffect(() => {\n\t\tsetIsLoading(true)\n\n\t\tconst requestOptions = {\n\t\t\tmethod: 'GET',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t'Accept': 'application/json'\n\t\t\t}\n\t\t}\n\n\t\tlet date = new Date(props.fullDate)\n\t\tlet day = date.getDay()\n\t\tdate = date.toUTCString()\n\n\t\tfetch(`${API_URL}/api/availability/offertime?day=${day}&duration=${props.duration}&utcDate=${date}`, requestOptions)\n\t\t\t.then(res => res.json())\n\t\t\t.then((data) => {\n\t\t\t\tif(!mountedRef.current) return null\n\t\t\t\tif (!data.success) {\n\t\t\t\t\tthrow new Error(data.message)\n\t\t\t\t}\n\t\t\t\tif (data.times.length === 0) {\n\t\t\t\t\tthrow new Error(\"Not available. Check other days or decrease session time.\")\n\t\t\t\t}\n\t\t\t\tsetIsLoading(false)\n\t\t\t\tsetFetchErrors([])\n\n\t\t\t\tdata.times.sort((a,b) => new Date(a) - new Date(b))\n\t\t\t\tsetTimes(data.times)\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tif(!mountedRef.current) return null\n\t\t\t\tsetTimes([])\n\t\t\t\tsetIsLoading(false)\n\t\t\t\tif (Array.isArray(err)) {\n\t\t\t\t\tsetFetchErrors(err)\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tsetFetchErrors([err.message])\n\t\t\t\t}\n\t\t\t\tconsole.log(err)\n\t\t\t})\n\t}, [props.fullDate, props.duration, props.dummy])\n\n\tconst minutesToHhMmAPmString = (minutes) => {\n\t\tlet hours = Math.floor(minutes / 60)\n\t\tconst suffix = hours >= 12 ? \"PM\" : \"AM\"\n\t\tlet minutePart = ((minutes % 60) + '0').substring(0, 2)\n\t\thours = `${((hours + 11) % 12 + 1)}:${minutePart} ${suffix}`\n\t\treturn hours\n\t}\n\n\tconst getTotalMinutesFromDate = (date) => {\n\t\treturn date.getHours() * 60 + date.getMinutes()\n\t}\n\n\treturn (\n\t\t<div>\n\t\t\t{\n\t\t\t\tisLoading ?\n\t\t\t\t\t<div style={{ margin: \"auto\", textAlign: \"center\" }}>\n\t\t\t\t\t\t<div className=\"spinner-border text-warning\" role=\"status\">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t:\n\t\t\t\t\t<div style={{display: \"flex\", flexWrap: \"wrap\", justifyContent: \"center\"}}>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttimes.map((time, index) => {\n\t\t\t\t\t\t\t\tconst date = new Date(time)\n\t\t\t\t\t\t\t\tconst minutes = getTotalMinutesFromDate(date)\n\t\t\t\t\t\t\t\tlet HHMMAPMstr = minutesToHhMmAPmString(minutes)\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<button key={index} \n\t\t\t\t\t\t\t\t\ttype=\"button\" \n\t\t\t\t\t\t\t\t\tvalue={HHMMAPMstr} \n\t\t\t\t\t\t\t\t\tclassName={`btn ${ HHMMAPMstr == selectedTime? 'btn-primary' : 'btn-secondary'} mx-1 my-1`} \n\t\t\t\t\t\t\t\t\tstyle={{ width: 80, fontSize: 12 }}\n\t\t\t\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\t\t\t\tsetSelectedTime(HHMMAPMstr)\n\t\t\t\t\t\t\t\t\t\t\tprops.onTimeSelected(HHMMAPMstr)\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>{HHMMAPMstr}</button>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t}\n\t\t\t\t\t</div>\n\t\t\t}\n\t\t\t{\n\t\t\t\tfetchErrors.map((error, index) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div key={index} className=\"alert alert-danger\" role=\"alert\">\n\t\t\t\t\t\t\t{error}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)\n\t\t\t\t})\n\t\t\t}\n\t\t</div>\n\t)\n}\n\nexport default TimeOffer\n","import React, { useState, useEffect, useRef } from 'react'\nimport { EatLoading } from 'react-loadingg'\nimport { API_URL } from '../JS/variables';\n\nfunction ClassOffer(props) {\n    const [lessons, setLessons] = useState([])\n    const [selectedLessonId, setSelectedLessonId] = useState(null)\n    const mountedRef = useRef(true)\n    const [isLoading, setIsLoading] = useState(false)\n    const [error, setError] = useState('')\n\n    useEffect(() => {\n        if (!mountedRef.current) return null\n\n        setIsLoading(true)\n        setError('')\n\n        const requestOptions = {\n            method: 'GET',\n            headers: {\n                'Content-Type': 'application/json',\n                'Accept': 'application/json'\n            }\n        }\n        fetch(`${API_URL}/api/lesson/active`, requestOptions)\n            .then(res => res.json())\n            .then(data => {\n                if (!data.success) {\n                    throw new Error(data.message)\n                }\n                if (!data.lessons.length) {\n                    throw new Error('We are sorry. No lesson is available now.')\n                }\n                if (!mountedRef.current) return null\n                setLessons(data.lessons)\n                setIsLoading(false)\n                setError('')\n            })\n            .catch(error => {\n                if (!mountedRef.current) return null\n                console.log(error.message)\n                setIsLoading(false)\n                setError(error.message)\n            })\n\n        return () => {\n            mountedRef.current = false\n        }\n    }, [])\n\n    return (\n        <div>\n            {/* {LOADING && ERROR} */}\n            {\n                isLoading ? <EatLoading color=\"orange\" />\n                    : (error &&\n                        <div className=\"alert alert-danger\" role=\"alert\">\n                            {error}\n                        </div>\n                    )\n\n            }\n            <div className=\"class-offer-flex\">\n            {lessons.map(lesson => {\n\n                return (\n                    <div className={`class-offer my-2 ${selectedLessonId == lesson.lesson_id? \"class-offer-active\" : \"class-offer-inactive\"}`}  \n                    key={lesson.lesson_id} \n                    onClick={() => {\n                        setSelectedLessonId(lesson.lesson_id)\n                        props.selectLesson({\n                            lessonId: lesson.lesson_id,\n                            lessonName: lesson.lesson_name,\n                            price30m: lesson.price_30m,\n                            price60m: lesson.price_60m,\n                        })\n                    }}>\n                        <h3>{lesson.lesson_name}</h3>\n\t\t\t\t\t\t<p>description:</p>\n\t\t\t\t\t\t<p>$ {lesson.description}</p>\n                        <p>30 minutes: ${lesson.price_30m}</p>\n                        <p>60 minutes: ${lesson.price_60m}</p>\n                    </div>\n                )\n            })}\n            </div>\n        </div>\n    )\n}\n\nexport default ClassOffer\n","import React, { useState, useEffect, useRef } from 'react'\nimport DatePicker from './DatePicker'\nimport TimeOffer from './TimeOffer'\nimport ClassOffer from './ClassOffer'\nimport { API_URL } from '../JS/variables';\n\nconst today = new Date()\nconst initDate = today.getDate()\nconst initMonth = today.getMonth() + 1\nconst initYear = today.getFullYear()\nconst INIT_FULLDATE = `${initYear}-${initMonth}-${initDate}`\nconst INIT_DURATION = 60\n\nfunction Booking() {\n\tconst [name, setName] = useState('')\n\tconst [email, setEmail] = useState('')\n\tconst [phone, setPhone] = useState('')\n\tconst [note, setNote] = useState('')\n\tconst [duration, setDuration] = useState(INIT_DURATION)\n\tconst [fullDate, setFullDate] = useState(INIT_FULLDATE)\n\tconst [lesson, setLesson] = useState(null)\n\tconst [fullTime, setFullTime] = useState('')\n\tconst [submitErrors, setSubmitErrors] = useState([])\n\tconst [isLoading, setIsLoading] = useState(false)\n\tconst [bookingSuccess, setBookingSuccess] = useState(false)\n\tconst [dummy, setDummy] = useState(0)\n\n\tconst mountedRef = useRef(true)\n\n\n\tuseEffect(() => {\n\t\treturn () => {\n\t\t\tmountedRef.current = false\n\t\t}\n\t}, [])\n\n\tconst signalBookingSuccess = () => {\n\t\tsetDummy(dummy + 1)\n\t\tsetBookingSuccess(true)\n\t\tsetTimeout(() => {\n\t\t\tif (!mountedRef.current) return null\n\t\t\tsetBookingSuccess(false)\n\t\t}, 7000)\n\t}\n\n\tuseEffect(() => {\n\t\tsetFullTime('')\n\t}, [fullDate, duration])\n\n\tconst handleDateChange = (date, month, year) => {\n\t\tsetFullDate(year + '-' + (month + 1) + '-' + date)\n\t}\n\n\tconst onDurationChange = (e) => {\n\t\tsetDuration(e.target.value)\n\t}\n\n\n\tconst handleSubmit = () => {\n\t\tlet errors = [\n\t\t\t...(lesson ? [] : ['Lesson is missing. Please select a lesson']),\n\t\t\t...(fullDate ? [] : ['Date is missing. Please select date']),\n\t\t\t...(fullTime ? [] : ['Time is missing. Please select time.']),\n\t\t\t...(name ? [] : ['Name is required.']),\n\t\t\t...(email ? [] : ['Email address is required.']),\n\t\t\t...(duration > 0 && duration % 30 == 0 ? [] : ['Select session duration.'])\n\t\t]\n\t\tif (errors.length) {\n\t\t\treturn setSubmitErrors(errors)\n\t\t}\n\n\t\t// convert to utc date\n\t\tlet d = new Date(`${fullDate} ${fullTime}`)\n\t\td = d.toUTCString()\n\n\t\tconst requestOptions = {\n\t\t\tmethod: 'POST',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t'Accept': 'application/json'\n\t\t\t},\n\t\t\tbody: JSON.stringify({\n\t\t\t\tname: name,\n\t\t\t\temail: email,\n\t\t\t\tphone: phone,\n\t\t\t\tnote: note,\n\t\t\t\tdate: d,\n\t\t\t\tduration: duration,\n\t\t\t\tlessonId: lesson.lessonId\n\t\t\t})\n\t\t}\n\n\t\tsetIsLoading(true)\n\t\tsetSubmitErrors([])\n\n\t\tfetch(`${API_URL}/api/booking`, requestOptions)\n\t\t\t.then(res => res.json())\n\t\t\t.then(data => {\n\t\t\t\tif (!mountedRef.current) return null\n\t\t\t\tif (!data.success) {\n\t\t\t\t\tthrow new Error(data.message)\n\t\t\t\t}\n\t\t\t\tsetSubmitErrors([])\n\t\t\t\tsetIsLoading(false)\n\t\t\t\tsetFullTime('')\n\t\t\t\tsignalBookingSuccess()\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tif (!mountedRef.current) return null\n\t\t\t\tif (Array.isArray(error)) {\n\t\t\t\t\tsetSubmitErrors(error)\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tsetSubmitErrors([error.message])\n\t\t\t\t}\n\t\t\t\tsetIsLoading(false)\n\t\t\t})\n\t}\n\n\treturn (\n\t\t<div style={{ maxWidth: 600, margin: \"auto\", padding: \"0px 0px 150px 0px\" }}>\n\t\t\t{/* {CLASS selection} */}\n\t\t\t<section className=\"booking\">\n\t\t\t\t<div className=\"guide-banner\">\n\t\t\t\t\t<h3>Select class</h3>\n\t\t\t\t</div>\n\t\t\t\t<ClassOffer selectLesson={setLesson} />\n\n\t\t\t</section>\n\n\t\t\t{/* {SESSION DURATION selection} */}\n\t\t\t<section className=\"booking\">\n\t\t\t\t<div className=\"guide-banner\">\n\t\t\t\t\t<h3>Select session duration</h3>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<div style={{ width: 200, margin: \"20px auto\" }}>\n\t\t\t\t\t\t<select className=\"form-select\" defaultValue={duration} aria-label=\"Default select example\" onChange={onDurationChange}>\n\t\t\t\t\t\t\t<option value=\"30\">30 minutes</option>\n\t\t\t\t\t\t\t<option value=\"60\">1 hour</option>\n\t\t\t\t\t\t\t<option value=\"90\">1 hour 30 minutes</option>\n\t\t\t\t\t\t\t<option value=\"120\">2 hours</option>\n\t\t\t\t\t\t\t<option value=\"150\">2 hours 30 minutes</option>\n\t\t\t\t\t\t\t<option value=\"180\">3 hours</option>\n\t\t\t\t\t\t\t<option value=\"210\">3 hours 30 minutes</option>\n\t\t\t\t\t\t\t<option value=\"240\">4 hours</option>\n\t\t\t\t\t\t</select>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</section>\n\n\t\t\t{/* {DATE selection section} */}\n\t\t\t<section className=\"booking\">\n\t\t\t\t<div className=\"guide-banner\">\n\t\t\t\t\t<h3>Select date</h3>\n\t\t\t\t</div>\n\t\t\t\t<DatePicker date={initDate} month={initMonth - 1} year={initYear} onDateChange={handleDateChange} />\n\t\t\t</section>\n\n\t\t\t{/* {TIME selection section} */}\n\t\t\t<section className=\"booking\">\n\t\t\t\t<div className=\"guide-banner\">\n\t\t\t\t\t<h3>Select time</h3>\n\t\t\t\t</div>\n\t\t\t\t<TimeOffer duration={duration} fullDate={fullDate} onTimeSelected={setFullTime} dummy={dummy} />\n\t\t\t</section>\n\n\t\t\t{/* ...... {student information} ......... */}\n\t\t\t<section className=\"booking\">\n\t\t\t\t<div className=\"guide-banner\">\n\t\t\t\t\t<h3>Your information</h3>\n\t\t\t\t</div>\n\t\t\t\t<form className=\"form-default-box\">\n\t\t\t\t\t<div className=\"mb-3\">\n\t\t\t\t\t\t<label htmlFor=\"name\" className=\"form-label\"><b>Name</b> </label>\n\t\t\t\t\t\t<input type=\"text\" length={50} className=\"form-control\" id=\"name\" required\n\t\t\t\t\t\t\tonChange={(e) => { setName(e.target.value) }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"mb-3\">\n\t\t\t\t\t\t<label htmlFor=\"email\" className=\"form-label\"><b>Email</b></label>\n\t\t\t\t\t\t<input type=\"email\" length={50} className=\"form-control\" id=\"email\" required\n\t\t\t\t\t\t\tonChange={(e) => { setEmail(e.target.value) }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"mb-3\">\n\t\t\t\t\t\t<label htmlFor=\"phone\" className=\"form-label\"><b>Phone</b></label>\n\t\t\t\t\t\t<input type=\"tel\" length={20} className=\"form-control\" id=\"phone\"\n\t\t\t\t\t\t\tonChange={(e) => { setPhone(e.target.value) }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"mb-3\">\n\t\t\t\t\t\t<label htmlFor=\"note\" className=\"form-label\"><b>Note</b></label>\n\t\t\t\t\t\t<textarea className=\"form-control\" id=\"description\" rows={5} wrap=\"soft\"\n\t\t\t\t\t\t\tonChange={(e) => { setNote(e.target.value) }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t</section>\n\n\t\t\t{/* {summary table} */}\n\t\t\t<section className=\"booking\">\n\t\t\t\t<div className=\"guide-banner\">\n\t\t\t\t\t<h3>Confirm details & Book appointment</h3>\n\t\t\t\t</div>\n\t\t\t\t<table className=\"table mb-4\" style={{ margin: \"auto\", maxWidth: 600 }}>\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t<tr className=\"table-primary\">\n\t\t\t\t\t\t\t<td colSpan=\"2\">\n\t\t\t\t\t\t\t\t<b>Your information</b>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr className=\"table-light\">\n\t\t\t\t\t\t\t<td className=\"booking-info-tag\">Name</td>\n\t\t\t\t\t\t\t<td>{name}</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr className=\"table-light\">\n\t\t\t\t\t\t\t<td className=\"booking-info-tag\">Email</td>\n\t\t\t\t\t\t\t<td>{email}</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr className=\"table-light\">\n\t\t\t\t\t\t\t<td className=\"booking-info-tag\">Phone</td>\n\t\t\t\t\t\t\t<td>{phone}</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr className=\"table-light\">\n\t\t\t\t\t\t\t<td className=\"booking-info-tag\" style={{ verticalAlign: \"top\" }}>Note</td>\n\t\t\t\t\t\t\t<td>{note}</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr className=\"table-primary\">\n\t\t\t\t\t\t\t<td colSpan=\"2\"><b>Appointment information</b></td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr className=\"table-light\">\n\t\t\t\t\t\t\t<td className=\"booking-info-tag\">Class</td>\n\t\t\t\t\t\t\t<td>{lesson && lesson.lessonName}</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr className=\"table-light\">\n\t\t\t\t\t\t\t<td className=\"booking-info-tag\">Class ID</td>\n\t\t\t\t\t\t\t<td>{lesson && lesson.lessonId}</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr className=\"table-light\">\n\t\t\t\t\t\t\t<td className=\"booking-info-tag\">Date</td>\n\t\t\t\t\t\t\t<td>{fullDate}</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr className=\"table-light\">\n\t\t\t\t\t\t\t<td className=\"booking-info-tag\">Time</td>\n\t\t\t\t\t\t\t<td>{fullTime}</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr className=\"table-light\">\n\t\t\t\t\t\t\t<td className=\"booking-info-tag\">Duration</td>\n\t\t\t\t\t\t\t<td>{duration} minutes</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr className=\"table-light\">\n\t\t\t\t\t\t\t<td className=\"booking-info-tag\">Fee</td>\n\t\t\t\t\t\t\t<td>${lesson && lesson.price60m * Math.floor(duration / 60) + lesson.price30m * (duration % 60 == 30 ? 1 : 0)} (pay at the study date)</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\n\t\t\t\t{\n\t\t\t\t\tsubmitErrors.length > 0 &&\n\t\t\t\t\t<div className=\"alert alert-danger\" role=\"alert\">\n\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsubmitErrors.map((error, index) => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<li key={index}>{error}</li>\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t}\n\n\t\t\t\t{\n\t\t\t\t\tbookingSuccess &&\n\t\t\t\t\t<div className=\"alert alert-success\" role=\"alert\">\n\t\t\t\t\t\t<p>Successfully booked.Booking details will be sent to your email address.</p>\n\t\t\t\t\t\t<p>You can continue booking on this page.</p>\n\t\t\t\t\t</div>\n\t\t\t\t}\n\n\t\t\t\t{\n\t\t\t\t\tisLoading ?\n\t\t\t\t\t\t<div style={{ display: \"flex\", justifyContent: \"flex-end\" }}>\n\t\t\t\t\t\t\t<button className=\"btn btn-primary\" type=\"button\" disabled>\n\t\t\t\t\t\t\t\t<span className=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\n\t\t\t\t\t\t\t\t<span className=\"sr-only\">Loading...</span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t:\n\t\t\t\t\t\t<div style={{ display: \"flex\", justifyContent: \"flex-end\" }}>\n\t\t\t\t\t\t\t<button className=\"btn btn-primary\" onClick={() => { handleSubmit() }}>Book now</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t}\n\t\t\t</section>\n\t\t</div>\n\t)\n}\n\nexport default Booking\n","import React, { useState, useEffect, useRef } from 'react'\nimport { API_URL } from '../JS/variables'\n\nfunction CrateAvailabilityForm(props) {\n\tconst DAYS = [\n\t\t{ id: 0, day: 'Sun', isChecked: false },\n\t\t{ id: 1, day: 'Mon', isChecked: false },\n\t\t{ id: 2, day: 'Tu', isChecked: false },\n\t\t{ id: 3, day: 'Wed', isChecked: false },\n\t\t{ id: 4, day: 'Th', isChecked: false },\n\t\t{ id: 5, day: 'Fri', isChecked: false },\n\t\t{ id: 6, day: 'Sat', isChecked: false },\n\t\t{ id: 7, day: 'Everyday', isChecked: false },\n\t]\n\n\tconst [selectedDays] = useState(DAYS)\n\tconst [isLoading, setIsLoading] = useState(false)\n\tconst [fetchErrors, setFetchErrors] = useState([])\n\tconst [dayError, setDayError] = useState('')\n\tconst [fromH, setFromH] = useState(0)\n\tconst [fromM, setFromM] = useState(0)\n\tconst [fromAP, setFromAP] = useState('AM')\n\tconst [toH, setToH] = useState(0)\n\tconst [toM, setToM] = useState(0)\n\tconst [toAP, setToAP] = useState('AM')\n\tconst [dummy, setDummy] = useState(0)\n\n\tconst mountedRef = useRef(true)\n\n\tuseEffect(() => {\n\t\treturn () => {\n\t\t\tmountedRef.current = false\n\t\t}\n\t}, [])\n\n\tconst getFromMinute = () => {\n\t\treturn (fromH * 1 + (fromAP === 'AM'? 0 : 12)) * 60 + fromM * 1\n\t}\n\n\tconst getToMinute = () => {\n\t\t// to midnight\n\t\tif (toH * 1 == 0 && toM * 1 == 0 && toAP == 'AM'){\n\t\t\treturn 24*60\n\t\t}\n\t\treturn (toH * 1 + (toAP === 'AM'? 0 : 12)) * 60 + toM * 1\n\t}\n\n\tconst handleAddAvailability = (e) => {\n\t\te.preventDefault()\n\t\tlet timeFrom = getFromMinute()\n\t\tlet timeTo = getToMinute()\n\n\n\t\tif(timeFrom >= timeTo){\n\t\t\treturn setFetchErrors(['Incorrect time.'])\n\t\t}\n\n\n\t\tif (!mountedRef.current) {\n\t\t\treturn null\n\t\t}\n\t\tsetFetchErrors([])\n\t\tsetIsLoading(true)\n\n\t\tconst days = getSelectedDaysValue()\n\n\t\tif (!days) {\n\t\t\tsetDayError('At least one day must be selected.')\n\t\t\tsetIsLoading(false)\n\t\t\treturn\n\t\t} else {\n\t\t\tsetDayError('')\n\t\t}\n\n\t\tconst requestOptions = {\n\t\t\tmethod: 'POST',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t'Accept': 'application/json'\n\t\t\t},\n\t\t\tbody: JSON.stringify({\n\t\t\t\ttimeFrom: timeFrom,\n\t\t\t\ttimeTo: timeTo,\n\t\t\t\tdays: getSelectedDaysValue()\n\t\t\t}),\n\t\t\tcredentials: 'include'\n\t\t}\n\n\t\tfetch(`${API_URL}/api/availability/`, requestOptions)\n\t\t\t.then(res => {\n\t\t\t\tif (res.status === 401) {\n\t\t\t\t\tthrow new Error('Unauthorized.')\n\t\t\t\t}\n\t\t\t\treturn res\n\t\t\t})\n\t\t\t.then(res => res.json())\n\t\t\t.then((data) => {\n\t\t\t\tif (!mountedRef.current) return null\n\t\t\t\tif (!data.success) {\n\t\t\t\t\tthrow new Error(data.message)\n\t\t\t\t}\n\t\t\t\tprops.handleClose()\n\t\t\t\tprops.signalAddSuccess()\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tif (!mountedRef.current) return null\n\t\t\t\tif (Array.isArray(err)) {\n\t\t\t\t\tsetFetchErrors(err)\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tsetFetchErrors([err.message])\n\t\t\t\t}\n\t\t\t\tsetIsLoading(false)\n\t\t\t})\n\t}\n\n\t// return 056 if Sun, Fri, Sat is checked\n\tconst getSelectedDaysValue = () => {\n\t\tlet val = ''\n\t\tselectedDays.forEach(day => {\n\t\t\tif (day.isChecked) {\n\t\t\t\tval += day.id\n\t\t\t}\n\t\t})\n\t\treturn val\n\t}\n\n\tconst onSelectedDayChange = (e) => {\n\t\tif(e.target.id == 7){\n\t\t\t// every day is check, check if all 7 days are checked. If not set isChecked = true. If they are, set all to false\n\t\t\tlet foundUnchecked = false\n\t\t\tfor(let i = 0; i < selectedDays.length - 1; i++){\n\t\t\t\tif(!selectedDays[i].isChecked){\n\t\t\t\t\tselectedDays[i].isChecked = true\n\t\t\t\t\tfoundUnchecked = true\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// if there are no uncheck, uncheck them all\n\t\t\tif(!foundUnchecked){\n\t\t\t\tfor(let i = 0; i < selectedDays.length; i++){\n\t\t\t\t\tselectedDays[i].isChecked = false\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// check the every day\n\t\t\t\tselectedDays[selectedDays.length - 1].isChecked = true\n\t\t\t}\n\t\t} else {\n\t\t\tfor(let i = 0; i < selectedDays.length - 1; i++){\n\t\t\t\tif(e.target.id == selectedDays[i].id){\n\t\t\t\t\tselectedDays[i].isChecked = e.target.checked\n\t\t\t\t\tselectedDays[7].isChecked = false\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tsetDummy(dummy + 1)\n\t}\n\n\treturn (\n\t\t<div>\n\t\t\t<div className=\"mt-3 mb-3\">\n\t\t\t\t<form className=\"form-default-box\" onSubmit={handleAddAvailability} style={{ margin: \"auto\", maxWidth: 320 }}>\n\n\t\t\t\t\t{/* {TIME INPUTS} */}\n\t\t\t\t\t<div className=\"py-1\" style={{ textAlign: \"center\" }}>\n\t\t\t\t\t\t<b>From</b>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div style={{ margin: \"5px auto\", width: \"100%\", textAlign: \"center\" }}>\n\t\t\t\t\t\t<div style={{ display: \"inline-block\" }}>\n\t\t\t\t\t\t\t<select className=\"form-select\" defaultValue={fromH} name=\"fromH\" id=\"fromH\"\t\t\t\t\t\n\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\tsetFromH(e.target.value)\n\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t<option value=\"0\">12</option>\n\t\t\t\t\t\t\t\t<option value=\"1\">01</option>\n\t\t\t\t\t\t\t\t<option value=\"2\">02</option>\n\t\t\t\t\t\t\t\t<option value=\"3\">03</option>\n\t\t\t\t\t\t\t\t<option value=\"4\">04</option>\n\t\t\t\t\t\t\t\t<option value=\"5\">05</option>\n\t\t\t\t\t\t\t\t<option value=\"6\">06</option>\n\t\t\t\t\t\t\t\t<option value=\"7\">07</option>\n\t\t\t\t\t\t\t\t<option value=\"8\">08</option>\n\t\t\t\t\t\t\t\t<option value=\"9\">09</option>\n\t\t\t\t\t\t\t\t<option value=\"10\">10</option>\n\t\t\t\t\t\t\t\t<option value=\"11\">11</option>\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t&nbsp;<b>:</b>&nbsp;\n\t\t\t\t\t\t<div style={{ display: \"inline-block\" }}>\n\t\t\t\t\t\t\t<select className=\"form-select\" defaultValue={fromM} name=\"fromM\" id=\"fromM\" \n\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\tsetFromM(e.target.value)\n\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t<option value=\"0\">00</option>\n\t\t\t\t\t\t\t\t<option value=\"30\">30</option>\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t\t<div style={{ display: \"inline-block\" }}>\n\t\t\t\t\t\t\t<select className=\"form-select\" defaultValue={fromAP} name=\"fromAP\" id=\"fromAP\" \n\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\tsetFromAP(e.target.value)\n\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t<option value=\"AM\">AM</option>\n\t\t\t\t\t\t\t\t<option value=\"PM\">PM</option>\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className=\"py-1\" style={{ textAlign: \"center\" }}>\n\t\t\t\t\t\t<b>To</b>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div style={{ margin: \"5px auto\", width: \"100%\", textAlign: \"center\" }}>\n\t\t\t\t\t\t<div style={{ display: \"inline-block\" }}>\n\t\t\t\t\t\t\t<select className=\"form-select\" defaultValue={toH} name=\"toH\" id=\"toH\" \n\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\tsetToH(e.target.value)\n\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t<option value=\"0\">12</option>\n\t\t\t\t\t\t\t\t<option value=\"1\">01</option>\n\t\t\t\t\t\t\t\t<option value=\"2\">02</option>\n\t\t\t\t\t\t\t\t<option value=\"3\">03</option>\n\t\t\t\t\t\t\t\t<option value=\"4\">04</option>\n\t\t\t\t\t\t\t\t<option value=\"5\">05</option>\n\t\t\t\t\t\t\t\t<option value=\"6\">06</option>\n\t\t\t\t\t\t\t\t<option value=\"7\">07</option>\n\t\t\t\t\t\t\t\t<option value=\"8\">08</option>\n\t\t\t\t\t\t\t\t<option value=\"9\">09</option>\n\t\t\t\t\t\t\t\t<option value=\"10\">10</option>\n\t\t\t\t\t\t\t\t<option value=\"11\">11</option>\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t&nbsp;<b>:</b>&nbsp;\n\t\t\t\t\t\t<div style={{ display: \"inline-block\" }}>\n\t\t\t\t\t\t\t<select className=\"form-select\" defaultValue={toM} name=\"toM\" id=\"toM\" \n\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\tsetToM(e.target.value)\n\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t<option value=\"0\">00</option>\n\t\t\t\t\t\t\t\t<option value=\"30\">30</option>\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t\t<div style={{ display: \"inline-block\" }}>\n\t\t\t\t\t\t\t<select className=\"form-select\" defaultValue={toAP} name=\"toAP\" id=\"toAP\" \n\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\tsetToAP(e.target.value)\n\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t<option value=\"AM\">AM</option>\n\t\t\t\t\t\t\t\t<option value=\"PM\">PM</option>\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className=\"form-check\">\n\t\t\t\t\t\t{selectedDays.map((day) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<div key={day.id}>\n\t\t\t\t\t\t\t\t\t<input className=\"form-check-input\" type=\"checkbox\" id={day.id} onChange={ e => {onSelectedDayChange(e)}} checked={day.isChecked} />\n\t\t\t\t\t\t\t\t\t<label className=\"form-check-label\" htmlFor={day.id}>{day.day}</label>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t})}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{\n\t\t\t\t\t\tdayError\n\t\t\t\t\t\t&&\n\t\t\t\t\t\t<div className=\"alert alert-danger\" role=\"alert\">\n\t\t\t\t\t\t\t{dayError}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\t\t\t\t\t{\n\t\t\t\t\t\tfetchErrors.map((error, index) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<div key={index} className=\"alert alert-danger\" role=\"alert\">\n\t\t\t\t\t\t\t\t\t{error}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\n\t\t\t\t\t{/* {Submit and Cancel buttons} */}\n\t\t\t\t\t<div style={{ width: \"100%\", height: 20, marginTop: 20 }}>\n\t\t\t\t\t\t<button type=\"button\" className=\"btn btn-danger d-inline-block float-start\"\n\t\t\t\t\t\t\tonClick={() => props.handleClose()}>Cancel</button>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tisLoading ?\n\t\t\t\t\t\t\t\t<button className=\"btn btn-primary float-end\" type=\"button\" disabled>\n\t\t\t\t\t\t\t\t\t<span className=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\n\t\t\t\t\t\t\t\t\t<span className=\"sr-only\">Loading...</span>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t<button type=\"submit\" className=\"btn btn-primary d-inline-block float-end\">Add</button>\n\t\t\t\t\t\t}\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t</div >\n\t)\n}\n\nexport default CrateAvailabilityForm\n","import React, { useState, useRef } from 'react'\nimport { TiTrash } from 'react-icons/ti'\nimport { API_URL } from '../JS/variables';\n\n\nfunction Availability({availability, removeAvailability}) {\n\tconst [isLoading, setIsLoading] = useState(false)\n\tconst [error, setError] = useState('')\n\tconst mountedRef = useRef(true)\n\n\tconst WEEK = [\n\t\t'Sun', 'Mon', 'Tu', 'Wed', 'Th', 'Fri', 'Sat'\n\t]\n\n\tconst minutesToHhMmAPmString = (minutes) => {\n\t\t// 12:00 AM is a special case for 12:00 AM - 12:00AM (terminal)\n\t\tif(minutes == 24*60){\n\t\t\treturn '12:00 AM'\n\t\t}\n\t\tlet hours = Math.floor(minutes / 60)\n\t\tconst suffix = hours >= 12 ? \"PM\" : \"AM\"\n\t\tlet minutePart = ((minutes % 60) + '0').substring(0, 2)\n\t\thours = `${((hours + 11) % 12 + 1)}:${minutePart} ${suffix}`\n\t\treturn hours\n\t}\n\n\tconst start_time = minutesToHhMmAPmString(availability.start_minute)\n\tconst end_time = minutesToHhMmAPmString(availability.end_minute)\n\n\tconst getAvailDisplay = () => {\n\t\tlet week = [0, 0, 0, 0, 0, 0, 0]\n\t\tlet days = availability.days\n\t\tfor (let i = 0; i < days.length; i++) {\n\t\t\tweek[days[i]] = 1\n\t\t}\n\n\t\treturn (\n\t\t\t<div style={{ margin: \"10px auto\" }}>\n\t\t\t\t{week.map((day, index) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div key={index} style={{ display: \"inline-block\", textAlign: \"center\", minWidth: 40, color: day ? 'orange' : '#eee' }}>{WEEK[index]}</div>\n\t\t\t\t\t)\n\t\t\t\t})}\n\t\t\t</div>\n\t\t)\n\t}\n\n\tconst deleteAvailability = () => {\n\t\tsetIsLoading(true)\n\t\tsetError('')\n\t\tconst requestionOptions =\n\t\t{\n\t\t\tmethod: 'DELETE',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t'Accept': 'application/json'\n\t\t\t},\n\t\t\tcredentials: 'include'\n\t\t}\n\n\t\tfetch(`${API_URL}/api/availability/delete/${availability.availability_id}`, requestionOptions)\n\t\t\t.then(res => res.json())\n\t\t\t.then(data => {\n\t\t\t\tif (!data.success) {\n\t\t\t\t\tthrow new Error(data.message)\n\t\t\t\t}\n\t\t\t\tif (!mountedRef.current) return null\n\t\t\t\tsetIsLoading(false)\n\t\t\t\tsetError('')\n\t\t\t\tremoveAvailability(availability.availability_id)\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tif (!mountedRef.current) return null\n\t\t\t\tsetIsLoading(false)\n\t\t\t\tsetError(error.message)\n\t\t\t})\n\t}\n\n\treturn (\n\t\t<div>\n\t\t\t<div className=\"mb-2 pd-4 default-wrapper mw-400\">\n\t\t\t\t<div className=\"\">\n\t\t\t\t\t<div className=\"mb-2\">\n\t\t\t\t\t\t{getAvailDisplay()}\n\t\t\t\t\t\t<p className=\"mb-1 text-secondary\"><b>{start_time == end_time ? 'All day' : `${start_time} - ${end_time}`}</b></p>\n\t\t\t\t\t</div>\n\t\t\t\t\t{/* <button type=\"button\" title=\"edit\" className=\"btn btn-secondary py-1\">\n                            <TiEdit size={20} />\n                            <span className=\"align-middle\" style={{ fontSize: 15 }}>EDIT</span>\n                        </button> */}\n\n\t\t\t\t\t{/* {error warning} */}\n\t\t\t\t\t{error &&\n\t\t\t\t\t\t<div className=\"alert alert-danger\" role=\"alert\">\n\t\t\t\t\t\t\t{error}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\n\t\t\t\t\t{/* {button panel} */}\n\t\t\t\t\t<div style={{ height: 30 }}>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tisLoading ?\n\t\t\t\t\t\t\t\t<button className=\"btn btn-danger py-1 float-end\" type=\"button\" disabled>\n\t\t\t\t\t\t\t\t\t<span className=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\n\t\t\t\t\t\t\t\t\t<span className=\"sr-only\">Deleting...</span>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t<button onClick={deleteAvailability} type=\"button\" title=\"delete\" className=\"btn btn-danger py-1 float-end\" >\n\t\t\t\t\t\t\t\t\t<TiTrash size={20} />\n\t\t\t\t\t\t\t\t\t<span className=\"align-middle button-text\" style={{ fontSize: 10 }}>DELETE</span>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div >\n\t)\n}\n\nexport default Availability\n","import React, { useState, useEffect, useRef } from 'react';\nimport CreateAvailabilityForm from './CreateAvailabilityForm';\nimport Availability from './Availability';\nimport { API_URL } from '../JS/variables';\n\nfunction AvailabilityPanel() {\n\tconst [availabilities, setAvailabilities] = useState([])\n\tconst mountedRef = useRef(true)\n\tconst [showForm, setShowForm] = useState(false)\n\tconst [addSuccess, setAddSuccess] = useState(false)\n\tconst [dummy, setDummy] = useState(0)\n\tconst [isLoading, setIsLoading] = useState(false)\n\tconst [error, setError] = useState('')\n\n\tconst signalAddSuccess = () => {\n\t\tsetAddSuccess(true)\n\t\tsetDummy(dummy + 1)\n\t\tsetTimeout(() => {\n\t\t\tsetAddSuccess(false)\n\t\t}, 2000)\n\t}\n\n\tfunction compare(a, b) {\n\t\tif (a.days < b.days) {\n\t\t\treturn -1;\n\t\t}\n\t\tif (a.days > b.days) {\n\t\t\treturn 1;\n\t\t}\n\t\treturn 0;\n\t}\n\n\tuseEffect(() => {\n\t\treturn () => {\n\t\t\tmountedRef.current = false\n\t\t}\n\t}, [])\n\n\tuseEffect(() => {\n\t\tif (!mountedRef.current) return null\n\t\tsetIsLoading(true)\n\t\tsetError('')\n\t\tconst requestOptions = {\n\t\t\tmethod: 'GET',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t'Accept': 'application/json',\n\t\t\t}\n\t\t}\n\n\t\tfetch(`${API_URL}/api/availability/all`, requestOptions)\n\t\t\t.then(res => res.json())\n\t\t\t.then(res => {\n\t\t\t\tif (!mountedRef.current) return null\n\t\t\t\tif (!res.success) {\n\t\t\t\t\tthrow new Error(res.message)\n\t\t\t\t}\n\t\t\t\tconst avails = res.data\n\t\t\t\tavails.sort(compare)\n\t\t\t\tsetAvailabilities(res.data)\n\t\t\t\tsetError('')\n\t\t\t\tsetIsLoading(false)\n\t\t\t})\n\t\t\t.catch(err => {\n\t\t\t\tif (!mountedRef.current) return null\n\t\t\t\tconsole.log(err.message)\n\t\t\t\tsetError(err.message)\n\t\t\t\tsetIsLoading(false)\n\t\t\t})\n\n\n\t}, [dummy])\n\n\tconst removeAvailability = (id) => {\n\t\tsetAvailabilities(availabilities.filter(availability => availability.availability_id != id))\n\t}\n\n\treturn (\n\t\t<div className=\"mt-3\">\n\t\t\t{/* {msg when successfully add new availability} */}\n\t\t\t{\n\t\t\t\taddSuccess &&\n\t\t\t\t<div className=\"alert alert-success\" role=\"alert\">\n\t\t\t\t\tSuccessfully added.\n\t\t\t\t</div>\n\t\t\t}\n\n\t\t\t{/* {Form component} */}\n\t\t\t{\n\t\t\t\tshowForm ?\n\t\t\t\t\t<CreateAvailabilityForm signalAddSuccess={signalAddSuccess} handleClose={() => setShowForm(false)} />\n\t\t\t\t\t:\n\t\t\t\t\t<div style={{ textAlign: \"center\" }}>\n\t\t\t\t\t\t<button type=\"button\" className=\"btn btn-primary mb-5\" onClick={() => setShowForm(true)}>\n\t\t\t\t\t\t\tAdd availability\n\t\t\t\t\t\t</button><br/>\n\t\t\t\t\t\t<button className=\"btn btn-primary mb-5\" onClick={()=>{window.location.href=\"/api/unavailable/\"}}>\n\t\t\t\t\t\tset time unavailable\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t}\n\n\t\t\t{/* {LOADING && ERROR} */}\n\t\t\t{\n\t\t\t\tisLoading ?\n\t\t\t\t\t<div className=\"text-center\">\n\t\t\t\t\t\t<div className=\"spinner-border\" role=\"status\" style={{color: \"orange\"}}>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t: (error &&\n\t\t\t\t\t\t<div className=\"alert alert-danger\" role=\"alert\">\n\t\t\t\t\t\t\t{error}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)\n\t\t\t}\n\n\t\t\t{/* {Availability list} */}\n\t\t\t{\n\t\t\t\tavailabilities.map(avail => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Availability\n\t\t\t\t\t\t\tkey={avail.availability_id}\n\t\t\t\t\t\t\tremoveAvailability={removeAvailability}\n\t\t\t\t\t\t\tavailability={avail}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)\n\n\t\t\t\t})\n\t\t\t}\n\t\t</div>\n\t)\n}\n\nexport default AvailabilityPanel\n","import React, { useEffect} from 'react'\n\nfunction AppModal({show, onClose, title, children}) {\n\n    useEffect(() => {\n        const closeOnEscapeKeyDown = (e) => {\n            if( e.keyCode === 27) {\n                onClose()\n            } \n        }\n        document.addEventListener('keydown', closeOnEscapeKeyDown)\n        return () => {\n            document.removeEventListener('keydown', closeOnEscapeKeyDown)\n        }\n    })\n\n\n\n    return (\n        <div className={`app-modal ${show? 'show' : ''}`} onClick={onClose}>\n            <div className=\"app-modal-content\" onClick={(e) => {e.stopPropagation()}}>\n                <div className=\"modal-header\">\n                    <h4 className=\"app-modal-title\">{title}</h4>\n                </div>\n                <div className=\"app-modal-body\">\n                    {children}\n                </div>\n                <div className=\"app-modal-footer\">\n                    <button className=\"btn btn-secondary\" onClick={onClose}>\n                        Close\n                    </button>\n                </div>\n            </div>\n            \n        </div>\n    )\n}\n\nexport default AppModal\n","import React, { useState, useEffect, useRef } from 'react'\nimport { API_URL } from '../JS/variables';\n\nfunction Appointment({ id, onUpdate }) {\n\tconst [appointment, setAppointment] = useState(null)\n\tconst [isLoading, setIsLoading] = useState(false)\n\tconst [error, setError] = useState('')\n\tconst [showCancelForm, setShowCancelForm] = useState(false)\n\tconst [cancelText, setCancelText] = useState('')\n\tconst [cancelLoading, setCancelLoading] = useState(false)\n\tconst [cancelError, setCancelError] = useState('')\n\tconst mountedRef = useRef(true)\n\n\tuseEffect(() => {\n\t\treturn () => {\n\t\t\tmountedRef.current = false\n\t\t}\n\t}, [])\n\n\tuseEffect(() => {\n\t\tif (!id) {\n\t\t\tconsole.log('id is null')\n\t\t\tsetAppointment(null)\n\t\t\treturn\n\t\t}\n\n\t\tsetIsLoading(true)\n\t\tsetError('')\n\n\t\tconst requestOptions = {\n\t\t\tmethod: 'GET',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t'Accept': 'application/json'\n\t\t\t},\n\t\t\tcredentials: 'include'\n\t\t}\n\t\tconsole.log('id is: ', id)\n\n\t\tfetch(`${API_URL}/api/appointment/id/${id}`, requestOptions)\n\t\t\t.then(res => res.json())\n\t\t\t.then(data => {\n\t\t\t\tif (!mountedRef.current) return null\n\t\t\t\tif (!data.success) {\n\t\t\t\t\tthrow new Error(data.message)\n\t\t\t\t}\n\t\t\t\tsetIsLoading(false)\n\t\t\t\tsetError('')\n\t\t\t\tconsole.log(data.appointment)\n\t\t\t\tsetAppointment(data.appointment)\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tif (!mountedRef.current) return null\n\t\t\t\tconsole.log(error)\n\t\t\t\tsetIsLoading(false)\n\t\t\t\tsetError(error.message)\n\t\t\t})\n\t}, [id])\n\n\tconst minutesToHhMmAPmString = (minutes) => {\n\t\tlet hours = Math.floor(minutes / 60)\n\t\tconst suffix = hours >= 12 ? \"PM\" : \"AM\"\n\t\tlet minutePart = ((minutes % 60) + '0').substring(0, 2)\n\t\thours = `${((hours + 11) % 12 + 1)}:${minutePart} ${suffix}`\n\t\treturn hours\n\t}\n\n\tconst convertDateAndTimeRangeString = (date, duration) => {\n\t\tlet d = date.getDate()\n\t\tlet m = date.getMonth() + 1\n\t\tlet y = date.getFullYear()\n\t\tlet start_time_string = minutesToHhMmAPmString(Math.floor(date.getHours()) * 60 + date.getMinutes())\n\t\tlet end_time_string = minutesToHhMmAPmString(Math.floor(date.getHours()) * 60 + date.getMinutes() + duration)\n\n\t\treturn `${d}/${m}/${y} ${start_time_string} - ${end_time_string}`\n\t}\n\n\tconst onCancelTextChange = (e) => {\n\t\t// auto adjust textarea height\n\t\te.target.style.height = \"\";\n\t\te.target.style.height = Math.min(e.target.scrollHeight, 300) + \"px\";\n\t\tsetCancelText(e.target.value)\n\t}\n\n\tconst handleCancelAppointment = (e) => {\n\t\te.preventDefault()\n\t\tconst requestOptions = {\n\t\t\tmethod: 'POST',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t'Accept': 'application/json'\n\t\t\t},\n\t\t\tbody: JSON.stringify({\n\t\t\t\tid: appointment.appointment_id,\n\t\t\t\tmessage: cancelText\n\t\t\t}),\n\t\t\tcredentials: 'include'\n\t\t}\n\n\t\tsetCancelLoading(true)\n\t\tsetCancelError('')\n\n\t\tfetch(`${API_URL}/api/appointment/admincancel?id=${appointment.appointment_id}}`, requestOptions)\n\t\t\t.then(res => res.json())\n\t\t\t.then(data => {\n\t\t\t\tif (!mountedRef.current) return null\n\t\t\t\tif (!data.success) {\n\t\t\t\t\tthrow new Error(data.message)\n\t\t\t\t}\n\t\t\t\tonUpdate()\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tconsole.log(error)\n\t\t\t\tsetCancelLoading(false)\n\t\t\t\tsetCancelError(error.message)\n\t\t\t})\n\t}\n\treturn (\n\t\t<div className=\"mb-2\">\n\t\t\t<div className=\"appointment-info-upcoming-wrapper py-2 px-2\">\n\t\t\t\t{/* {LOADING && ERROR} */}\n\t\t\t\t{\n\t\t\t\t\tisLoading ? <div className=\"text-center\">\n\t\t\t\t\t\t<div className=\"spinner-border\" role=\"status\">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t\t: (error &&\n\t\t\t\t\t\t\t<div className=\"alert alert-danger\" role=\"alert\">\n\t\t\t\t\t\t\t\t{error}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t\t{\n\t\t\t\t\tappointment &&\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<p style={{ color: \"black\" }}><b>Datetime: {convertDateAndTimeRangeString(new Date(appointment.appointment_start), appointment.duration)} ({appointment.duration} minutes)</b></p>\n\t\t\t\t\t\t<p><b>Appointment ID: </b>{appointment.appointment_id}</p>\n\t\t\t\t\t\t<p><b>Lesson: </b>{appointment.lesson_name}</p>\n\t\t\t\t\t\t<p><b>Customer: </b>{appointment.customer_name}</p>\n\t\t\t\t\t\t<p><b>Email: </b>{appointment.customer_email}</p>\n\t\t\t\t\t\t<p><b>Phone: </b>{appointment.customer_phone}</p>\n\t\t\t\t\t\t<p><b>Note: </b>{appointment.note}</p>\n\t\t\t\t\t\t<p><b>Fee: </b>${appointment.fee}</p>\n\t\t\t\t\t</div>\n\t\t\t\t}\n\t\t\t</div>\n\t\t\t<div className=\"mt-2\">\n\t\t\t\t{\n\t\t\t\t\tshowCancelForm ?\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<form onSubmit={handleCancelAppointment} className=\"py-2\">\n\t\t\t\t\t\t\t\t<textarea onChange={onCancelTextChange} className=\"form-control\" id=\"cancelText\" rows={5} wrap=\"soft\" placeholder=\"write message here\" />\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tcancelError\n\t\t\t\t\t\t\t\t\t&&\n\t\t\t\t\t\t\t\t\t<div className=\"alert alert-danger\" role=\"alert\">\n\t\t\t\t\t\t\t\t\t\t{cancelError}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tcancelLoading ?\n\t\t\t\t\t\t\t\t\t\t<button className=\"btn btn-primary float-end\" type=\"button\" disabled>\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"sr-only\">Loading...</span>\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t<button type=\"submit\" title=\"delete\" className=\"btn btn-danger my-2 float-end\" >\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"align-middle button-text\" style={{ fontSize: 12 }}>confirm cancellation</span>\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</form >\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t:\n\t\t\t\t\t\t<button className=\"btn btn-danger float-end\" onClick={() => setShowCancelForm(true)}>\n\t\t\t\t\t\t\tcancel appointment\n\t\t\t\t\t\t</button>\n\t\t\t\t}\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nexport default Appointment\n","import React, { useState, useEffect, useRef } from 'react'\nimport { API_URL } from '../JS/variables'\nimport AppModal from './AppModal'\nimport Appointment from './Appointment'\nimport { FaAngleLeft, FaAngleRight } from 'react-icons/fa'\nimport { GrRefresh } from 'react-icons/gr'\n\nfunction Calendar() {\n\tconst [date, setDate] = useState(null)\n\tconst [dateInputDisplay, setDateInputDisplay] = useState('')\n\tconst [week, setWeek] = useState([])\n\tconst [data, setData] = useState([])\n\tconst [isLoading, setIsLoading] = useState(false)\n\tconst [error, setError] = useState('')\n\tconst [selectedAppt, setSelectedAppt] = useState('')\n\tconst [dummy, setDummy] = useState(0)\n\tconst mountedRef = useRef(true)\n\n\tconst changeInputDateToFirstDayOfWeek = (d) => {\n\t\td.setDate(d.getDate() - d.getDay())\n\t\td.setHours(0)\n\t\td.setMinutes(0)\n\t\td.setSeconds(0)\n\t}\n\n\tuseEffect(() => {\n\t\tlet today = new Date()\n\t\tsetDateInputDisplay(formatDate2(today))\n\t\tchangeInputDateToFirstDayOfWeek(today)\n\t\tsetDate(today)\n\n\t\treturn () => {\n\t\t\tmountedRef.current = false\n\t\t}\n\t}, [])\n\n\tuseEffect(() => {\n\t\tif (!date) return\n\n\t\tlet aWeek = []\n\n\t\tlet beginDate = new Date(date) // beginning of the week (Sunday)\n\t\tchangeInputDateToFirstDayOfWeek(beginDate)\n\n\t\t// push seven day in array\n\t\tfor (let i = 0; i < 7; i++) {\n\t\t\tlet dummyDate = new Date(beginDate)\n\t\t\tlet aDate = dummyDate.setDate(beginDate.getDate() + i)\n\t\t\taWeek.push(aDate)\n\t\t}\n\t\tsetWeek(aWeek)\n\t}, [date])\n\n\tuseEffect(() => {\n\t\tconst fetchWeekAppointment = () => {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tconst requestOptions = {\n\t\t\t\t\tcredentials: 'include'\n\t\t\t\t}\n\t\t\t\tfetch(`${API_URL}/api/appointment/week?utcDate=${date.toUTCString()}`, requestOptions)\n\t\t\t\t\t.then(res => res.json())\n\t\t\t\t\t.then(data => {\n\t\t\t\t\t\tif (!mountedRef) return null\n\t\t\t\t\t\tif (!data.success) {\n\t\t\t\t\t\t\tthrow new Error(data.message)\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tlet appointments = data.appointments.map(appt => {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tappointmentId: appt.appointment_id,\n\t\t\t\t\t\t\t\tcustomerName: appt.customer_name,\n\t\t\t\t\t\t\t\tlessonName: appt.lesson_name,\n\t\t\t\t\t\t\t\tappointmentStart: new Date(appt.appointment_start),\n\t\t\t\t\t\t\t\tduration: appt.duration,\n\t\t\t\t\t\t\t\tminuteStart: dateToMinuteStart(new Date(appt.appointment_start))\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t})\n\t\t\t\t\t\tresolve(appointments)\n\t\t\t\t\t})\n\t\t\t\t\t.catch(error => {\n\t\t\t\t\t\treject(error)\n\t\t\t\t\t})\n\t\t\t})\n\t\t}\n\n\t\tasync function processWeekAppointment() {\n\t\t\tif (!week.length || !date) return\n\n\t\t\t//fetch appointment\n\t\t\tsetError('')\n\t\t\tsetIsLoading(true)\n\t\t\tlet appointments = await fetchWeekAppointment().catch((error) => {\n\t\t\t\tsetError(error.message)\n\t\t\t\tsetIsLoading(false)\n\t\t\t})\n\n\t\t\tif (!appointments) {\n\t\t\t\tsetData([])\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\t//find the ealiest time of a day\n\t\t\tlet min = appointments.length ? appointments[0].minuteStart : 0\n\n\t\t\tfor (let i = 1; i < appointments.length; i++) {\n\t\t\t\tif (appointments[i].minuteStart < min) {\n\t\t\t\t\tmin = appointments[i].minuteStart\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// find the index of time to be used in calendar\n\t\t\tlet indexToUse = Math.floor(min / 30)\n\t\t\tconst TIME = ['12:00 AM', '12:30 AM', '1:00 AM', '1:30 AM', '2:00 AM', '2:30 AM', '3:00 AM', '3:30 AM', '4:00 AM', '4:30 AM', '5:00 AM', '5:30 AM', '6:00 AM', '6:30 AM', '7:00 AM', '7:30 AM', '8:00 AM', '8:30 AM', '9:00 AM', '9:30 AM', '10:00 AM', '10:30 AM', '11:00 AM', '11:30 AM', '12:00 PM', '12:30 PM', '1:00 PM', '1:30 PM', '2:00 PM', '2:30 PM', '3:00 PM', '3:30 PM', '4:00 PM', '4:30 PM', '5:00 PM', '5:30 PM', '6:00 PM', '6:30 PM', '7:00 PM', '7:30 PM', '8:00 PM', '8:30 PM', '9:00 PM', '9:30 PM', '10:00 PM', '10:30 PM', '11:00 PM', '11:30 PM']\n\t\t\tlet timeCol = TIME.splice(indexToUse)\n\n\t\t\t// create 2D array to store each row (timeCol.length * 8)\n\t\t\tlet preparingData = new Array(timeCol.length)\n\n\t\t\tfor (let i = 0; i < preparingData.length; i++) {\n\t\t\t\tpreparingData[i] = ['', '', '', '', '', '', '', '']\n\t\t\t}\n\n\t\t\t// store time in first index of all data's index\n\t\t\tfor (let i = 0; i < preparingData.length; i++) {\n\t\t\t\tpreparingData[i][0] = {\n\t\t\t\t\ttype: 'time',\n\t\t\t\t\tdata: timeCol[i]\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet startDate = new Date(week[0])\n\t\t\tlet endDate = new Date(startDate)\n\t\t\tendDate.setDate(endDate.getDate() + 7)\n\n\t\t\t// store appointment in 2D array\n\t\t\tappointments.forEach(appt => {\n\t\t\t\tlet duration = appt.duration\n\t\t\t\tlet aDate = new Date(appt.appointmentStart)\n\n\t\t\t\tif (aDate >= startDate && aDate < endDate) {\n\t\t\t\t\tlet colIndex = aDate.getDay() + 1 //first column is time, thus add 1\n\n\t\t\t\t\t// find a row to push appt in\n\t\t\t\t\tlet rowIndex = Math.floor((appt.minuteStart - min) / 30)\n\n\t\t\t\t\tpreparingData[rowIndex][colIndex] = {\n\t\t\t\t\t\ttype: 'appointment',\n\t\t\t\t\t\tdata: appt\n\t\t\t\t\t}\n\n\t\t\t\t\t// span row will overlap - assign the following rows in the same column to be blank when draw table\n\t\t\t\t\tlet numSpan = Math.floor(duration / 30) - 1 // subtract one because first row already assign\n\n\t\t\t\t\tfor (let i = 0; i < numSpan; i++) {\n\t\t\t\t\t\tpreparingData[++rowIndex][colIndex] = {\n\t\t\t\t\t\t\ttype: 'spanned'\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\n\t\t\tsetIsLoading(false)\n\t\t\tsetError('')\n\t\t\tsetData(preparingData)\n\t\t}\n\n\t\tprocessWeekAppointment()\n\n\t}, [week, dummy])\n\n\tconst refresh = () => {\n\t\tsetDummy(dummy + 1)\n\t}\n\n\tconst dateToMinuteStart = (date) => {\n\t\treturn date.getHours() * 60 + date.getMinutes()\n\t}\n\n\tconst handleWeekChange = (numWeek) => {\n\t\tlet d = new Date(date)\n\t\td.setDate(d.getDate() + (7 * numWeek))\n\n\t\tlet dDisplay = new Date(dateInputDisplay)\n\t\tdDisplay.setDate(dDisplay.getDate() + (7 * numWeek))\n\n\t\tsetDateInputDisplay(formatDate2(dDisplay))\n\t\tsetDate(d)\n\t}\n\n\tconst formatDate = (datevalue) => {\n\t\tlet date = new Date(datevalue),\n\t\t\tday = date.getDate(),\n\t\t\tmonth = date.getMonth(),\n\t\t\tyear = date.getFullYear(),\n\t\t\tmonths = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],\n\t\t\tweeks = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],\n\t\t\tdayOfWeek = date.getDay()\n\n\t\treturn weeks[dayOfWeek] + ' ' + day + ' ' + months[month] + ' ' + year;\n\t}\n\n\tconst minutesToHhMmAPmString = (minutes) => {\n\t\tlet hours = Math.floor(minutes / 60)\n\t\tconst suffix = hours >= 12 ? \"PM\" : \"AM\"\n\t\tlet minutePart = ((minutes % 60) + '0').substring(0, 2)\n\t\thours = `${((hours + 11) % 12 + 1)}:${minutePart} ${suffix}`\n\t\treturn hours\n\t}\n\n\tconst convertDateAndTimeRangeString = (date, duration) => {\n\t\tlet start_time_string = minutesToHhMmAPmString(Math.floor(date.getHours()) * 60 + date.getMinutes())\n\t\tlet end_time_string = minutesToHhMmAPmString(Math.floor(date.getHours()) * 60 + date.getMinutes() + duration)\n\n\t\treturn `${start_time_string} - ${end_time_string}`\n\t}\n\n\tconst handleApptClicked = (e) => {\n\t\te.preventDefault()\n\t\tsetSelectedAppt(e.currentTarget.id)\n\t}\n\n\tfunction formatDate2(date) {\n\t\tvar d = new Date(date),\n\t\t\tmonth = '' + (d.getMonth() + 1),\n\t\t\tday = '' + d.getDate(),\n\t\t\tyear = d.getFullYear();\n\n\t\tif (month.length < 2)\n\t\t\tmonth = '0' + month;\n\t\tif (day.length < 2)\n\t\t\tday = '0' + day;\n\n\t\treturn [year, month, day].join('-');\n\t}\n\n\t// <div style={{ textAlign: \"center\" }}>\n\t// \t<button onClick={decrementYear} className=\"float-start arrow-spinner\" >\n\t// \t\t<FaAngleLeft size={25} />\n\t// \t</button>\n\t// \t<span style={{ fontSize: 20 }}>{year}</span>\n\t// \t<button onClick={incrementYear} className=\"float-end arrow-spinner\">\n\t// \t\t<FaAngleRight size={25} />\n\t// \t</button>\n\t// </div>\n\t// <button onClick={decrementYear} className=\"float-start arrow-spinner\" >\n\t// \t<FaAngleLeft size={25} />\n\t// </button>\n\treturn (\n\t\t<div>\n\t\t\t{\n\t\t\t\terror &&\n\t\t\t\t<div className=\"alert alert-danger\" role=\"alert\">\n\t\t\t\t\t{error}\n\t\t\t\t</div>\n\t\t\t}\n\t\t\t<div className=\"mx-auto text-center\" style={{ overflowY: \"auto\", maxHeight: \"100vh\" }}>\n\t\t\t\t<div className=\"mw-1000 mx-auto my-3\">\n\t\t\t\t\t<input type=\"date\" value={dateInputDisplay}\n\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\tlet d = new Date(e.target.value)\n\t\t\t\t\t\t\tsetDateInputDisplay(formatDate2(d))\n\t\t\t\t\t\t\tchangeInputDateToFirstDayOfWeek(d)\n\t\t\t\t\t\t\tsetDate(d)\n\t\t\t\t\t\t}} />\n\n\n\n\n\n\t\t\t\t</div>\n\t\t\t\t<div className=\"mw-1000 mx-auto\" style={{ overflowX: \"scroll\", maxHeight: \"90vh\" }}>\n\t\t\t\t\t<table className=\"calendar\" style={isLoading ? { backgroundColor: \"#efefef\" } : {}}>\n\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th className=\"header-fixed\" style={{ maxWidth: 60, padding: 5 }}>\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<button className=\"float-start circle\" onClick={() => handleWeekChange(-1)}>\n\t\t\t\t\t\t\t\t\t\t\t<FaAngleLeft size={25} />\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t<button className=\"refresh\">\n\t\t\t\t\t\t\t\t\t\t\t<GrRefresh title=\"refresh\" color=\"white\" onClick={() => refresh()} />\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t<button className=\"float-end circle\" onClick={() => handleWeekChange(1)}>\n\t\t\t\t\t\t\t\t\t\t\t<FaAngleRight size={25} />\n\t\t\t\t\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tweek.map((day, index) => {\n\t\t\t\t\t\t\t\t\t\tlet [w, d, m, y] = formatDate(day).split(' ')\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<th className=\"head-fixed\" key={index}>\n\t\t\t\t\t\t\t\t\t\t\t\t<p>{w}</p>\n\t\t\t\t\t\t\t\t\t\t\t\t<p>{d} {m} {y}</p>\n\t\t\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t<tbody >\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th className=\"header-fixed\"></th>\n\t\t\t\t\t\t\t\t<td colSpan={7} style={{ height: \"20px\" }}></td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tdata.map((row, index) => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<tr key={index}>\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\trow.map((col, index) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tswitch (col.type) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'appointment':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlet appt = col.data\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td className=\"td-with-data\" rowSpan={Math.floor(appt.duration / 30)} key={index}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div id={appt.appointmentId} onClick={handleApptClicked}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p>{convertDateAndTimeRangeString(appt.appointmentStart, appt.duration)}</p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p>{appt.lessonName}</p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p>{appt.customerName}</p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p>{appt.duration} minutes</p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p>{appt.appointmentId}</p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'time':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th className=\"header-fixed\" key={index} style={{ verticalAlign: \"top\" }}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div style={{ minHeight: 25 }}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"time\" style={{ position: \"absolute\", top: -12, right: 5 }}>{col.data}</p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'spanned':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn null\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td key={index}></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</table>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t{\n\t\t\t\tselectedAppt &&\n\t\t\t\t<AppModal\n\t\t\t\t\tshow={selectedAppt ? true : false}\n\t\t\t\t\tonClose={() => setSelectedAppt('')}\n\t\t\t\t\ttitle={`Appointment: ${selectedAppt}`}>\n\t\t\t\t\t<Appointment\n\t\t\t\t\t\tid={selectedAppt}\n\t\t\t\t\t\tonUpdate={() => {\n\t\t\t\t\t\t\trefresh()\n\t\t\t\t\t\t\tsetSelectedAppt('')\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</AppModal>\n\t\t\t}\n\n\t\t</div>\n\t)\n}\n\nexport default Calendar\n","import React, { useState, useRef, useEffect } from 'react'\nimport { API_URL } from '../JS/variables'\n\nfunction ChangePassword() {\n\tconst mountedRef = useRef(true)\n\tconst [openPwdArea, setOpenPwdArea] = useState(false)\n\tconst [currentPwd, setCurrentPwd] = useState('')\n\tconst [newPwd, setNewPwd] = useState('')\n\tconst [newPwdConfirm, setNewPwdConfirm] = useState('')\n\tconst [success, setSuccess] = useState(false)\n\tconst [errors, setErrors] = useState([])\n\tconst [loading, setLoading] = useState(false)\n\n\n\tuseEffect(() => {\n\t\treturn () => {\n\t\t\tmountedRef.current = false\n\t\t}\n\t}, [])\n\n\tconst resetFormState = () => {\n\t\tsetCurrentPwd('')\n\t\tsetNewPwd('')\n\t\tsetNewPwdConfirm('')\n\t}\n\n\tconst resetAllState = () => {\n\t\tresetFormState()\n\t\tsetSuccess(false)\n\t\tsetErrors([])\n\t\tsetLoading(false)\n\t}\n\n\tconst handleChangePassword = (e) => {\n\t\te.preventDefault()\n\t\tconsole.log(`current: ${currentPwd}`)\n\t\tconsole.log(`pwd: ${newPwd}`)\n\t\tconsole.log(`confirm pwd: ${newPwdConfirm}`)\n\t\tconst requestOptions = {\n\t\t\tmethod: 'POST',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t'Accept': 'application/json',\n\t\t\t},\n\t\t\tbody: JSON.stringify({\n\t\t\t\tcurrentPwd: currentPwd,\n\t\t\t\tnewPwd: newPwd,\n\t\t\t\tnewPwdConfirm: newPwdConfirm\n\t\t\t}),\n\t\t\tcredentials: 'include'\n\t\t}\n\n\t\tsetSuccess(false)\n\t\tsetErrors([])\n\t\tsetLoading(true)\n\n\t\tfetch(`${API_URL}/api/auth/changepassword`, requestOptions)\n\t\t\t.then(res => res.json())\n\t\t\t.then(data => {\n\t\t\t\tif (!mountedRef.current) return null\n\t\t\t\tif (!data.success) {\n\t\t\t\t\tsetErrors(data.message)\n\t\t\t\t\tsetLoading(false)\n\t\t\t\t\tsetSuccess(false)\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tsetLoading(false)\n\t\t\t\tsetSuccess(true)\n\t\t\t\tsetErrors([])\n\t\t\t\tresetFormState()\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tif (!mountedRef.current) return null\n\t\t\t\tsetErrors([error.message])\n\t\t\t\tsetLoading(false)\n\t\t\t\tsetSuccess(false)\n\t\t\t})\n\t}\n\n\treturn (\n\t\t<div>\n\t\t\t<p><b>Password</b><span className=\"clickable\" onClick={() => {\n\t\t\t\tsetOpenPwdArea(!openPwdArea)\n\n\t\t\t\t// Reset state\n\n\t\t\t}}>change password</span></p>\n\t\t\t<div className=\"subform\" style={{ display: openPwdArea ? 'block' : 'none' }}>\n\t\t\t\t<form onSubmit={handleChangePassword}>\n\t\t\t\t\t<div className=\"mb-3\">\n\t\t\t\t\t\t<label htmlFor=\"currentPwd\" className=\"form-label\">CURRENT PASSWORD</label>\n\t\t\t\t\t\t<input className=\"form-control\" type=\"password\" name=\"currentPwd\" id=\"currentPwd\" value={currentPwd}\n\t\t\t\t\t\t\tonChange={(e) => setCurrentPwd(e.target.value)} required\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"mb-3\">\n\t\t\t\t\t\t<label htmlFor=\"newPwd\" className=\"form-label\">NEW PASSWORD</label>\n\t\t\t\t\t\t<input className=\"form-control\" type=\"password\" name=\"newPwd\" id=\"newPwd\" value={newPwd}\n\t\t\t\t\t\t\tonChange={(e) => setNewPwd(e.target.value)} required\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"mb-3\">\n\t\t\t\t\t\t<label htmlFor=\"newPwdConfirm\" className=\"form-label\">CONFIRM NEW PASSWORD</label>\n\t\t\t\t\t\t<input className=\"form-control\" type=\"password\" name=\"newPwdConfirm\" id=\"newPwdConfirm\" value={newPwdConfirm}\n\t\t\t\t\t\t\tonChange={(e) => setNewPwdConfirm(e.target.value)} required\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{\n\t\t\t\t\t\terrors.map((err, index) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<div key={index} className=\"alert alert-danger  show mt-3\" role=\"alert\">\n\t\t\t\t\t\t\t\t\t{err}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\n\t\t\t\t\t{\n\t\t\t\t\t\tsuccess &&\n\t\t\t\t\t\t<div className=\"alert alert-success  show mt-3\" role=\"alert\">\n\t\t\t\t\t\t\tSuccessfully changed password.\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\t\t\t\t\t{\n\t\t\t\t\t\tloading ?\n\t\t\t\t\t\t\t<div style={{ display: \"flex\", justifyContent: \"flex-end\" }}>\n\t\t\t\t\t\t\t\t<button className=\"btn btn-primary\" type=\"button\" disabled>\n\t\t\t\t\t\t\t\t\t<span className=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\n\t\t\t\t\t\t\t\t\t<span className=\"sr-only\"> DONE</span>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t<div style={{ display: \"flex\", justifyContent: \"flex-end\" }}>\n\t\t\t\t\t\t\t\t<button className=\"btn btn-primary\" type=\"submit\">DONE</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nexport default ChangePassword\n","import React, { useState, useEffect, useRef } from 'react'\nimport { API_URL } from '../JS/variables'\nimport ChangePassword from './ChangePassword'\n\nfunction AccountSettingPanel() {\n    const mountedRef = useRef(true)\n    const [email, setEmail] = useState('')\n    const [dummy, setDummy] = useState(0)\n\n    const [openEmailArea, setOpenEmailArea] = useState(false)\n    const [newEmail, setNewEmail] = useState('')\n    const [pwdForEmailChanging, setPwdForEmailChanging] = useState('')\n    const [eStep1Success, setEStep1Success] = useState('')\n    const [eStep1Error, setEStep1Error] = useState('')\n    const [eStep1Loading, setEStep1Loading] = useState(false)\n\n    const [code, setCode] = useState('')\n    const [eStep2Loading, setEStep2Loading] = useState(false)\n    const [eStep2Error, setEStep2Error] = useState('')\n\n    useEffect(() => {\n        return () => {\n            mountedRef.current = false\n        }\n    }, [])\n\n    useEffect(() => {\n        const requestOptions = {\n            method: 'GET',\n            headers: {\n                'Content-Type': 'application/json',\n                'Accept': 'application/json'\n            },\n            credentials: 'include'\n        }\n        fetch(`${API_URL}/api/auth/userinfo`, requestOptions)\n            .then(res => res.json())\n            .then(data => {\n                if (!mountedRef.current) return null\n                if (!data.success) {\n                    throw new Error(data.message)\n                }\n                setEmail(data.email)\n            })\n            .catch(error => {\n\n            })\n    }, [dummy])\n\n    const resetEState = () => {\n        setNewEmail('')\n        setPwdForEmailChanging('')\n        setEStep1Success('')\n        setEStep1Error('')\n        setEStep1Loading(false)\n\n        setCode('')\n        setEStep2Loading(false)\n        setEStep2Error('')\n    }\n\n    const handleRequestCode = (e) => {\n        e.preventDefault()\n        const requestOptions = {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n                'Accept': 'application/json',\n            },\n            body: JSON.stringify({\n                currentEmail: email,\n                newEmail: newEmail,\n                password: pwdForEmailChanging\n            }),\n            credentials: 'include'\n        }\n\n        setEStep1Loading(true)\n        setEStep1Error('')\n        setEStep1Success('')\n\n        fetch(`${API_URL}/api/auth/changeemail/code`, requestOptions)\n            .then(res => res.json())\n            .then(data => {\n                if (!mountedRef.current) return null\n                if (!data.success) {\n                    throw new Error(data.message)\n                }\n                setEStep1Loading(false)\n                setEStep1Success(data.message)\n            })\n            .catch(error => {\n                console.log(error)\n                if (!mountedRef.current) return null\n                setEStep1Loading(false)\n                setEStep1Error(error.message)\n                setEStep1Success('')\n            })\n    }\n\n    const handleChangeEmail = (e) => {\n        e.preventDefault()\n        const requestOptions = {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n                'Accept': 'application/json',\n            },\n            body: JSON.stringify({\n                code: code\n            }),\n            credentials: 'include'\n        }\n\n        setEStep2Loading(true)\n        setEStep2Error('')\n        fetch(`${API_URL}/api/auth/changeemail/change`, requestOptions)\n            .then(res => res.json())\n            .then(data => {\n                if (!mountedRef.current) return null\n                if (!data.success) {\n                    throw new Error(data.message)\n                }\n                resetEState()\n                setOpenEmailArea(false)\n                setDummy(dummy + 1)\n            })\n            .catch(error => {\n                console.log('in error')\n                if (!mountedRef.current) return null\n                console.log(error)\n                setEStep2Loading(false)\n                setEStep2Error(error.message)\n\n            })\n    }\n\n    return (\n        <div className=\"account-setting\">\n            <div className=\"mb-3 pb-3 bottom-border\">\n                <p><b>Email</b><span>{email}</span><span className=\"clickable\" onClick={() => {\n                    setOpenEmailArea(!openEmailArea)\n                    resetEState()\n                }}>change email</span></p>\n                {\n                    openEmailArea &&\n                    <div className=\"subform\">\n                        <form onSubmit={handleRequestCode}>\n                            <div className=\"mb-3\">\n                                <label htmlFor=\"email\" className=\"form-label\">NEW EMAIL</label>\n                                <input className=\"form-control\" type=\"email\" name=\"email\" id=\"email\"\n                                    onChange={(e) => setNewEmail(e.target.value)} required />\n                            </div>\n                            <div className=\"mb-3\">\n                                <label htmlFor=\"password\" className=\"form-label\">CURRENT PASSWORD</label>\n                                <input className=\"form-control\" type=\"password\" name=\"password\" id=\"password\"\n                                    onChange={(e) => setPwdForEmailChanging(e.target.value)} required\n                                />\n                            </div>\n\n                            {eStep1Error &&\n                                <div className=\"alert alert-danger  show mt-3\" role=\"alert\">\n                                    {eStep1Error}\n                                </div>\n                            }\n                            {\n                                eStep1Success &&\n                                <div className=\"alert alert-success  show mt-3\" role=\"alert\">\n                                    {eStep1Success}\n                                </div>\n                            }\n                            {\n                                eStep1Loading ?\n                                    <div style={{ display: \"flex\", justifyContent: \"flex-end\" }}>\n                                        <button className=\"btn btn-primary\" type=\"button\" disabled>\n                                            <span className=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\n                                            <span className=\"sr-only\">SEND PASSCODE TO NEW EMAIL.</span>\n                                        </button>\n                                    </div>\n                                    :\n                                    <div style={{ display: \"flex\", justifyContent: \"flex-end\" }}>\n                                    <button className=\"btn btn-primary\" type=\"submit\" >SEND PASSCODE TO NEW EMAIL</button>\n                                    </div>\n                            }\n                        </form>\n\n                        {/* {form to change email with code} */}\n                        {\n                            eStep1Success &&\n                            <div className=\"mt-3\">\n                                <form onSubmit={handleChangeEmail}>\n                                    <div className=\"mb-3\">\n                                        <label htmlFor=\"code\" className=\"form-label\">CODE</label>\n                                        <input className=\"form-control\" type=\"text\" name=\"code\" id=\"code\"\n                                            onChange={(e) => setCode(e.target.value)} required\n                                        />\n                                    </div>\n\n                                    {\n                                        eStep2Error &&\n                                        <div className=\"alert alert-danger  show mt-3\" role=\"alert\">\n                                            {eStep2Error}\n                                        </div>\n\n                                    }\n                                    {\n                                        eStep2Loading ?\n                                            <div style={{ display: \"flex\", justifyContent: \"flex-end\" }}>\n                                                <button className=\"btn btn-primary\" type=\"submit\" disabled>\n                                                    <span className=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\n                                                    <span className=\"sr-only\">DONE</span>\n                                                </button>\n                                            </div>\n                                            :\n                                            <div style={{ display: \"flex\", justifyContent: \"flex-end\" }}>\n                                                <button className=\"btn btn-primary\" type=\"submit\">DONE</button>\n                                            </div>\n                                    }\n                                </form>\n                            </div>\n                        }\n                    </div>\n                }\n            </div>\n\n            <ChangePassword />\n        </div>\n    )\n}\n\nexport default AccountSettingPanel\n","import React from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport Sidebar from './Sidebar';\nimport LessonPanel from './LessonPanel';\nimport Booking from './Booking';\nimport AvailabilityPanel from './AvailabilityPanel';\nimport Calendar from './Calendar';\nimport AccountSettingPanel from './AccountSettingPanel';\n\nfunction AdminPanel() {\n  return (\n    <div>\n      <div style={{ position: \"relative\" }}>\n        <Sidebar />\n        <div className=\"content-wrapper\">\n          <Switch>\n            <Route exact path=\"/\">\n              <Calendar />\n            </Route>\n            <Route path=\"/calendar\">\n              <Calendar />\n            </Route>\n            <Route path=\"/lesson\">\n              <LessonPanel />\n            </Route>\n            <Route path=\"/availability\">\n              <AvailabilityPanel />\n            </Route>\n            <Route path=\"/account\">\n              <AccountSettingPanel />\n            </Route>\n            <Route path=\"/booking\">\n              <Booking />\n            </Route>\n          </Switch>\n        </div>\n\n      </div>\n    </div>\n  )\n}\n\nexport default AdminPanel\n","import React, { useState, useEffect, useContext } from 'react'\nimport { AppContext } from './AppContext'\nimport Cookies from 'js-cookie'\nimport { API_URL } from '../JS/variables'\n\nfunction Login() {\n    const { setUser } = useContext(AppContext)\n    const [email, setEmail] = useState('')\n    const [password, setPassword] = useState('')\n    const [isLoading, setIsLoading] = useState(false)\n    const [error, setError] = useState('')\n\n    const [forgotPassword, setForgotPassword] = useState(false)\n    const [requestCodeLoading, setRequestCodeLoading] = useState(false)\n    const [requestCodeError, setRequestCodeError] = useState('')\n    const [codeRequestSuccess, setCodeRequestSuccess] = useState(false)\n\n    const [newPwd, setNewPwd] = useState('')\n    const [newPwdConfirm, setNewPwdConfirm] = useState('')\n    const [code, setCode] = useState('')\n    const [newPwdErrors, setNewPwdErrors] = useState([])\n    const [newPwdLoading, setNewPwdLoading] = useState(false)\n    const [newPwdSuccess, setNewPwdSuccess] = useState(false)\n\n\n    useEffect(() => {\n        // document.body.style = \"background: #f29a04\"\n\n        // return () => {\n        //     document.body.style = { background: \"#eee\" }  //whenever the component removes it will executes\n        // }\n    }, [])\n\n    const handleLogin = (e) => {\n        e.preventDefault()\n        const requestOptions = {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n                'Accept': 'application/json',\n            },\n            body: JSON.stringify({\n                email: email,\n                password: password\n            }),\n            credentials: 'include'\n        }\n        setIsLoading(true)\n        setError(false)\n\n        fetch(`${API_URL}/api/auth/login`, requestOptions)\n            .then((res) => {\n                console.log(res)\n\n                return res\n            })\n            .then(res => res.json())\n            .then(data => {\n                if (!data.success) {\n                    throw new Error(data.message)\n                }\n                Cookies.set('loggedIn', true)\n                setUser({ loggedIn: true })\n            })\n            .catch(error => {\n                console.log(error)\n                setIsLoading(false)\n                setError(error.message)\n            })\n    }\n\n    const handleRequestResetPwdCode = () => {\n        if (!email) {\n            setRequestCodeError('Require your login email.')\n            return\n        }\n\n        const requestOptions = {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n                'Accept': 'application/json',\n            },\n            body: JSON.stringify({\n                email: email\n            })\n        }\n\n        setRequestCodeError('')\n        setRequestCodeLoading(true)\n        setCodeRequestSuccess(false)\n\n        fetch(`${API_URL}/api/auth/requestresetpasswordcode`, requestOptions)\n            .then(res => res.json())\n            .then(data => {\n                if (!data.success) {\n                    throw new Error(data.message)\n                }\n                setRequestCodeError('')\n                setRequestCodeLoading(false)\n                setCodeRequestSuccess(true)\n            })\n            .catch(error => {\n                console.log(error)\n                setRequestCodeError(error.message)\n                setRequestCodeLoading(false)\n            })\n    }\n\n    const validatePassword = (password) => {\n        const pwdError = []\n        if (password.length < 8) {\n            pwdError.push('Password length must be atleast 8 characters.')\n        } else if (password.length > 20) {\n            pwdError.push('Password length must not exceed 20 characters.')\n        }\n\n        let re = /(?=.*[a-z])/\n        if (!re.test(password)) {\n            pwdError.push('Password must contain atleast 1 lowercase alphabetical character')\n        }\n\n        re = /(?=.*[A-Z])/\n        if (!re.test(password)) {\n            pwdError.push('Password must contain at least 1 uppercase alphabetical character')\n        }\n\n        re = /(?=.*[0-9])/\n        if (!re.test(password)) {\n            pwdError.push('Password must contain at least 1 numeric character')\n        }\n\n        return pwdError\n\n    }\n\n    const handleChangePassword = (e) => {\n        e.preventDefault()\n        const inputErrors = validatePassword(newPwd)\n        if (newPwd !== newPwdConfirm) {\n            inputErrors.push('Passwords do not match.')\n        }\n\n        if (inputErrors.length) {\n            setNewPwdErrors(inputErrors)\n            return\n        }\n\n        //fetch\n        const requestOptions = {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n                'Accept': 'application/json',\n            },\n            body: JSON.stringify({\n                pwd: newPwd,\n                pwdConfirm: newPwdConfirm,\n                code: code\n            })\n        }\n\n        setNewPwdErrors([])\n        setNewPwdLoading(true)\n        setNewPwdSuccess(false)\n\n        fetch(`${API_URL}/api/auth/resetpasswordbycode`, requestOptions)\n            .then(res => res.json())\n            .then(data => {\n                console.log(data)\n                if (!data.success) {\n                    if (Array.isArray(data.message)) {\n                        setNewPwdErrors(data.message)\n                    } else {\n                        setNewPwdErrors([data.message])\n                    }\n                    setNewPwdLoading(false)\n                    setNewPwdSuccess(false)\n                    return\n                }\n                setNewPwdErrors([])\n                setNewPwdLoading(false)\n                setNewPwdSuccess(true)\n            })\n            .catch(error => {\n                console.log(error)\n                setNewPwdErrors([error.message])\n                setNewPwdLoading(false)\n                setNewPwdSuccess(false)\n            })\n    }\n\n    return (\n        <div >\n            <div className=\"row\">\n                <div className=\"col-0 col-md-3 col-xl-4\"></div>\n                <div className=\"col-12 col-md-6 col-xl-4 mt-5 px-0\" style={{ border: \"1px solid rgb(224, 224, 224)\" }}>\n                    <div >\n                        <form\n                            onSubmit={handleLogin}>\n                            <div style={{ margin: 20 }}>\n                                <div className=\"mb-3\">\n                                    <label htmlFor=\"email\" className=\"form-label\">Email</label>\n                                    <input className=\"form-control\" type=\"email\" name=\"email\" id=\"email\"\n                                        onChange={(e) => setEmail(e.target.value)} required />\n                                </div>\n\n                                <div className=\"mb-3\">\n                                    <label htmlFor=\"password\" className=\"form-label\">Password</label>\n                                    <input className=\"form-control\" type=\"password\" name=\"password\" id=\"password\"\n                                        onChange={(e) => setPassword(e.target.value)} required\n                                    />\n                                </div>\n\n                                {error &&\n                                    <div className=\"alert alert-danger  show mt-3\" role=\"alert\">\n                                        {error}\n                                    </div>\n                                }\n                                {\n                                    isLoading ?\n                                        <button className=\"btn btn-primary\" type=\"submit\" style={{ width: \"100%\" }} disabled>\n                                            <span className=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\n                                            <span className=\"sr-only\">Loading...</span>\n                                        </button>\n                                        :\n                                        <button className=\"btn btn-primary\" type=\"submit\" style={{ width: \"100%\" }}>Login</button>\n                                }\n                            </div>\n                        </form>\n\n                        {/* {forgot password} */}\n                        <div className=\"px-3\" style={{ background: \"rgb(238, 238, 238)\" }}>\n                            <div className=\"mt-4\" style={{ display: \"flex\", justifyContent: \"flex-end\", alignItems: \"center\", paddingRight: 15, height: 50 }}>\n                                <p style={{ color: \"rgb(88, 88, 88)\", textDecoration: \"underline\" }} onClick={() => setForgotPassword(true)}>forgot password?</p>\n                            </div>\n                            {\n                                forgotPassword &&\n                                <div style={{ padding: 10 }}>\n                                    <p>Type email in the field above then submit. We will send reset password code to your email.</p>\n\n                                    {requestCodeError &&\n                                        <div className=\"alert alert-danger  show mt-3\" role=\"alert\">\n                                            {requestCodeError}\n                                        </div>\n                                    }\n                                    {\n                                        codeRequestSuccess &&\n                                        <div className=\"alert alert-success  show mt-3\" role=\"alert\">\n                                            Reset password code has been sent to your email. Use that code to reset password.\n                                        </div>\n                                    }\n                                    {\n                                        requestCodeLoading ?\n                                            <div style={{ display: \"flex\", justifyContent: \"flex-end\" }}>\n                                                <button className=\"btn btn-warning\" type=\"button\" disabled>\n                                                    <span className=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\n                                                    <span className=\"sr-only\"> send code</span>\n                                                </button>\n                                            </div>\n                                            :\n                                            <div style={{ display: \"flex\", justifyContent: \"flex-end\" }}>\n                                                <button className=\"btn btn-warning\" type=\"button\" onClick={() => handleRequestResetPwdCode()}>send code</button>\n                                            </div>\n                                    }\n\n                                    {/* {form to reset password} */}\n                                    {\n                                        codeRequestSuccess &&\n                                        <div>\n                                            <form onSubmit={handleChangePassword}>\n                                                <div className=\"mb-3\">\n                                                    <label htmlFor=\"pwd1\" className=\"form-label\">new password</label>\n                                                    <input className=\"form-control\" type=\"password\" name=\"pwd1\" id=\"pwd1\"\n                                                        onChange={(e) => setNewPwd(e.target.value)} required\n                                                    />\n                                                </div>\n                                                <div className=\"mb-3\">\n                                                    <label htmlFor=\"pwd2\" className=\"form-label\">confirm password</label>\n                                                    <input className=\"form-control\" type=\"password\" name=\"pwd2\" id=\"pwd2\"\n                                                        onChange={(e) => setNewPwdConfirm(e.target.value)} required\n                                                    />\n                                                </div>\n                                                <div className=\"mb-3\">\n                                                    <label htmlFor=\"code\" className=\"form-label\">code</label>\n                                                    <input className=\"form-control\" type=\"text\" name=\"code\" id=\"code\"\n                                                        onChange={(e) => setCode(e.target.value)} required\n                                                    />\n                                                </div>\n\n                                                {newPwdErrors &&\n                                                    newPwdErrors.map((err, index) => {\n                                                        return (\n                                                            <div key={index} className=\"alert alert-danger  show mt-3\" role=\"alert\">\n                                                                {err}\n                                                            </div>\n                                                        )\n                                                    })\n                                                }\n                                                {\n                                                    newPwdSuccess &&\n                                                    <div className=\"alert alert-success  show mt-3\" role=\"alert\">\n                                                        Successful. You can now login with the new password.\n                                                    </div>\n                                                }\n                                                {\n                                                    newPwdLoading ?\n                                                        <div style={{ display: \"flex\", justifyContent: \"flex-end\" }}>\n                                                            <button className=\"btn btn-primary\" type=\"button\" disabled>\n                                                                <span className=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\n                                                                <span className=\"sr-only\"> change password</span>\n                                                            </button>\n                                                        </div>\n                                                        :\n                                                        <div style={{ display: \"flex\", justifyContent: \"flex-end\" }}>\n                                                            <button className=\"btn btn-primary\" type=\"submit\">change password</button>\n                                                        </div>\n                                                }\n                                            </form>\n                                        </div>\n                                    }\n\n                                </div>\n                            }\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default Login","import React from 'react'\nimport { EatLoading } from 'react-loadingg'\n\nfunction Loading() {\n    return (\n        <div>\n            <EatLoading size=\"40\" />\n        </div>\n    )\n}\n\nexport default Loading\n","import './App.css';\nimport React, { useState, useEffect } from 'react'\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom'\nimport AdminPanel from './components/AdminPanel'\nimport Login from './components/Login'\nimport { AppContext } from './components/AppContext';\nimport Cookies from 'js-cookie'\nimport Loading from './components/Loading';\n//logged_in\n\n\nfunction App() {\n  const [user, setUser] = useState(null)\n  const [isLoading, setIsLoading] = useState(true)\n\n  useEffect(() => {\n    if (Cookies.get('loggedIn')) {\n      setUser({ loggedIn: true })\n    }\n\n    setIsLoading(false)\n  }, [])\n\n  return (\n    <AppContext.Provider value={{ user, setUser }} >\n      <div>\n        <Router basename={'admin'}>\n          {\n            isLoading ?\n              <Loading />\n\n              :\n\n              user ?\n                <AdminPanel />\n                :\n\n                <Login />\n\n          }\n        </Router>\n      </div>\n    </AppContext.Provider>\n  );\n}\n\n\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}