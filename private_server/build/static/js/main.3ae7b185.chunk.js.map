{"version":3,"sources":["components/AppContext.jsx","JS/variables.js","components/Sidebar.jsx","components/CreateLessonForm.jsx","components/Lesson.jsx","components/LessonPanel.jsx","components/DatePicker.jsx","components/TimeOffer.jsx","components/ClassOffer.jsx","components/Booking.jsx","components/CreateAvailabilityForm.jsx","components/Availability.jsx","components/AvailabilityPanel.jsx","components/AppModal.jsx","components/Appointment.jsx","components/Calendar.jsx","components/ChangePassword.jsx","components/AccountSettingPanel.jsx","components/AdminPanel.jsx","components/Login.jsx","components/Loading.jsx","App.js","index.js"],"names":["AppContext","createContext","API_URL","Sidebar","setUser","useContext","size","className","title","activeClassName","to","onClick","fetch","method","headers","credentials","then","res","json","data","success","Error","message","Cookies","remove","catch","error","console","log","alert","CreateLessonForm","props","useState","lessonName","setLessonName","description","setDescription","price30m","setPrice30m","price60m","setPrice60m","loading","setLoading","setError","mountedRef","useRef","useEffect","current","onSubmit","e","preventDefault","requestOptions","body","JSON","stringify","lesson","handleClose","signalAddSuccess","err","htmlFor","length","onChange","target","value","type","id","style","height","Math","min","scrollHeight","rows","maxLength","wrap","test","role","width","margin","disabled","Lesson","lessonId","removeLesson","isLoading","setIsLoading","fontSize","LessonPanel","lessons","setLessons","showForm","setShowForm","addSuccess","setAddSuccess","dummy","setDummy","filter","lesson_id","setTimeout","textAlign","color","map","lesson_name","price_30m","price_60m","MONTH","month","WEEK","DatePicker","date","setDate","setMonth","year","setYear","selectedMonth","setSelectedMonth","selectedYear","setSelectedYear","dates","setDates","handleDateChange","onDateChange","newDates","today","Date","dayOfMonthAtStart","getDay","numObj","getDate","currentDate","i","theDate","obj","upComming","checkFutureDay","checkSameDay","push","date1","date2","getMonth","getFullYear","thresholdDate","monthHandle","parseInt","onSelectDateHandle","display","borderBottom","monthObj","aDay","index","aDate","upcommingCSS","currentCSS","TimeOffer","fetchErrors","setFetchErrors","times","setTimes","selectedTime","setSelectedTime","fullDate","day","toUTCString","duration","sort","a","b","Array","isArray","flexWrap","justifyContent","time","HHMMAPMstr","minutes","hours","floor","suffix","minutePart","substring","minutesToHhMmAPmString","getHours","getMinutes","getTotalMinutesFromDate","onTimeSelected","ClassOffer","selectedLessonId","setSelectedLessonId","selectLesson","initDate","initMonth","initYear","INIT_FULLDATE","Booking","name","setName","email","setEmail","phone","setPhone","note","setNote","setDuration","setFullDate","setLesson","fullTime","setFullTime","submitErrors","setSubmitErrors","bookingSuccess","setBookingSuccess","handleSubmit","errors","d","maxWidth","padding","defaultValue","required","colSpan","verticalAlign","CrateAvailabilityForm","isChecked","selectedDays","dayError","setDayError","fromH","setFromH","fromM","setFromM","fromAP","setFromAP","toH","setToH","toM","setToM","toAP","setToAP","getSelectedDaysValue","val","forEach","timeFrom","timeTo","days","status","foundUnchecked","checked","onSelectedDayChange","marginTop","Availability","availability","removeAvailability","start_time","start_minute","end_time","end_minute","week","minWidth","getAvailDisplay","availability_id","AvailabilityPanel","availabilities","setAvailabilities","compare","CreateAvailabilityForm","avail","AppModal","show","onClose","children","closeOnEscapeKeyDown","keyCode","document","addEventListener","removeEventListener","stopPropagation","Appointment","onUpdate","appointment","setAppointment","showCancelForm","setShowCancelForm","cancelText","setCancelText","cancelLoading","setCancelLoading","cancelError","setCancelError","m","y","start_time_string","end_time_string","convertDateAndTimeRangeString","appointment_start","appointment_id","customer_name","customer_email","customer_phone","fee","placeholder","Calendar","dateInputDisplay","setDateInputDisplay","setWeek","setData","selectedAppt","setSelectedAppt","changeInputDateToFirstDayOfWeek","setHours","setMinutes","setSeconds","formatDate2","aWeek","beginDate","fetchWeekAppointment","Promise","resolve","reject","appointments","appt","appointmentId","customerName","appointmentStart","minuteStart","dateToMinuteStart","indexToUse","timeCol","splice","preparingData","startDate","endDate","colIndex","rowIndex","numSpan","processWeekAppointment","refresh","handleWeekChange","numWeek","dDisplay","handleApptClicked","currentTarget","join","overflowY","maxHeight","overflowX","backgroundColor","datevalue","formatDate","split","w","row","col","rowSpan","minHeight","position","top","right","ChangePassword","openPwdArea","setOpenPwdArea","currentPwd","setCurrentPwd","newPwd","setNewPwd","newPwdConfirm","setNewPwdConfirm","setSuccess","setErrors","resetFormState","AccountSettingPanel","openEmailArea","setOpenEmailArea","newEmail","setNewEmail","pwdForEmailChanging","setPwdForEmailChanging","eStep1Success","setEStep1Success","eStep1Error","setEStep1Error","eStep1Loading","setEStep1Loading","code","setCode","eStep2Loading","setEStep2Loading","eStep2Error","setEStep2Error","resetEState","currentEmail","password","AdminPanel","exact","path","Login","setPassword","forgotPassword","setForgotPassword","requestCodeLoading","setRequestCodeLoading","requestCodeError","setRequestCodeError","codeRequestSuccess","setCodeRequestSuccess","newPwdErrors","setNewPwdErrors","newPwdLoading","setNewPwdLoading","newPwdSuccess","setNewPwdSuccess","border","set","loggedIn","background","alignItems","paddingRight","textDecoration","handleRequestResetPwdCode","inputErrors","pwdError","re","validatePassword","pwd","pwdConfirm","Loading","App","user","get","Provider","basename","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.3ae7b185.chunk.js","sourcesContent":["import {createContext} from 'react'\r\n\r\nexport const AppContext = createContext({})","export const API_URL = ''\r\n\r\n// export const API_URL = 'http://localhost:3001'\r\n\r\n// export const API_URL = 'http://13.239.16.220:3001'","import React, {useContext} from 'react'\r\nimport { NavLink } from 'react-router-dom'\r\nimport { GiSpellBook, GiTeacher, GiBookmark } from \"react-icons/gi\";\r\nimport {MdAccountBox} from \"react-icons/md\"\r\nimport {GoCalendar} from \"react-icons/go\"\r\nimport { RiLogoutBoxRLine } from 'react-icons/ri'\r\nimport Cookies from 'js-cookie'\r\nimport {AppContext} from './AppContext'\r\nimport { API_URL } from '../JS/variables';\r\n\r\nfunction Sidebar() {\r\n    const {setUser} = useContext(AppContext)\r\n    const size = 25\r\n\r\n    const logout = () => {\r\n        const requestOptions = {\r\n\t\t\tmethod: 'POST',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t'Accept': 'application/json'\r\n\t\t\t},\r\n            credentials: 'include'\r\n\t\t}\r\n        fetch(`${API_URL}/api/auth/logout`, requestOptions)\r\n            .then(res => res.json())\r\n            .then(data => {\r\n                if(!data.success){\r\n                    throw new Error(data.message)\r\n                }\r\n                Cookies.remove('loggedIn')\r\n                setUser(null)\r\n            })\r\n            .catch(error => {\r\n                console.log(error.message)\r\n                alert('Something went wrong. Cannot logout properly.')\r\n            })\r\n    }\r\n    return (\r\n        <div className=\"sidebar-wrapper\" >\r\n            <div className=\"sidebar-upper-wrapper\">\r\n                <ul>\r\n                    <li data-toggle=\"tooltip\" data-placement=\"right\" title=\"calendar\">\r\n                        <NavLink\r\n                            activeClassName=\"sidebar-link--active\"\r\n                            className=\"sidebar-link\"\r\n                            to=\"/calendar\">\r\n                            <GoCalendar size={size} />\r\n                            <p>Calendar</p>\r\n                        </NavLink>\r\n                    </li>\r\n                    <li data-toggle=\"tooltip\" data-placement=\"right\" title=\"manage guitar lessons\">\r\n                        <NavLink\r\n                            activeClassName=\"sidebar-link--active\"\r\n                            className=\"sidebar-link\"\r\n                            to=\"/lesson\">\r\n                            <GiSpellBook size={size} />\r\n                            <p>Lesson</p>\r\n\r\n                        </NavLink>\r\n                    </li>\r\n                    <li data-toggle=\"tooltip\" data-placement=\"right\" title=\"manage my availability\">\r\n                        <NavLink\r\n                            activeClassName=\"sidebar-link--active\"\r\n                            className=\"sidebar-link\"\r\n                            to=\"/availability\">\r\n                            <GiTeacher size={size} />\r\n                            <p>Availability</p>\r\n\r\n                        </NavLink>\r\n                    </li>\r\n                    <li data-toggle=\"tooltip\" data-placement=\"right\" title=\"book an appointment\">\r\n                        <NavLink\r\n                            activeClassName=\"sidebar-link--active\"\r\n                            className=\"sidebar-link\"\r\n                            to=\"/booking\">\r\n                            <GiBookmark size={size} />\r\n                            <p>Book appointment</p>\r\n\r\n                        </NavLink>\r\n                    </li>\r\n                    <li data-toggle=\"tooltip\" data-placement=\"right\" title=\"Account\">\r\n                        <NavLink\r\n                            activeClassName=\"sidebar-link--active\"\r\n                            className=\"sidebar-link\"\r\n                            to=\"/account\">\r\n                            <MdAccountBox size={size} />\r\n                            <p>Account</p>\r\n                        </NavLink>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n\r\n            <div className=\"sidebar-bottom-wrapper\">\r\n                <ul>\r\n                    <li data-toggle=\"tooltip\" data-placement=\"right\" title=\"log out\">\r\n                        <NavLink\r\n                            className=\"sidebar-link\"\r\n                            to=\"/\" onClick={() => {\r\n                                logout()\r\n                            }}>\r\n                            <RiLogoutBoxRLine size={size} />\r\n                            <p>Logout</p>\r\n\r\n                        </NavLink>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Sidebar\r\n","import React, { useState, useEffect, useRef } from 'react'\r\nimport { API_URL } from '../JS/variables'\r\nconst MAX_DESCRIPTION_LENGTH = 500\r\nconst MAX_LESSON_NAME_LENGTH = 70\r\n\r\nfunction CreateLessonForm(props) {\r\n\tconst [lessonName, setLessonName] = useState('')\r\n\tconst [description, setDescription] = useState('')\r\n\tconst [price30m, setPrice30m] = useState('')\r\n\tconst [price60m, setPrice60m] = useState('')\r\n\tconst [loading, setLoading] = useState(false)\r\n\tconst [error, setError] = useState('')\r\n\tconst mountedRef = useRef(true)\r\n\r\n\tconst onLessonNameChange = (e) => {\r\n\t\tlet lessonName = e.target.value\r\n\t\tif (lessonName.length <= MAX_LESSON_NAME_LENGTH) {\r\n\t\t\tsetLessonName(e.target.value)\r\n\t\t} else {\r\n\t\t\te.target.value = lessonName\r\n\t\t}\r\n\t}\r\n\r\n\tconst onDescriptionChange = (e) => {\r\n\t\t// auto adjust textarea height\r\n\t\te.target.style.height = \"\";\r\n\t\te.target.style.height = Math.min(e.target.scrollHeight, 300) + \"px\";\r\n\r\n\t\tlet value = e.target.value\r\n\r\n\t\tif (value.length <= MAX_DESCRIPTION_LENGTH) {\r\n\t\t\tsetDescription(value)\r\n\t\t}\r\n\r\n\t\tif (value.length > MAX_DESCRIPTION_LENGTH) {\r\n\t\t\te.target.value = description\r\n\t\t}\r\n\t}\r\n\r\n\tconst onPrice30mChange = (e) => {\r\n\t\tlet value = e.target.value\r\n\t\tlet isMoney = /^\\d+\\.{0,1}\\d{0,2}$/.test(value)\r\n\t\tif (isMoney || value === '') {\r\n\t\t\tsetPrice30m(value)\r\n\t\t} else {\r\n\t\t\te.target.value = ''\r\n\t\t}\r\n\t}\r\n\r\n\tconst onPrice60mChange = (e) => {\r\n\t\tlet value = e.target.value\r\n\t\tlet isMoney = /^\\d+\\.{0,1}\\d{0,2}$/.test(value)\r\n\t\tif (isMoney || value === '') {\r\n\t\t\tsetPrice60m(value)\r\n\t\t} else {\r\n\t\t\te.target.value = ''\r\n\t\t}\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\treturn () => {\r\n\t\t\tmountedRef.current = false\r\n\t\t}\r\n\t}, [])\r\n\r\n\tconst handleAddNewLesson = (e) => {\r\n\t\te.preventDefault()\r\n\t\tif(!mountedRef.current) return null\r\n\t\tsetLoading(true)\r\n\t\tsetError('')\r\n\r\n\t\tconst requestOptions = {\r\n\t\t\tmethod: 'POST',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t'Accept': 'application/json'\r\n\t\t\t},\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\tlesson: lessonName,\r\n\t\t\t\tdescription: description,\r\n\t\t\t\tprice30m: price30m,\r\n\t\t\t\tprice60m: price60m\r\n\t\t\t}),\r\n\t\t\tcredentials: 'include'\r\n\t\t}\r\n\r\n\t\tfetch(`${API_URL}/api/lesson/add`, requestOptions)\r\n\t\t\t.then(res => res.json())\r\n\t\t\t.then((data) => {\r\n\t\t\t\tif(!mountedRef.current) return null\r\n\t\t\t\tif(!data.success){\r\n\t\t\t\t\tthrow new Error(data.message)\r\n\t\t\t\t}\r\n\t\t\t\tprops.handleClose()\r\n\t\t\t\tprops.signalAddSuccess()\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\tif(!mountedRef.current) return null\r\n\t\t\t\tconsole.log(err)\r\n\t\t\t\tsetError(err.message)\r\n\t\t\t\tsetLoading(false)\r\n\t\t\t})\r\n\t}\r\n\r\n\tconsole.log('Create lesson form re render')\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className=\"mt-3 mb-3\">\r\n\t\t\t\t<form onSubmit={handleAddNewLesson} className=\"form-default-box mw-600\">\r\n\t\t\t\t\t<div className=\"mb-3\">\r\n\t\t\t\t\t\t<label htmlFor=\"lessonName\" className=\"form-label\"><b>Lesson name</b> ({MAX_LESSON_NAME_LENGTH - lessonName.length} chars left)</label>\r\n\t\t\t\t\t\t<input onChange={onLessonNameChange} value={lessonName} type=\"text\" className=\"form-control\" id=\"lessonName\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"mb-3\">\r\n\t\t\t\t\t\t<label htmlFor=\"description\" className=\"form-label\"><b>Description</b> ({MAX_DESCRIPTION_LENGTH - description.length} chars left)</label>\r\n\t\t\t\t\t\t<textarea onChange={onDescriptionChange} className=\"form-control\" id=\"description\" rows={5} maxLength={300} wrap=\"soft\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"mb-3\">\r\n\t\t\t\t\t\t<b>Price rates</b>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"row g-2 mb-2\">\r\n\t\t\t\t\t\t<div className=\"col-auto\"><label htmlFor=\"price-30m\" className=\"form-label\">30 minutes</label></div>\r\n\t\t\t\t\t\t<div className=\"col-3\">\r\n\t\t\t\t\t\t\t<input type=\"text\"\r\n\t\t\t\t\t\t\t\tonChange={onPrice30mChange}\r\n\t\t\t\t\t\t\t\tvalue={price30m}\r\n\t\t\t\t\t\t\t\tmaxLength=\"10\"\r\n\t\t\t\t\t\t\t\tclassName=\"form-control\" id=\"price-30m\" />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"col-auto\">$</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"row g-2 mb-2 \">\r\n\t\t\t\t\t\t<div className=\"col-auto \"><label htmlFor=\"price-60m\" className=\"form-label align-middle\">60 minutes</label></div>\r\n\t\t\t\t\t\t<div className=\"col-3\">\r\n\t\t\t\t\t\t\t<input type=\"text\"\r\n\t\t\t\t\t\t\t\tonChange={onPrice60mChange}\r\n\t\t\t\t\t\t\t\tvalue={price60m}\r\n\t\t\t\t\t\t\t\tmaxLength=\"10\"\r\n\t\t\t\t\t\t\t\tclassName=\"form-control\" id=\"price-60m\" />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"col-auto\">$</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\terror\r\n\t\t\t\t\t\t&&\r\n\t\t\t\t\t\t<div className=\"alert alert-danger\" role=\"alert\">\r\n\t\t\t\t\t\t\t{error}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t{/* {buttons panel} */}\r\n\t\t\t\t\t<div style={{ width: \"100%\", height: 30, margin: \"25px auto 10px auto\"}}>\r\n\t\t\t\t\t\t<button type=\"button\" className=\"btn btn-danger d-inline-block float-start\"\r\n\t\t\t\t\t\t\tonClick={() => props.handleClose()}>Cancel</button>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tloading ?\r\n\t\t\t\t\t\t\t\t<button className=\"btn btn-primary float-end\" type=\"button\" disabled>\r\n\t\t\t\t\t\t\t\t\t<span className=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\r\n\t\t\t\t\t\t\t\t\t<span className=\"sr-only\">Loading...</span>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t\t<button type=\"submit\" className=\"btn btn-primary d-inline-block float-end\">Add</button>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default CreateLessonForm\r\n","import React, { useState, useEffect, useRef } from 'react'\r\nimport { TiTrash } from 'react-icons/ti'\r\nimport { API_URL } from '../JS/variables'\r\n\r\nfunction Lesson({ lessonId, lessonName, description, price30m, price60m, removeLesson }) {\r\n\tconst [error, setError] = useState('')\r\n\tconst [isLoading, setIsLoading] = useState(false)\r\n\tconst mountedRef = useRef(true)\r\n\r\n\tuseEffect(() => {\r\n\t\treturn () => {\r\n\t\t\tmountedRef.current = false\r\n\t\t}\r\n\t}, [])\r\n\t\r\n\tconst deleteLesson = () => {\r\n\t\tsetIsLoading(true)\r\n\t\tsetError('')\r\n\t\tconst requestionOptions =\r\n\t\t{\r\n\t\t\tmethod: 'DELETE',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t'Accept': 'application/json'\r\n\t\t\t},\r\n\t\t\tcredentials: 'include'\r\n\t\t}\r\n\r\n\t\tfetch(`${API_URL}/api/lesson/delete/${lessonId}`, requestionOptions)\r\n\t\t\t.then(res => res.json())\r\n\t\t\t.then(data => {\r\n\t\t\t\tif (!data.success) {\r\n\t\t\t\t\tthrow new Error(data.message)\r\n\t\t\t\t}\r\n\t\t\t\tif (!mountedRef.current) return null\r\n\t\t\t\tsetIsLoading(false)\r\n\t\t\t\tsetError('')\r\n\t\t\t\tremoveLesson(lessonId)\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (!mountedRef.current) return null\r\n\t\t\t\tsetIsLoading(false)\r\n\t\t\t\tsetError(error.message)\r\n\t\t\t})\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"mb-2 pd-4\">\r\n\t\t\t<div className=\"default-wrapper mw-600\">\r\n\t\t\t\t<h1 className=\"web-main-color\">{lessonName}</h1>\r\n\t\t\t\t<div className=\"ms-3 mb-2\">\r\n\t\t\t\t\t<p className=\"text-secondary\">{description}</p>\r\n\t\t\t\t\t<p className=\"mb-1 text-secondary\"><b>Fee rates</b></p>\r\n\t\t\t\t\t<p className=\"mb-1 text-secondary\">30 minutes: <b>${price30m}</b></p>\r\n\t\t\t\t\t<p className=\"mb-1 text-secondary\">60 minutes: <b>${price60m}</b></p>\r\n\t\t\t\t</div>\r\n\t\t\t\t{/* <button type=\"button\" title=\"edit\" className=\"btn btn-secondary py-1\">\r\n                        <TiEdit size={20} />\r\n                        <span className=\"align-middle\" style={{ fontSize: 15 }}>EDIT</span>\r\n                    </button> */}\r\n\t\t\t\t{error &&\r\n\t\t\t\t\t<div className=\"alert alert-danger\" role=\"alert\">\r\n\t\t\t\t\t\t{error}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\r\n\t\t\t\t<div style={{ height: 30 }}>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tisLoading ?\r\n\t\t\t\t\t\t\t<button className=\"btn btn-danger py-1 float-end\" type=\"button\" disabled>\r\n\t\t\t\t\t\t\t\t<span className=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\r\n\t\t\t\t\t\t\t\t<span className=\"sr-only\">Deleting...</span>\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t<button onClick={deleteLesson} type=\"button\" title=\"delete\" className=\"btn btn-danger py-1 float-end\" >\r\n\t\t\t\t\t\t\t\t<TiTrash size={20} />\r\n\t\t\t\t\t\t\t\t<span className=\"align-middle button-text\" style={{ fontSize: 12 }}>DELETE</span>\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Lesson\r\n","import React, { useState, useEffect, useRef } from 'react'\r\nimport CreateLessonForm from './CreateLessonForm'\r\nimport Lesson from './Lesson'\r\nimport { API_URL } from '../JS/variables'\r\n\r\n\r\nfunction LessonPanel() {\r\n\tconst [lessons, setLessons] = useState([])\r\n\tconst [showForm, setShowForm] = useState(false)\r\n\tconst [addSuccess, setAddSuccess] = useState(false)\r\n\tconst [dummy, setDummy] = useState(0)\r\n\tconst [isLoading, setIsLoading] = useState(false)\r\n\tconst [error, setError] = useState('')\r\n\r\n\tconst mountedRef = useRef(true)\r\n\r\n\tconst signalAddSuccess = () => {\r\n\t\tsetAddSuccess(true)\r\n\t\tsetDummy(dummy + 1)\r\n\t\tsetTimeout(() => {\r\n\t\t\tsetAddSuccess(false)\r\n\t\t}, 2000)\r\n\t}\r\n\r\n\tconst removeLesson = (lessonId) => {\r\n\t\tsetLessons(lessons.filter(lesson => lesson.lesson_id != lessonId))\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\treturn () => {\r\n\t\t\tmountedRef.current = false\r\n\t\t}\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!mountedRef.current) return null\r\n\r\n\t\tsetIsLoading(true)\r\n\t\tsetError('')\r\n\r\n\t\tconst requestOptions = {\r\n\t\t\tmethod: 'GET',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t'Accept': 'application/json'\r\n\t\t\t},\r\n\t\t\tcredentials: 'include'\r\n\t\t}\r\n\t\tfetch(`${API_URL}/api/lesson/active`, requestOptions)\r\n\t\t\t.then(res => res.json())\r\n\t\t\t.then(data => {\r\n\t\t\t\tif (!data.success) {\r\n\t\t\t\t\tthrow new Error(data.message)\r\n\t\t\t\t}\r\n\t\t\t\tif (!data.lessons.length) {\r\n\t\t\t\t\tthrow new Error('There is no lesson. Please consider creating one.')\r\n\t\t\t\t}\r\n\t\t\t\tif (!mountedRef.current) return null\r\n\t\t\t\tsetLessons(data.lessons)\r\n\t\t\t\tsetIsLoading(false)\r\n\t\t\t\tsetError('')\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (!mountedRef.current) return null\r\n\t\t\t\tconsole.log(error.message)\r\n\t\t\t\tsetIsLoading(false)\r\n\t\t\t\tsetError(error.message)\r\n\t\t\t})\r\n\t}, [dummy])\r\n\r\n\treturn (\r\n\t\t<div className=\"pt-3\">\r\n\r\n\t\t\t{/* {msg when successfully add new lesson} */}\r\n\t\t\t{\r\n\t\t\t\taddSuccess &&\r\n\t\t\t\t<div className=\"alert alert-success\" role=\"alert\">\r\n\t\t\t\t\tSuccessfully added.\r\n\t\t\t\t</div>\r\n\t\t\t}\r\n\r\n\t\t\t{/* {show form when the button clicked} */}\r\n\t\t\t{\r\n\t\t\t\tshowForm ?\r\n\t\t\t\t\t<CreateLessonForm handleClose={() => setShowForm(false)} signalAddSuccess={signalAddSuccess} />\r\n\t\t\t\t\t:\r\n\t\t\t\t\t<div style={{ textAlign: \"center\" }}>\r\n\t\t\t\t\t\t<button className=\"btn btn-primary\" onClick={() => setShowForm(true)}>\r\n\t\t\t\t\t\t\tAdd Lesson\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t}\r\n\r\n\t\t\t<div className=\"pt-3\" style={{ textAlign: \"center\" }}>\r\n\r\n\t\t\t\t{/* {LOADING && ERROR} */}\r\n\t\t\t\t{\r\n\t\t\t\t\tisLoading ?\r\n\t\t\t\t\t\t<div className=\"text-center\">\r\n\t\t\t\t\t\t\t<div className=\"spinner-border\" role=\"status\" style={{ color: \"orange\" }}>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t: (error &&\r\n\t\t\t\t\t\t\t<div className=\"alert alert-danger\" role=\"alert\">\r\n\t\t\t\t\t\t\t\t{error}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t{/* {ALL LESSONS} */}\r\n\t\t\t\t{\r\n\t\t\t\t\tlessons.map(lesson => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<Lesson\r\n\t\t\t\t\t\t\t\tkey={lesson.lesson_id}\r\n\t\t\t\t\t\t\t\tremoveLesson={removeLesson}\r\n\t\t\t\t\t\t\t\tlessonId={lesson.lesson_id}\r\n\t\t\t\t\t\t\t\tlessonName={lesson.lesson_name}\r\n\t\t\t\t\t\t\t\tdescription={lesson.description}\r\n\t\t\t\t\t\t\t\tprice30m={lesson.price_30m}\r\n\t\t\t\t\t\t\t\tprice60m={lesson.price_60m}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)\r\n\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default LessonPanel\r\n","import React, { useState, useEffect } from 'react'\r\nimport { FaAngleLeft, FaAngleRight } from 'react-icons/fa'\r\n\r\nconst MONTH = [\r\n    { value: 0, month: 'JAN' },\r\n    { value: 1, month: 'FEB' },\r\n    { value: 2, month: 'MAR' },\r\n    { value: 3, month: 'APR' },\r\n    { value: 4, month: 'MAY' },\r\n    { value: 5, month: 'JUN' },\r\n    { value: 6, month: 'JUL' },\r\n    { value: 7, month: 'AUG' },\r\n    { value: 8, month: 'SEP' },\r\n    { value: 9, month: 'OCT' },\r\n    { value: 10, month: 'NOV' },\r\n    { value: 11, month: 'DEC' },\r\n]\r\n\r\nconst WEEK = [\r\n    'Sun', 'Mon', 'Tu', 'Wed', 'Th', 'Fri', 'Sat'\r\n]\r\n\r\nfunction DatePicker(props) {\r\n    const [date, setDate] = useState(props.date)\r\n    const [month, setMonth] = useState(props.month)\r\n    const [year, setYear] = useState(props.year)\r\n    const [selectedMonth, setSelectedMonth] = useState(props.month)\r\n    const [selectedYear, setSelectedYear] = useState(props.year)\r\n    const [dates, setDates] = useState([])\r\n    const handleDateChange = props.onDateChange\r\n\r\n    useEffect(() => {\r\n        let newDates = []\r\n        let today = new Date()\r\n        let startDayOfMonth = new Date(year, month, 1)\r\n        let dayOfMonthAtStart = startDayOfMonth.getDay()\r\n        let endDayOfMonth = new Date(year, month + 1, 0)\r\n        let numDayOfMonth = endDayOfMonth.getDate()\r\n\r\n        let numObj = numDayOfMonth + dayOfMonthAtStart\r\n\r\n        let currentDate = 1 - dayOfMonthAtStart\r\n        for (let i = 0; i < numObj; i++) {\r\n            let theDate = new Date(year, month, currentDate)\r\n            let upComming = currentDate > 0 && (checkFutureDay(theDate, today) || checkSameDay(theDate, today))\r\n\r\n            let obj = {\r\n                id: currentDate,\r\n                upComming: upComming\r\n            }\r\n            newDates.push(obj)\r\n            currentDate++\r\n        }\r\n        setDates(newDates)\r\n    }, [month, year])\r\n\r\n    const checkSameDay = (date1, date2) => {\r\n        return date1.getDate() == date2.getDate() && date1.getMonth() == date2.getMonth() && date1.getFullYear() == date2.getFullYear()\r\n    }\r\n\r\n    const checkFutureDay = (date, thresholdDate) => {\r\n        return date > thresholdDate\r\n    }\r\n\r\n    const incrementYear = () => {\r\n        setYear(year + 1)\r\n    }\r\n\r\n    const decrementYear = () => {\r\n        if (year > 1970) {\r\n            setYear(year - 1)\r\n        }\r\n    }\r\n\r\n    const monthHandle = (e) => {\r\n        setMonth(parseInt(e.target.id))\r\n    }\r\n\r\n    const onSelectDateHandle = (e) => {\r\n        setSelectedMonth(month)\r\n        setSelectedYear(year)\r\n        setDate(parseInt(e.target.id))\r\n        handleDateChange(parseInt(e.target.id), month, year)\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"calendar-picker\">\r\n                <div style={{ display: \"flex\", margin: \"10px 3px\", borderBottom: \"2px solid #f2f2f2\" }}>\r\n                    <h3 style={{ margin: \"auto\", fontSize: 25 }}>\r\n                        {`${date} ${MONTH[selectedMonth].month} ${selectedYear}`}\r\n                    </h3>\r\n                </div>\r\n\r\n                <div style={{textAlign: \"center\"}}>\r\n                    <button onClick={decrementYear} className=\"float-start circle\" >\r\n                        <FaAngleLeft size={25} />\r\n                    </button>\r\n                    <span style={{ fontSize: 20 }}>{year}</span>\r\n                    <button onClick={incrementYear} className=\"float-end circle\">\r\n                        <FaAngleRight size={25} />\r\n                    </button>\r\n                </div>\r\n                <div className=\"month-picker py-2\">\r\n                    <div className=\"month-grid\">\r\n                        {\r\n                            MONTH.map(monthObj => {\r\n                                return (\r\n                                    <div key={monthObj.value} className={`${parseInt(monthObj.value) == parseInt(month) ? 'month-item-active' : ''} month-item`}>\r\n                                        <button id={monthObj.value} onClick={monthHandle}>\r\n                                            {monthObj.month}\r\n                                        </button>\r\n                                    </div>\r\n                                )\r\n                            })\r\n                        }\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"date-grid py-2\">\r\n                    {\r\n                        WEEK.map((aDay, index) => {\r\n                            return (\r\n                                <div className=\"date-item date-item-header\" key={index} >\r\n                                    <div style={{ margin: \"auto\" }}>\r\n                                        {aDay}\r\n                                    </div>\r\n                                </div>\r\n                            )\r\n                        })\r\n                    }\r\n                    {\r\n                        dates.map(aDate => {\r\n                            let upcommingCSS = aDate.upComming ? 'date-item-upcomming' : ''\r\n                            let currentCSS = aDate.id == date && month == selectedMonth && year == selectedYear ? 'date-item-active' : ''\r\n\r\n                            return (\r\n                                <div className={`date-item ${upcommingCSS} ${currentCSS}`} key={aDate.id}>\r\n                                    <button disabled={!aDate.upComming ? true : false} onClick={onSelectDateHandle} id={aDate.id}>\r\n                                        <div id={aDate.id}>\r\n                                            <p id={aDate.id}>{aDate.id > 0 && aDate.id}</p>\r\n                                        </div>\r\n                                    </button>\r\n                                </div>\r\n                            )\r\n                        })\r\n                    }\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default DatePicker","import React, { useState, useEffect, useRef } from 'react'\r\nimport { API_URL } from '../JS/variables'\r\n\r\nfunction TimeOffer(props) {\r\n\tconst [fetchErrors, setFetchErrors] = useState([])\r\n\tconst [times, setTimes] = useState([])\r\n\tconst [selectedTime, setSelectedTime] = useState('')\r\n\tconst [isLoading, setIsLoading] = useState(false)\r\n\tconst mountedRef = useRef(true)\r\n\r\n\t// UTC TIME\r\n\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/UTC\r\n\r\n\tuseEffect(() => {\r\n\t\treturn () => {\r\n\t\t\tmountedRef.current = false\r\n\t\t}\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\tsetIsLoading(true)\r\n\r\n\t\tconst requestOptions = {\r\n\t\t\tmethod: 'GET',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t'Accept': 'application/json'\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet date = new Date(props.fullDate)\r\n\t\tlet day = date.getDay()\r\n\t\tdate = date.toUTCString()\r\n\r\n\t\tfetch(`${API_URL}/api/availability/offertime?day=${day}&duration=${props.duration}&utcDate=${date}`, requestOptions)\r\n\t\t\t.then(res => res.json())\r\n\t\t\t.then((data) => {\r\n\t\t\t\tif(!mountedRef.current) return null\r\n\t\t\t\tif (!data.success) {\r\n\t\t\t\t\tthrow new Error(data.message)\r\n\t\t\t\t}\r\n\t\t\t\tif (data.times.length === 0) {\r\n\t\t\t\t\tthrow new Error(\"Not available. Check other days or decrease session time.\")\r\n\t\t\t\t}\r\n\t\t\t\tsetIsLoading(false)\r\n\t\t\t\tsetFetchErrors([])\r\n\r\n\t\t\t\tdata.times.sort((a,b) => new Date(a) - new Date(b))\r\n\t\t\t\tsetTimes(data.times)\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\tif(!mountedRef.current) return null\r\n\t\t\t\tsetTimes([])\r\n\t\t\t\tsetIsLoading(false)\r\n\t\t\t\tif (Array.isArray(err)) {\r\n\t\t\t\t\tsetFetchErrors(err)\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tsetFetchErrors([err.message])\r\n\t\t\t\t}\r\n\t\t\t\tconsole.log(err)\r\n\t\t\t})\r\n\t}, [props.fullDate, props.duration, props.dummy])\r\n\r\n\tconst minutesToHhMmAPmString = (minutes) => {\r\n\t\tlet hours = Math.floor(minutes / 60)\r\n\t\tconst suffix = hours >= 12 ? \"PM\" : \"AM\"\r\n\t\tlet minutePart = ((minutes % 60) + '0').substring(0, 2)\r\n\t\thours = `${((hours + 11) % 12 + 1)}:${minutePart} ${suffix}`\r\n\t\treturn hours\r\n\t}\r\n\r\n\tconst getTotalMinutesFromDate = (date) => {\r\n\t\treturn date.getHours() * 60 + date.getMinutes()\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t{\r\n\t\t\t\tisLoading ?\r\n\t\t\t\t\t<div style={{ margin: \"auto\", textAlign: \"center\" }}>\r\n\t\t\t\t\t\t<div className=\"spinner-border text-warning\" role=\"status\">\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t:\r\n\t\t\t\t\t<div style={{display: \"flex\", flexWrap: \"wrap\", justifyContent: \"center\"}}>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\ttimes.map((time, index) => {\r\n\t\t\t\t\t\t\t\tconst date = new Date(time)\r\n\t\t\t\t\t\t\t\tconst minutes = getTotalMinutesFromDate(date)\r\n\t\t\t\t\t\t\t\tlet HHMMAPMstr = minutesToHhMmAPmString(minutes)\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<button key={index} \r\n\t\t\t\t\t\t\t\t\ttype=\"button\" \r\n\t\t\t\t\t\t\t\t\tvalue={HHMMAPMstr} \r\n\t\t\t\t\t\t\t\t\tclassName={`btn ${ HHMMAPMstr == selectedTime? 'btn-primary' : 'btn-secondary'} mx-1 my-1`} \r\n\t\t\t\t\t\t\t\t\tstyle={{ width: 80, fontSize: 12 }}\r\n\t\t\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\t\t\tsetSelectedTime(HHMMAPMstr)\r\n\t\t\t\t\t\t\t\t\t\t\tprops.onTimeSelected(HHMMAPMstr)\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t>{HHMMAPMstr}</button>\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t}\r\n\t\t\t{\r\n\t\t\t\tfetchErrors.map((error, index) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<div key={index} className=\"alert alert-danger\" role=\"alert\">\r\n\t\t\t\t\t\t\t{error}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default TimeOffer\r\n","import React, { useState, useEffect, useRef } from 'react'\r\nimport { EatLoading } from 'react-loadingg'\r\nimport { API_URL } from '../JS/variables';\r\n\r\nfunction ClassOffer(props) {\r\n    const [lessons, setLessons] = useState([])\r\n    const [selectedLessonId, setSelectedLessonId] = useState(null)\r\n    const mountedRef = useRef(true)\r\n    const [isLoading, setIsLoading] = useState(false)\r\n    const [error, setError] = useState('')\r\n\r\n    useEffect(() => {\r\n        if (!mountedRef.current) return null\r\n\r\n        setIsLoading(true)\r\n        setError('')\r\n\r\n        const requestOptions = {\r\n            method: 'GET',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Accept': 'application/json'\r\n            }\r\n        }\r\n        fetch(`${API_URL}/api/lesson/active`, requestOptions)\r\n            .then(res => res.json())\r\n            .then(data => {\r\n                if (!data.success) {\r\n                    throw new Error(data.message)\r\n                }\r\n                if (!data.lessons.length) {\r\n                    throw new Error('We are sorry. No lesson is available now.')\r\n                }\r\n                if (!mountedRef.current) return null\r\n                setLessons(data.lessons)\r\n                setIsLoading(false)\r\n                setError('')\r\n            })\r\n            .catch(error => {\r\n                if (!mountedRef.current) return null\r\n                console.log(error.message)\r\n                setIsLoading(false)\r\n                setError(error.message)\r\n            })\r\n\r\n        return () => {\r\n            mountedRef.current = false\r\n        }\r\n    }, [])\r\n\r\n    return (\r\n        <div>\r\n            {/* {LOADING && ERROR} */}\r\n            {\r\n                isLoading ? <EatLoading color=\"orange\" />\r\n                    : (error &&\r\n                        <div className=\"alert alert-danger\" role=\"alert\">\r\n                            {error}\r\n                        </div>\r\n                    )\r\n\r\n            }\r\n            <div className=\"class-offer-flex\">\r\n            {lessons.map(lesson => {\r\n\r\n                return (\r\n                    <div className={`class-offer my-2 ${selectedLessonId == lesson.lesson_id? \"class-offer-active\" : \"class-offer-inactive\"}`}  \r\n                    key={lesson.lesson_id} \r\n                    onClick={() => {\r\n                        setSelectedLessonId(lesson.lesson_id)\r\n                        props.selectLesson({\r\n                            lessonId: lesson.lesson_id,\r\n                            lessonName: lesson.lesson_name,\r\n                            price30m: lesson.price_30m,\r\n                            price60m: lesson.price_60m,\r\n                        })\r\n                    }}>\r\n                        <h3>{lesson.lesson_name}</h3>\r\n                        <p>30 minutes: ${lesson.price_30m}</p>\r\n                        <p>60 minutes: ${lesson.price_60m}</p>\r\n                    </div>\r\n                )\r\n            })}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ClassOffer\r\n","import React, { useState, useEffect, useRef } from 'react'\r\nimport DatePicker from './DatePicker'\r\nimport TimeOffer from './TimeOffer'\r\nimport ClassOffer from './ClassOffer'\r\nimport { API_URL } from '../JS/variables';\r\n\r\nconst today = new Date()\r\nconst initDate = today.getDate()\r\nconst initMonth = today.getMonth() + 1\r\nconst initYear = today.getFullYear()\r\nconst INIT_FULLDATE = `${initYear}-${initMonth}-${initDate}`\r\nconst INIT_DURATION = 60\r\n\r\nfunction Booking() {\r\n\tconst [name, setName] = useState('')\r\n\tconst [email, setEmail] = useState('')\r\n\tconst [phone, setPhone] = useState('')\r\n\tconst [note, setNote] = useState('')\r\n\tconst [duration, setDuration] = useState(INIT_DURATION)\r\n\tconst [fullDate, setFullDate] = useState(INIT_FULLDATE)\r\n\tconst [lesson, setLesson] = useState(null)\r\n\tconst [fullTime, setFullTime] = useState('')\r\n\tconst [submitErrors, setSubmitErrors] = useState([])\r\n\tconst [isLoading, setIsLoading] = useState(false)\r\n\tconst [bookingSuccess, setBookingSuccess] = useState(false)\r\n\tconst [dummy, setDummy] = useState(0)\r\n\r\n\tconst mountedRef = useRef(true)\r\n\r\n\r\n\tuseEffect(() => {\r\n\t\treturn () => {\r\n\t\t\tmountedRef.current = false\r\n\t\t}\r\n\t}, [])\r\n\r\n\tconst signalBookingSuccess = () => {\r\n\t\tsetDummy(dummy + 1)\r\n\t\tsetBookingSuccess(true)\r\n\t\tsetTimeout(() => {\r\n\t\t\tif (!mountedRef.current) return null\r\n\t\t\tsetBookingSuccess(false)\r\n\t\t}, 7000)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tsetFullTime('')\r\n\t}, [fullDate, duration])\r\n\r\n\tconst handleDateChange = (date, month, year) => {\r\n\t\tsetFullDate(year + '-' + (month + 1) + '-' + date)\r\n\t}\r\n\r\n\tconst onDurationChange = (e) => {\r\n\t\tsetDuration(e.target.value)\r\n\t}\r\n\r\n\r\n\tconst handleSubmit = () => {\r\n\t\tlet errors = [\r\n\t\t\t...(lesson ? [] : ['Lesson is missing. Please select a lesson']),\r\n\t\t\t...(fullDate ? [] : ['Date is missing. Please select date']),\r\n\t\t\t...(fullTime ? [] : ['Time is missing. Please select time.']),\r\n\t\t\t...(name ? [] : ['Name is required.']),\r\n\t\t\t...(email ? [] : ['Email address is required.']),\r\n\t\t\t...(duration > 0 && duration % 30 == 0 ? [] : ['Select session duration.'])\r\n\t\t]\r\n\t\tif (errors.length) {\r\n\t\t\treturn setSubmitErrors(errors)\r\n\t\t}\r\n\r\n\t\t// convert to utc date\r\n\t\tlet d = new Date(`${fullDate} ${fullTime}`)\r\n\t\td = d.toUTCString()\r\n\r\n\t\tconst requestOptions = {\r\n\t\t\tmethod: 'POST',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t'Accept': 'application/json'\r\n\t\t\t},\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\tname: name,\r\n\t\t\t\temail: email,\r\n\t\t\t\tphone: phone,\r\n\t\t\t\tnote: note,\r\n\t\t\t\tdate: d,\r\n\t\t\t\tduration: duration,\r\n\t\t\t\tlessonId: lesson.lessonId\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tsetIsLoading(true)\r\n\t\tsetSubmitErrors([])\r\n\r\n\t\tfetch(`${API_URL}/api/booking`, requestOptions)\r\n\t\t\t.then(res => res.json())\r\n\t\t\t.then(data => {\r\n\t\t\t\tif (!mountedRef.current) return null\r\n\t\t\t\tif (!data.success) {\r\n\t\t\t\t\tthrow new Error(data.message)\r\n\t\t\t\t}\r\n\t\t\t\tsetSubmitErrors([])\r\n\t\t\t\tsetIsLoading(false)\r\n\t\t\t\tsetFullTime('')\r\n\t\t\t\tsignalBookingSuccess()\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (!mountedRef.current) return null\r\n\t\t\t\tif (Array.isArray(error)) {\r\n\t\t\t\t\tsetSubmitErrors(error)\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tsetSubmitErrors([error.message])\r\n\t\t\t\t}\r\n\t\t\t\tsetIsLoading(false)\r\n\t\t\t})\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div style={{ maxWidth: 600, margin: \"auto\", padding: \"0px 0px 150px 0px\" }}>\r\n\t\t\t{/* {CLASS selection} */}\r\n\t\t\t<section className=\"booking\">\r\n\t\t\t\t<div className=\"guide-banner\">\r\n\t\t\t\t\t<h3>Select class</h3>\r\n\t\t\t\t</div>\r\n\t\t\t\t<ClassOffer selectLesson={setLesson} />\r\n\r\n\t\t\t</section>\r\n\r\n\t\t\t{/* {SESSION DURATION selection} */}\r\n\t\t\t<section className=\"booking\">\r\n\t\t\t\t<div className=\"guide-banner\">\r\n\t\t\t\t\t<h3>Select session duration</h3>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<div style={{ width: 200, margin: \"20px auto\" }}>\r\n\t\t\t\t\t\t<select className=\"form-select\" defaultValue={duration} aria-label=\"Default select example\" onChange={onDurationChange}>\r\n\t\t\t\t\t\t\t<option value=\"30\">30 minutes</option>\r\n\t\t\t\t\t\t\t<option value=\"60\">1 hour</option>\r\n\t\t\t\t\t\t\t<option value=\"90\">1 hour 30 minutes</option>\r\n\t\t\t\t\t\t\t<option value=\"120\">2 hours</option>\r\n\t\t\t\t\t\t\t<option value=\"150\">2 hours 30 minutes</option>\r\n\t\t\t\t\t\t\t<option value=\"180\">3 hours</option>\r\n\t\t\t\t\t\t\t<option value=\"210\">3 hours 30 minutes</option>\r\n\t\t\t\t\t\t\t<option value=\"240\">4 hours</option>\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</section>\r\n\r\n\t\t\t{/* {DATE selection section} */}\r\n\t\t\t<section className=\"booking\">\r\n\t\t\t\t<div className=\"guide-banner\">\r\n\t\t\t\t\t<h3>Select date</h3>\r\n\t\t\t\t</div>\r\n\t\t\t\t<DatePicker date={initDate} month={initMonth - 1} year={initYear} onDateChange={handleDateChange} />\r\n\t\t\t</section>\r\n\r\n\t\t\t{/* {TIME selection section} */}\r\n\t\t\t<section className=\"booking\">\r\n\t\t\t\t<div className=\"guide-banner\">\r\n\t\t\t\t\t<h3>Select time</h3>\r\n\t\t\t\t</div>\r\n\t\t\t\t<TimeOffer duration={duration} fullDate={fullDate} onTimeSelected={setFullTime} dummy={dummy} />\r\n\t\t\t</section>\r\n\r\n\t\t\t{/* ...... {student information} ......... */}\r\n\t\t\t<section className=\"booking\">\r\n\t\t\t\t<div className=\"guide-banner\">\r\n\t\t\t\t\t<h3>Your information</h3>\r\n\t\t\t\t</div>\r\n\t\t\t\t<form className=\"form-default-box\">\r\n\t\t\t\t\t<div className=\"mb-3\">\r\n\t\t\t\t\t\t<label htmlFor=\"name\" className=\"form-label\"><b>Name</b> </label>\r\n\t\t\t\t\t\t<input type=\"text\" length={50} className=\"form-control\" id=\"name\" required\r\n\t\t\t\t\t\t\tonChange={(e) => { setName(e.target.value) }}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"mb-3\">\r\n\t\t\t\t\t\t<label htmlFor=\"email\" className=\"form-label\"><b>Email</b></label>\r\n\t\t\t\t\t\t<input type=\"email\" length={50} className=\"form-control\" id=\"email\" required\r\n\t\t\t\t\t\t\tonChange={(e) => { setEmail(e.target.value) }}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"mb-3\">\r\n\t\t\t\t\t\t<label htmlFor=\"phone\" className=\"form-label\"><b>Phone</b></label>\r\n\t\t\t\t\t\t<input type=\"tel\" length={20} className=\"form-control\" id=\"phone\"\r\n\t\t\t\t\t\t\tonChange={(e) => { setPhone(e.target.value) }}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"mb-3\">\r\n\t\t\t\t\t\t<label htmlFor=\"note\" className=\"form-label\"><b>Note</b></label>\r\n\t\t\t\t\t\t<textarea className=\"form-control\" id=\"description\" rows={5} wrap=\"soft\"\r\n\t\t\t\t\t\t\tonChange={(e) => { setNote(e.target.value) }}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</form>\r\n\t\t\t</section>\r\n\r\n\t\t\t{/* {summary table} */}\r\n\t\t\t<section className=\"booking\">\r\n\t\t\t\t<div className=\"guide-banner\">\r\n\t\t\t\t\t<h3>Confirm details & Book appointment</h3>\r\n\t\t\t\t</div>\r\n\t\t\t\t<table className=\"table mb-4\" style={{ margin: \"auto\", maxWidth: 600 }}>\r\n\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t<tr className=\"table-primary\">\r\n\t\t\t\t\t\t\t<td colSpan=\"2\">\r\n\t\t\t\t\t\t\t\t<b>Your information</b>\r\n\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t<tr className=\"table-light\">\r\n\t\t\t\t\t\t\t<td className=\"booking-info-tag\">Name</td>\r\n\t\t\t\t\t\t\t<td>{name}</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t<tr className=\"table-light\">\r\n\t\t\t\t\t\t\t<td className=\"booking-info-tag\">Email</td>\r\n\t\t\t\t\t\t\t<td>{email}</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t<tr className=\"table-light\">\r\n\t\t\t\t\t\t\t<td className=\"booking-info-tag\">Phone</td>\r\n\t\t\t\t\t\t\t<td>{phone}</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t<tr className=\"table-light\">\r\n\t\t\t\t\t\t\t<td className=\"booking-info-tag\" style={{ verticalAlign: \"top\" }}>Note</td>\r\n\t\t\t\t\t\t\t<td>{note}</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t<tr className=\"table-primary\">\r\n\t\t\t\t\t\t\t<td colSpan=\"2\"><b>Appointment information</b></td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t<tr className=\"table-light\">\r\n\t\t\t\t\t\t\t<td className=\"booking-info-tag\">Class</td>\r\n\t\t\t\t\t\t\t<td>{lesson && lesson.lessonName}</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t<tr className=\"table-light\">\r\n\t\t\t\t\t\t\t<td className=\"booking-info-tag\">Class ID</td>\r\n\t\t\t\t\t\t\t<td>{lesson && lesson.lessonId}</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t<tr className=\"table-light\">\r\n\t\t\t\t\t\t\t<td className=\"booking-info-tag\">Date</td>\r\n\t\t\t\t\t\t\t<td>{fullDate}</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t<tr className=\"table-light\">\r\n\t\t\t\t\t\t\t<td className=\"booking-info-tag\">Time</td>\r\n\t\t\t\t\t\t\t<td>{fullTime}</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t<tr className=\"table-light\">\r\n\t\t\t\t\t\t\t<td className=\"booking-info-tag\">Duration</td>\r\n\t\t\t\t\t\t\t<td>{duration} minutes</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t<tr className=\"table-light\">\r\n\t\t\t\t\t\t\t<td className=\"booking-info-tag\">Fee</td>\r\n\t\t\t\t\t\t\t<td>${lesson && lesson.price60m * Math.floor(duration / 60) + lesson.price30m * (duration % 60 == 30 ? 1 : 0)} (pay at the study date)</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t</tbody>\r\n\t\t\t\t</table>\r\n\r\n\t\t\t\t{\r\n\t\t\t\t\tsubmitErrors.length > 0 &&\r\n\t\t\t\t\t<div className=\"alert alert-danger\" role=\"alert\">\r\n\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tsubmitErrors.map((error, index) => {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<li key={index}>{error}</li>\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\r\n\t\t\t\t{\r\n\t\t\t\t\tbookingSuccess &&\r\n\t\t\t\t\t<div className=\"alert alert-success\" role=\"alert\">\r\n\t\t\t\t\t\t<p>Successfully booked.Booking details will be sent to your email address.</p>\r\n\t\t\t\t\t\t<p>You can continue booking on this page.</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\r\n\t\t\t\t{\r\n\t\t\t\t\tisLoading ?\r\n\t\t\t\t\t\t<div style={{ display: \"flex\", justifyContent: \"flex-end\" }}>\r\n\t\t\t\t\t\t\t<button className=\"btn btn-primary\" type=\"button\" disabled>\r\n\t\t\t\t\t\t\t\t<span className=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\r\n\t\t\t\t\t\t\t\t<span className=\"sr-only\">Loading...</span>\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t:\r\n\t\t\t\t\t\t<div style={{ display: \"flex\", justifyContent: \"flex-end\" }}>\r\n\t\t\t\t\t\t\t<button className=\"btn btn-primary\" onClick={() => { handleSubmit() }}>Book now</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t</section>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Booking\r\n","import React, { useState, useEffect, useRef } from 'react'\r\nimport { API_URL } from '../JS/variables'\r\n\r\nfunction CrateAvailabilityForm(props) {\r\n\tconst DAYS = [\r\n\t\t{ id: 0, day: 'Sun', isChecked: false },\r\n\t\t{ id: 1, day: 'Mon', isChecked: false },\r\n\t\t{ id: 2, day: 'Tu', isChecked: false },\r\n\t\t{ id: 3, day: 'Wed', isChecked: false },\r\n\t\t{ id: 4, day: 'Th', isChecked: false },\r\n\t\t{ id: 5, day: 'Fri', isChecked: false },\r\n\t\t{ id: 6, day: 'Sat', isChecked: false },\r\n\t\t{ id: 7, day: 'Everyday', isChecked: false },\r\n\t]\r\n\r\n\tconst [selectedDays] = useState(DAYS)\r\n\tconst [isLoading, setIsLoading] = useState(false)\r\n\tconst [fetchErrors, setFetchErrors] = useState([])\r\n\tconst [dayError, setDayError] = useState('')\r\n\tconst [fromH, setFromH] = useState(0)\r\n\tconst [fromM, setFromM] = useState(0)\r\n\tconst [fromAP, setFromAP] = useState('AM')\r\n\tconst [toH, setToH] = useState(0)\r\n\tconst [toM, setToM] = useState(0)\r\n\tconst [toAP, setToAP] = useState('AM')\r\n\tconst [dummy, setDummy] = useState(0)\r\n\r\n\tconst mountedRef = useRef(true)\r\n\r\n\tuseEffect(() => {\r\n\t\treturn () => {\r\n\t\t\tmountedRef.current = false\r\n\t\t}\r\n\t}, [])\r\n\r\n\tconst getFromMinute = () => {\r\n\t\treturn (fromH * 1 + (fromAP === 'AM'? 0 : 12)) * 60 + fromM * 1\r\n\t}\r\n\r\n\tconst getToMinute = () => {\r\n\t\t// to midnight\r\n\t\tif (toH * 1 == 0 && toM * 1 == 0 && toAP == 'AM'){\r\n\t\t\treturn 24*60\r\n\t\t}\r\n\t\treturn (toH * 1 + (toAP === 'AM'? 0 : 12)) * 60 + toM * 1\r\n\t}\r\n\r\n\tconst handleAddAvailability = (e) => {\r\n\t\te.preventDefault()\r\n\t\tlet timeFrom = getFromMinute()\r\n\t\tlet timeTo = getToMinute()\r\n\r\n\r\n\t\tif(timeFrom >= timeTo){\r\n\t\t\treturn setFetchErrors(['Incorrect time.'])\r\n\t\t}\r\n\r\n\r\n\t\tif (!mountedRef.current) {\r\n\t\t\treturn null\r\n\t\t}\r\n\t\tsetFetchErrors([])\r\n\t\tsetIsLoading(true)\r\n\r\n\t\tconst days = getSelectedDaysValue()\r\n\r\n\t\tif (!days) {\r\n\t\t\tsetDayError('At least one day must be selected.')\r\n\t\t\tsetIsLoading(false)\r\n\t\t\treturn\r\n\t\t} else {\r\n\t\t\tsetDayError('')\r\n\t\t}\r\n\r\n\t\tconst requestOptions = {\r\n\t\t\tmethod: 'POST',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t'Accept': 'application/json'\r\n\t\t\t},\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\ttimeFrom: timeFrom,\r\n\t\t\t\ttimeTo: timeTo,\r\n\t\t\t\tdays: getSelectedDaysValue()\r\n\t\t\t}),\r\n\t\t\tcredentials: 'include'\r\n\t\t}\r\n\r\n\t\tfetch(`${API_URL}/api/availability/`, requestOptions)\r\n\t\t\t.then(res => {\r\n\t\t\t\tif (res.status === 401) {\r\n\t\t\t\t\tthrow new Error('Unauthorized.')\r\n\t\t\t\t}\r\n\t\t\t\treturn res\r\n\t\t\t})\r\n\t\t\t.then(res => res.json())\r\n\t\t\t.then((data) => {\r\n\t\t\t\tif (!mountedRef.current) return null\r\n\t\t\t\tif (!data.success) {\r\n\t\t\t\t\tthrow new Error(data.message)\r\n\t\t\t\t}\r\n\t\t\t\tprops.handleClose()\r\n\t\t\t\tprops.signalAddSuccess()\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\tif (!mountedRef.current) return null\r\n\t\t\t\tif (Array.isArray(err)) {\r\n\t\t\t\t\tsetFetchErrors(err)\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tsetFetchErrors([err.message])\r\n\t\t\t\t}\r\n\t\t\t\tsetIsLoading(false)\r\n\t\t\t})\r\n\t}\r\n\r\n\t// return 056 if Sun, Fri, Sat is checked\r\n\tconst getSelectedDaysValue = () => {\r\n\t\tlet val = ''\r\n\t\tselectedDays.forEach(day => {\r\n\t\t\tif (day.isChecked) {\r\n\t\t\t\tval += day.id\r\n\t\t\t}\r\n\t\t})\r\n\t\treturn val\r\n\t}\r\n\r\n\tconst onSelectedDayChange = (e) => {\r\n\t\tif(e.target.id == 7){\r\n\t\t\t// every day is check, check if all 7 days are checked. If not set isChecked = true. If they are, set all to false\r\n\t\t\tlet foundUnchecked = false\r\n\t\t\tfor(let i = 0; i < selectedDays.length - 1; i++){\r\n\t\t\t\tif(!selectedDays[i].isChecked){\r\n\t\t\t\t\tselectedDays[i].isChecked = true\r\n\t\t\t\t\tfoundUnchecked = true\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// if there are no uncheck, uncheck them all\r\n\t\t\tif(!foundUnchecked){\r\n\t\t\t\tfor(let i = 0; i < selectedDays.length; i++){\r\n\t\t\t\t\tselectedDays[i].isChecked = false\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\t// check the every day\r\n\t\t\t\tselectedDays[selectedDays.length - 1].isChecked = true\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tfor(let i = 0; i < selectedDays.length - 1; i++){\r\n\t\t\t\tif(e.target.id == selectedDays[i].id){\r\n\t\t\t\t\tselectedDays[i].isChecked = e.target.checked\r\n\t\t\t\t\tselectedDays[7].isChecked = false\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tsetDummy(dummy + 1)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className=\"mt-3 mb-3\">\r\n\t\t\t\t<form className=\"form-default-box\" onSubmit={handleAddAvailability} style={{ margin: \"auto\", maxWidth: 320 }}>\r\n\r\n\t\t\t\t\t{/* {TIME INPUTS} */}\r\n\t\t\t\t\t<div className=\"py-1\" style={{ textAlign: \"center\" }}>\r\n\t\t\t\t\t\t<b>From</b>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div style={{ margin: \"5px auto\", width: \"100%\", textAlign: \"center\" }}>\r\n\t\t\t\t\t\t<div style={{ display: \"inline-block\" }}>\r\n\t\t\t\t\t\t\t<select className=\"form-select\" defaultValue={fromH} name=\"fromH\" id=\"fromH\"\t\t\t\t\t\r\n\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\t\tsetFromH(e.target.value)\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<option value=\"0\">12</option>\r\n\t\t\t\t\t\t\t\t<option value=\"1\">01</option>\r\n\t\t\t\t\t\t\t\t<option value=\"2\">02</option>\r\n\t\t\t\t\t\t\t\t<option value=\"3\">03</option>\r\n\t\t\t\t\t\t\t\t<option value=\"4\">04</option>\r\n\t\t\t\t\t\t\t\t<option value=\"5\">05</option>\r\n\t\t\t\t\t\t\t\t<option value=\"6\">06</option>\r\n\t\t\t\t\t\t\t\t<option value=\"7\">07</option>\r\n\t\t\t\t\t\t\t\t<option value=\"8\">08</option>\r\n\t\t\t\t\t\t\t\t<option value=\"9\">09</option>\r\n\t\t\t\t\t\t\t\t<option value=\"10\">10</option>\r\n\t\t\t\t\t\t\t\t<option value=\"11\">11</option>\r\n\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t&nbsp;<b>:</b>&nbsp;\r\n\t\t\t\t\t\t<div style={{ display: \"inline-block\" }}>\r\n\t\t\t\t\t\t\t<select className=\"form-select\" defaultValue={fromM} name=\"fromM\" id=\"fromM\" \r\n\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\tsetFromM(e.target.value)\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<option value=\"0\">00</option>\r\n\t\t\t\t\t\t\t\t<option value=\"30\">30</option>\r\n\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t&nbsp;\r\n\t\t\t\t\t\t<div style={{ display: \"inline-block\" }}>\r\n\t\t\t\t\t\t\t<select className=\"form-select\" defaultValue={fromAP} name=\"fromAP\" id=\"fromAP\" \r\n\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\tsetFromAP(e.target.value)\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<option value=\"AM\">AM</option>\r\n\t\t\t\t\t\t\t\t<option value=\"PM\">PM</option>\r\n\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"py-1\" style={{ textAlign: \"center\" }}>\r\n\t\t\t\t\t\t<b>To</b>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div style={{ margin: \"5px auto\", width: \"100%\", textAlign: \"center\" }}>\r\n\t\t\t\t\t\t<div style={{ display: \"inline-block\" }}>\r\n\t\t\t\t\t\t\t<select className=\"form-select\" defaultValue={toH} name=\"toH\" id=\"toH\" \r\n\t\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\t\tsetToH(e.target.value)\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<option value=\"0\">12</option>\r\n\t\t\t\t\t\t\t\t<option value=\"1\">01</option>\r\n\t\t\t\t\t\t\t\t<option value=\"2\">02</option>\r\n\t\t\t\t\t\t\t\t<option value=\"3\">03</option>\r\n\t\t\t\t\t\t\t\t<option value=\"4\">04</option>\r\n\t\t\t\t\t\t\t\t<option value=\"5\">05</option>\r\n\t\t\t\t\t\t\t\t<option value=\"6\">06</option>\r\n\t\t\t\t\t\t\t\t<option value=\"7\">07</option>\r\n\t\t\t\t\t\t\t\t<option value=\"8\">08</option>\r\n\t\t\t\t\t\t\t\t<option value=\"9\">09</option>\r\n\t\t\t\t\t\t\t\t<option value=\"10\">10</option>\r\n\t\t\t\t\t\t\t\t<option value=\"11\">11</option>\r\n\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t&nbsp;<b>:</b>&nbsp;\r\n\t\t\t\t\t\t<div style={{ display: \"inline-block\" }}>\r\n\t\t\t\t\t\t\t<select className=\"form-select\" defaultValue={toM} name=\"toM\" id=\"toM\" \r\n\t\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\t\tsetToM(e.target.value)\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<option value=\"0\">00</option>\r\n\t\t\t\t\t\t\t\t<option value=\"30\">30</option>\r\n\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t&nbsp;\r\n\t\t\t\t\t\t<div style={{ display: \"inline-block\" }}>\r\n\t\t\t\t\t\t\t<select className=\"form-select\" defaultValue={toAP} name=\"toAP\" id=\"toAP\" \r\n\t\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\t\tsetToAP(e.target.value)\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<option value=\"AM\">AM</option>\r\n\t\t\t\t\t\t\t\t<option value=\"PM\">PM</option>\r\n\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"form-check\">\r\n\t\t\t\t\t\t{selectedDays.map((day) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<div key={day.id}>\r\n\t\t\t\t\t\t\t\t\t<input className=\"form-check-input\" type=\"checkbox\" id={day.id} onChange={ e => {onSelectedDayChange(e)}} checked={day.isChecked} />\r\n\t\t\t\t\t\t\t\t\t<label className=\"form-check-label\" htmlFor={day.id}>{day.day}</label>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tdayError\r\n\t\t\t\t\t\t&&\r\n\t\t\t\t\t\t<div className=\"alert alert-danger\" role=\"alert\">\r\n\t\t\t\t\t\t\t{dayError}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t}\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tfetchErrors.map((error, index) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<div key={index} className=\"alert alert-danger\" role=\"alert\">\r\n\t\t\t\t\t\t\t\t\t{error}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t{/* {Submit and Cancel buttons} */}\r\n\t\t\t\t\t<div style={{ width: \"100%\", height: 20, marginTop: 20 }}>\r\n\t\t\t\t\t\t<button type=\"button\" className=\"btn btn-danger d-inline-block float-start\"\r\n\t\t\t\t\t\t\tonClick={() => props.handleClose()}>Cancel</button>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tisLoading ?\r\n\t\t\t\t\t\t\t\t<button className=\"btn btn-primary float-end\" type=\"button\" disabled>\r\n\t\t\t\t\t\t\t\t\t<span className=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\r\n\t\t\t\t\t\t\t\t\t<span className=\"sr-only\">Loading...</span>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t\t<button type=\"submit\" className=\"btn btn-primary d-inline-block float-end\">Add</button>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t</div >\r\n\t)\r\n}\r\n\r\nexport default CrateAvailabilityForm\r\n","import React, { useState, useRef } from 'react'\r\nimport { TiTrash } from 'react-icons/ti'\r\nimport { API_URL } from '../JS/variables';\r\n\r\n\r\nfunction Availability({availability, removeAvailability}) {\r\n\tconst [isLoading, setIsLoading] = useState(false)\r\n\tconst [error, setError] = useState('')\r\n\tconst mountedRef = useRef(true)\r\n\r\n\tconst WEEK = [\r\n\t\t'Sun', 'Mon', 'Tu', 'Wed', 'Th', 'Fri', 'Sat'\r\n\t]\r\n\r\n\tconst minutesToHhMmAPmString = (minutes) => {\r\n\t\t// 12:00 AM is a special case for 12:00 AM - 12:00AM (terminal)\r\n\t\tif(minutes == 24*60){\r\n\t\t\treturn '12:00 AM'\r\n\t\t}\r\n\t\tlet hours = Math.floor(minutes / 60)\r\n\t\tconst suffix = hours >= 12 ? \"PM\" : \"AM\"\r\n\t\tlet minutePart = ((minutes % 60) + '0').substring(0, 2)\r\n\t\thours = `${((hours + 11) % 12 + 1)}:${minutePart} ${suffix}`\r\n\t\treturn hours\r\n\t}\r\n\r\n\tconst start_time = minutesToHhMmAPmString(availability.start_minute)\r\n\tconst end_time = minutesToHhMmAPmString(availability.end_minute)\r\n\r\n\tconst getAvailDisplay = () => {\r\n\t\tlet week = [0, 0, 0, 0, 0, 0, 0]\r\n\t\tlet days = availability.days\r\n\t\tfor (let i = 0; i < days.length; i++) {\r\n\t\t\tweek[days[i]] = 1\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<div style={{ margin: \"10px auto\" }}>\r\n\t\t\t\t{week.map((day, index) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<div key={index} style={{ display: \"inline-block\", textAlign: \"center\", minWidth: 40, color: day ? 'orange' : '#eee' }}>{WEEK[index]}</div>\r\n\t\t\t\t\t)\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\r\n\tconst deleteAvailability = () => {\r\n\t\tsetIsLoading(true)\r\n\t\tsetError('')\r\n\t\tconst requestionOptions =\r\n\t\t{\r\n\t\t\tmethod: 'DELETE',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t'Accept': 'application/json'\r\n\t\t\t},\r\n\t\t\tcredentials: 'include'\r\n\t\t}\r\n\r\n\t\tfetch(`${API_URL}/api/availability/delete/${availability.availability_id}`, requestionOptions)\r\n\t\t\t.then(res => res.json())\r\n\t\t\t.then(data => {\r\n\t\t\t\tif (!data.success) {\r\n\t\t\t\t\tthrow new Error(data.message)\r\n\t\t\t\t}\r\n\t\t\t\tif (!mountedRef.current) return null\r\n\t\t\t\tsetIsLoading(false)\r\n\t\t\t\tsetError('')\r\n\t\t\t\tremoveAvailability(availability.availability_id)\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (!mountedRef.current) return null\r\n\t\t\t\tsetIsLoading(false)\r\n\t\t\t\tsetError(error.message)\r\n\t\t\t})\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className=\"mb-2 pd-4 default-wrapper mw-400\">\r\n\t\t\t\t<div className=\"\">\r\n\t\t\t\t\t<div className=\"mb-2\">\r\n\t\t\t\t\t\t{getAvailDisplay()}\r\n\t\t\t\t\t\t<p className=\"mb-1 text-secondary\"><b>{start_time == end_time ? 'All day' : `${start_time} - ${end_time}`}</b></p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{/* <button type=\"button\" title=\"edit\" className=\"btn btn-secondary py-1\">\r\n                            <TiEdit size={20} />\r\n                            <span className=\"align-middle\" style={{ fontSize: 15 }}>EDIT</span>\r\n                        </button> */}\r\n\r\n\t\t\t\t\t{/* {error warning} */}\r\n\t\t\t\t\t{error &&\r\n\t\t\t\t\t\t<div className=\"alert alert-danger\" role=\"alert\">\r\n\t\t\t\t\t\t\t{error}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t{/* {button panel} */}\r\n\t\t\t\t\t<div style={{ height: 30 }}>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tisLoading ?\r\n\t\t\t\t\t\t\t\t<button className=\"btn btn-danger py-1 float-end\" type=\"button\" disabled>\r\n\t\t\t\t\t\t\t\t\t<span className=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\r\n\t\t\t\t\t\t\t\t\t<span className=\"sr-only\">Deleting...</span>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t\t<button onClick={deleteAvailability} type=\"button\" title=\"delete\" className=\"btn btn-danger py-1 float-end\" >\r\n\t\t\t\t\t\t\t\t\t<TiTrash size={20} />\r\n\t\t\t\t\t\t\t\t\t<span className=\"align-middle button-text\" style={{ fontSize: 10 }}>DELETE</span>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div >\r\n\t)\r\n}\r\n\r\nexport default Availability\r\n","import React, { useState, useEffect, useRef } from 'react';\r\nimport CreateAvailabilityForm from './CreateAvailabilityForm';\r\nimport Availability from './Availability';\r\nimport { API_URL } from '../JS/variables';\r\n\r\nfunction AvailabilityPanel() {\r\n\tconst [availabilities, setAvailabilities] = useState([])\r\n\tconst mountedRef = useRef(true)\r\n\tconst [showForm, setShowForm] = useState(false)\r\n\tconst [addSuccess, setAddSuccess] = useState(false)\r\n\tconst [dummy, setDummy] = useState(0)\r\n\tconst [isLoading, setIsLoading] = useState(false)\r\n\tconst [error, setError] = useState('')\r\n\r\n\tconst signalAddSuccess = () => {\r\n\t\tsetAddSuccess(true)\r\n\t\tsetDummy(dummy + 1)\r\n\t\tsetTimeout(() => {\r\n\t\t\tsetAddSuccess(false)\r\n\t\t}, 2000)\r\n\t}\r\n\r\n\tfunction compare(a, b) {\r\n\t\tif (a.days < b.days) {\r\n\t\t\treturn -1;\r\n\t\t}\r\n\t\tif (a.days > b.days) {\r\n\t\t\treturn 1;\r\n\t\t}\r\n\t\treturn 0;\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\treturn () => {\r\n\t\t\tmountedRef.current = false\r\n\t\t}\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!mountedRef.current) return null\r\n\t\tsetIsLoading(true)\r\n\t\tsetError('')\r\n\t\tconst requestOptions = {\r\n\t\t\tmethod: 'GET',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t'Accept': 'application/json',\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfetch(`${API_URL}/api/availability/all`, requestOptions)\r\n\t\t\t.then(res => res.json())\r\n\t\t\t.then(res => {\r\n\t\t\t\tif (!mountedRef.current) return null\r\n\t\t\t\tif (!res.success) {\r\n\t\t\t\t\tthrow new Error(res.message)\r\n\t\t\t\t}\r\n\t\t\t\tconst avails = res.data\r\n\t\t\t\tavails.sort(compare)\r\n\t\t\t\tsetAvailabilities(res.data)\r\n\t\t\t\tsetError('')\r\n\t\t\t\tsetIsLoading(false)\r\n\t\t\t})\r\n\t\t\t.catch(err => {\r\n\t\t\t\tif (!mountedRef.current) return null\r\n\t\t\t\tconsole.log(err.message)\r\n\t\t\t\tsetError(err.message)\r\n\t\t\t\tsetIsLoading(false)\r\n\t\t\t})\r\n\r\n\r\n\t}, [dummy])\r\n\r\n\tconst removeAvailability = (id) => {\r\n\t\tsetAvailabilities(availabilities.filter(availability => availability.availability_id != id))\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"mt-3\">\r\n\t\t\t{/* {msg when successfully add new availability} */}\r\n\t\t\t{\r\n\t\t\t\taddSuccess &&\r\n\t\t\t\t<div className=\"alert alert-success\" role=\"alert\">\r\n\t\t\t\t\tSuccessfully added.\r\n\t\t\t\t</div>\r\n\t\t\t}\r\n\r\n\t\t\t{/* {Form component} */}\r\n\t\t\t{\r\n\t\t\t\tshowForm ?\r\n\t\t\t\t\t<CreateAvailabilityForm signalAddSuccess={signalAddSuccess} handleClose={() => setShowForm(false)} />\r\n\t\t\t\t\t:\r\n\t\t\t\t\t<div style={{ textAlign: \"center\" }}>\r\n\t\t\t\t\t\t<button type=\"button\" className=\"btn btn-primary mb-5\" onClick={() => setShowForm(true)}>\r\n\t\t\t\t\t\t\tAdd availability\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t}\r\n\r\n\t\t\t{/* {LOADING && ERROR} */}\r\n\t\t\t{\r\n\t\t\t\tisLoading ?\r\n\t\t\t\t\t<div className=\"text-center\">\r\n\t\t\t\t\t\t<div className=\"spinner-border\" role=\"status\" style={{color: \"orange\"}}>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t: (error &&\r\n\t\t\t\t\t\t<div className=\"alert alert-danger\" role=\"alert\">\r\n\t\t\t\t\t\t\t{error}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)\r\n\t\t\t}\r\n\r\n\t\t\t{/* {Availability list} */}\r\n\t\t\t{\r\n\t\t\t\tavailabilities.map(avail => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<Availability\r\n\t\t\t\t\t\t\tkey={avail.availability_id}\r\n\t\t\t\t\t\t\tremoveAvailability={removeAvailability}\r\n\t\t\t\t\t\t\tavailability={avail}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)\r\n\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default AvailabilityPanel\r\n","import React, { useEffect} from 'react'\r\n\r\nfunction AppModal({show, onClose, title, children}) {\r\n\r\n    useEffect(() => {\r\n        const closeOnEscapeKeyDown = (e) => {\r\n            if( e.keyCode === 27) {\r\n                onClose()\r\n            } \r\n        }\r\n        document.addEventListener('keydown', closeOnEscapeKeyDown)\r\n        return () => {\r\n            document.removeEventListener('keydown', closeOnEscapeKeyDown)\r\n        }\r\n    })\r\n\r\n\r\n\r\n    return (\r\n        <div className={`app-modal ${show? 'show' : ''}`} onClick={onClose}>\r\n            <div className=\"app-modal-content\" onClick={(e) => {e.stopPropagation()}}>\r\n                <div className=\"modal-header\">\r\n                    <h4 className=\"app-modal-title\">{title}</h4>\r\n                </div>\r\n                <div className=\"app-modal-body\">\r\n                    {children}\r\n                </div>\r\n                <div className=\"app-modal-footer\">\r\n                    <button className=\"btn btn-secondary\" onClick={onClose}>\r\n                        Close\r\n                    </button>\r\n                </div>\r\n            </div>\r\n            \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default AppModal\r\n","import React, { useState, useEffect, useRef } from 'react'\r\nimport { API_URL } from '../JS/variables';\r\n\r\nfunction Appointment({ id, onUpdate }) {\r\n\tconst [appointment, setAppointment] = useState(null)\r\n\tconst [isLoading, setIsLoading] = useState(false)\r\n\tconst [error, setError] = useState('')\r\n\tconst [showCancelForm, setShowCancelForm] = useState(false)\r\n\tconst [cancelText, setCancelText] = useState('')\r\n\tconst [cancelLoading, setCancelLoading] = useState(false)\r\n\tconst [cancelError, setCancelError] = useState('')\r\n\tconst mountedRef = useRef(true)\r\n\r\n\tuseEffect(() => {\r\n\t\treturn () => {\r\n\t\t\tmountedRef.current = false\r\n\t\t}\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!id) {\r\n\t\t\tconsole.log('id is null')\r\n\t\t\tsetAppointment(null)\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tsetIsLoading(true)\r\n\t\tsetError('')\r\n\r\n\t\tconst requestOptions = {\r\n\t\t\tmethod: 'GET',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t'Accept': 'application/json'\r\n\t\t\t},\r\n\t\t\tcredentials: 'include'\r\n\t\t}\r\n\t\tconsole.log('id is: ', id)\r\n\r\n\t\tfetch(`${API_URL}/api/appointment/id/${id}`, requestOptions)\r\n\t\t\t.then(res => res.json())\r\n\t\t\t.then(data => {\r\n\t\t\t\tif (!mountedRef.current) return null\r\n\t\t\t\tif (!data.success) {\r\n\t\t\t\t\tthrow new Error(data.message)\r\n\t\t\t\t}\r\n\t\t\t\tsetIsLoading(false)\r\n\t\t\t\tsetError('')\r\n\t\t\t\tconsole.log(data.appointment)\r\n\t\t\t\tsetAppointment(data.appointment)\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (!mountedRef.current) return null\r\n\t\t\t\tconsole.log(error)\r\n\t\t\t\tsetIsLoading(false)\r\n\t\t\t\tsetError(error.message)\r\n\t\t\t})\r\n\t}, [id])\r\n\r\n\tconst minutesToHhMmAPmString = (minutes) => {\r\n\t\tlet hours = Math.floor(minutes / 60)\r\n\t\tconst suffix = hours >= 12 ? \"PM\" : \"AM\"\r\n\t\tlet minutePart = ((minutes % 60) + '0').substring(0, 2)\r\n\t\thours = `${((hours + 11) % 12 + 1)}:${minutePart} ${suffix}`\r\n\t\treturn hours\r\n\t}\r\n\r\n\tconst convertDateAndTimeRangeString = (date, duration) => {\r\n\t\tlet d = date.getDate()\r\n\t\tlet m = date.getMonth() + 1\r\n\t\tlet y = date.getFullYear()\r\n\t\tlet start_time_string = minutesToHhMmAPmString(Math.floor(date.getHours()) * 60 + date.getMinutes())\r\n\t\tlet end_time_string = minutesToHhMmAPmString(Math.floor(date.getHours()) * 60 + date.getMinutes() + duration)\r\n\r\n\t\treturn `${d}/${m}/${y} ${start_time_string} - ${end_time_string}`\r\n\t}\r\n\r\n\tconst onCancelTextChange = (e) => {\r\n\t\t// auto adjust textarea height\r\n\t\te.target.style.height = \"\";\r\n\t\te.target.style.height = Math.min(e.target.scrollHeight, 300) + \"px\";\r\n\t\tsetCancelText(e.target.value)\r\n\t}\r\n\r\n\tconst handleCancelAppointment = (e) => {\r\n\t\te.preventDefault()\r\n\t\tconst requestOptions = {\r\n\t\t\tmethod: 'POST',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t'Accept': 'application/json'\r\n\t\t\t},\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\tid: appointment.appointment_id,\r\n\t\t\t\tmessage: cancelText\r\n\t\t\t}),\r\n\t\t\tcredentials: 'include'\r\n\t\t}\r\n\r\n\t\tsetCancelLoading(true)\r\n\t\tsetCancelError('')\r\n\r\n\t\tfetch(`${API_URL}/api/appointment/admincancel?id=${appointment.appointment_id}}`, requestOptions)\r\n\t\t\t.then(res => res.json())\r\n\t\t\t.then(data => {\r\n\t\t\t\tif (!mountedRef.current) return null\r\n\t\t\t\tif (!data.success) {\r\n\t\t\t\t\tthrow new Error(data.message)\r\n\t\t\t\t}\r\n\t\t\t\tonUpdate()\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tconsole.log(error)\r\n\t\t\t\tsetCancelLoading(false)\r\n\t\t\t\tsetCancelError(error.message)\r\n\t\t\t})\r\n\t}\r\n\treturn (\r\n\t\t<div className=\"mb-2\">\r\n\t\t\t<div className=\"appointment-info-upcoming-wrapper py-2 px-2\">\r\n\t\t\t\t{/* {LOADING && ERROR} */}\r\n\t\t\t\t{\r\n\t\t\t\t\tisLoading ? <div className=\"text-center\">\r\n\t\t\t\t\t\t<div className=\"spinner-border\" role=\"status\">\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t\t: (error &&\r\n\t\t\t\t\t\t\t<div className=\"alert alert-danger\" role=\"alert\">\r\n\t\t\t\t\t\t\t\t{error}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t\t{\r\n\t\t\t\t\tappointment &&\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<p style={{ color: \"black\" }}><b>Datetime: {convertDateAndTimeRangeString(new Date(appointment.appointment_start), appointment.duration)} ({appointment.duration} minutes)</b></p>\r\n\t\t\t\t\t\t<p><b>Appointment ID: </b>{appointment.appointment_id}</p>\r\n\t\t\t\t\t\t<p><b>Lesson: </b>{appointment.lesson_name}</p>\r\n\t\t\t\t\t\t<p><b>Customer: </b>{appointment.customer_name}</p>\r\n\t\t\t\t\t\t<p><b>Email: </b>{appointment.customer_email}</p>\r\n\t\t\t\t\t\t<p><b>Phone: </b>{appointment.customer_phone}</p>\r\n\t\t\t\t\t\t<p><b>Note: </b>{appointment.note}</p>\r\n\t\t\t\t\t\t<p><b>Fee: </b>${appointment.fee}</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t\t<div className=\"mt-2\">\r\n\t\t\t\t{\r\n\t\t\t\t\tshowCancelForm ?\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<form onSubmit={handleCancelAppointment} className=\"py-2\">\r\n\t\t\t\t\t\t\t\t<textarea onChange={onCancelTextChange} className=\"form-control\" id=\"cancelText\" rows={5} wrap=\"soft\" placeholder=\"write message here\" />\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tcancelError\r\n\t\t\t\t\t\t\t\t\t&&\r\n\t\t\t\t\t\t\t\t\t<div className=\"alert alert-danger\" role=\"alert\">\r\n\t\t\t\t\t\t\t\t\t\t{cancelError}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tcancelLoading ?\r\n\t\t\t\t\t\t\t\t\t\t<button className=\"btn btn-primary float-end\" type=\"button\" disabled>\r\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\r\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"sr-only\">Loading...</span>\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t\t\t\t<button type=\"submit\" title=\"delete\" className=\"btn btn-danger my-2 float-end\" >\r\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"align-middle button-text\" style={{ fontSize: 12 }}>confirm cancellation</span>\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t</form >\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t:\r\n\t\t\t\t\t\t<button className=\"btn btn-danger float-end\" onClick={() => setShowCancelForm(true)}>\r\n\t\t\t\t\t\t\tcancel appointment\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Appointment\r\n","import React, { useState, useEffect, useRef } from 'react'\r\nimport { API_URL } from '../JS/variables'\r\nimport AppModal from './AppModal'\r\nimport Appointment from './Appointment'\r\nimport { FaAngleLeft, FaAngleRight } from 'react-icons/fa'\r\nimport { GrRefresh } from 'react-icons/gr'\r\n\r\nfunction Calendar() {\r\n\tconst [date, setDate] = useState(null)\r\n\tconst [dateInputDisplay, setDateInputDisplay] = useState('')\r\n\tconst [week, setWeek] = useState([])\r\n\tconst [data, setData] = useState([])\r\n\tconst [isLoading, setIsLoading] = useState(false)\r\n\tconst [error, setError] = useState('')\r\n\tconst [selectedAppt, setSelectedAppt] = useState('')\r\n\tconst [dummy, setDummy] = useState(0)\r\n\tconst mountedRef = useRef(true)\r\n\r\n\tconst changeInputDateToFirstDayOfWeek = (d) => {\r\n\t\td.setDate(d.getDate() - d.getDay())\r\n\t\td.setHours(0)\r\n\t\td.setMinutes(0)\r\n\t\td.setSeconds(0)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tlet today = new Date()\r\n\t\tsetDateInputDisplay(formatDate2(today))\r\n\t\tchangeInputDateToFirstDayOfWeek(today)\r\n\t\tsetDate(today)\r\n\r\n\t\treturn () => {\r\n\t\t\tmountedRef.current = false\r\n\t\t}\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!date) return\r\n\r\n\t\tlet aWeek = []\r\n\r\n\t\tlet beginDate = new Date(date) // beginning of the week (Sunday)\r\n\t\tchangeInputDateToFirstDayOfWeek(beginDate)\r\n\r\n\t\t// push seven day in array\r\n\t\tfor (let i = 0; i < 7; i++) {\r\n\t\t\tlet dummyDate = new Date(beginDate)\r\n\t\t\tlet aDate = dummyDate.setDate(beginDate.getDate() + i)\r\n\t\t\taWeek.push(aDate)\r\n\t\t}\r\n\t\tsetWeek(aWeek)\r\n\t}, [date])\r\n\r\n\tuseEffect(() => {\r\n\t\tconst fetchWeekAppointment = () => {\r\n\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\tconst requestOptions = {\r\n\t\t\t\t\tcredentials: 'include'\r\n\t\t\t\t}\r\n\t\t\t\tfetch(`${API_URL}/api/appointment/week?utcDate=${date.toUTCString()}`, requestOptions)\r\n\t\t\t\t\t.then(res => res.json())\r\n\t\t\t\t\t.then(data => {\r\n\t\t\t\t\t\tif (!mountedRef) return null\r\n\t\t\t\t\t\tif (!data.success) {\r\n\t\t\t\t\t\t\tthrow new Error(data.message)\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tlet appointments = data.appointments.map(appt => {\r\n\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\tappointmentId: appt.appointment_id,\r\n\t\t\t\t\t\t\t\tcustomerName: appt.customer_name,\r\n\t\t\t\t\t\t\t\tlessonName: appt.lesson_name,\r\n\t\t\t\t\t\t\t\tappointmentStart: new Date(appt.appointment_start),\r\n\t\t\t\t\t\t\t\tduration: appt.duration,\r\n\t\t\t\t\t\t\t\tminuteStart: dateToMinuteStart(new Date(appt.appointment_start))\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tresolve(appointments)\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(error => {\r\n\t\t\t\t\t\treject(error)\r\n\t\t\t\t\t})\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tasync function processWeekAppointment() {\r\n\t\t\tif (!week.length || !date) return\r\n\r\n\t\t\t//fetch appointment\r\n\t\t\tsetError('')\r\n\t\t\tsetIsLoading(true)\r\n\t\t\tlet appointments = await fetchWeekAppointment().catch((error) => {\r\n\t\t\t\tsetError(error.message)\r\n\t\t\t\tsetIsLoading(false)\r\n\t\t\t})\r\n\r\n\t\t\tif (!appointments) {\r\n\t\t\t\tsetData([])\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\r\n\t\t\t//find the ealiest time of a day\r\n\t\t\tlet min = appointments.length ? appointments[0].minuteStart : 0\r\n\r\n\t\t\tfor (let i = 1; i < appointments.length; i++) {\r\n\t\t\t\tif (appointments[i].minuteStart < min) {\r\n\t\t\t\t\tmin = appointments[i].minuteStart\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// find the index of time to be used in calendar\r\n\t\t\tlet indexToUse = Math.floor(min / 30)\r\n\t\t\tconst TIME = ['12:00 AM', '12:30 AM', '1:00 AM', '1:30 AM', '2:00 AM', '2:30 AM', '3:00 AM', '3:30 AM', '4:00 AM', '4:30 AM', '5:00 AM', '5:30 AM', '6:00 AM', '6:30 AM', '7:00 AM', '7:30 AM', '8:00 AM', '8:30 AM', '9:00 AM', '9:30 AM', '10:00 AM', '10:30 AM', '11:00 AM', '11:30 AM', '12:00 PM', '12:30 PM', '1:00 PM', '1:30 PM', '2:00 PM', '2:30 PM', '3:00 PM', '3:30 PM', '4:00 PM', '4:30 PM', '5:00 PM', '5:30 PM', '6:00 PM', '6:30 PM', '7:00 PM', '7:30 PM', '8:00 PM', '8:30 PM', '9:00 PM', '9:30 PM', '10:00 PM', '10:30 PM', '11:00 PM', '11:30 PM']\r\n\t\t\tlet timeCol = TIME.splice(indexToUse)\r\n\r\n\t\t\t// create 2D array to store each row (timeCol.length * 8)\r\n\t\t\tlet preparingData = new Array(timeCol.length)\r\n\r\n\t\t\tfor (let i = 0; i < preparingData.length; i++) {\r\n\t\t\t\tpreparingData[i] = ['', '', '', '', '', '', '', '']\r\n\t\t\t}\r\n\r\n\t\t\t// store time in first index of all data's index\r\n\t\t\tfor (let i = 0; i < preparingData.length; i++) {\r\n\t\t\t\tpreparingData[i][0] = {\r\n\t\t\t\t\ttype: 'time',\r\n\t\t\t\t\tdata: timeCol[i]\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tlet startDate = new Date(week[0])\r\n\t\t\tlet endDate = new Date(startDate)\r\n\t\t\tendDate.setDate(endDate.getDate() + 7)\r\n\r\n\t\t\t// store appointment in 2D array\r\n\t\t\tappointments.forEach(appt => {\r\n\t\t\t\tlet duration = appt.duration\r\n\t\t\t\tlet aDate = new Date(appt.appointmentStart)\r\n\r\n\t\t\t\tif (aDate >= startDate && aDate < endDate) {\r\n\t\t\t\t\tlet colIndex = aDate.getDay() + 1 //first column is time, thus add 1\r\n\r\n\t\t\t\t\t// find a row to push appt in\r\n\t\t\t\t\tlet rowIndex = Math.floor((appt.minuteStart - min) / 30)\r\n\r\n\t\t\t\t\tpreparingData[rowIndex][colIndex] = {\r\n\t\t\t\t\t\ttype: 'appointment',\r\n\t\t\t\t\t\tdata: appt\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// span row will overlap - assign the following rows in the same column to be blank when draw table\r\n\t\t\t\t\tlet numSpan = Math.floor(duration / 30) - 1 // subtract one because first row already assign\r\n\r\n\t\t\t\t\tfor (let i = 0; i < numSpan; i++) {\r\n\t\t\t\t\t\tpreparingData[++rowIndex][colIndex] = {\r\n\t\t\t\t\t\t\ttype: 'spanned'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\t\t\tsetIsLoading(false)\r\n\t\t\tsetError('')\r\n\t\t\tsetData(preparingData)\r\n\t\t}\r\n\r\n\t\tprocessWeekAppointment()\r\n\r\n\t}, [week, dummy])\r\n\r\n\tconst refresh = () => {\r\n\t\tsetDummy(dummy + 1)\r\n\t}\r\n\r\n\tconst dateToMinuteStart = (date) => {\r\n\t\treturn date.getHours() * 60 + date.getMinutes()\r\n\t}\r\n\r\n\tconst handleWeekChange = (numWeek) => {\r\n\t\tlet d = new Date(date)\r\n\t\td.setDate(d.getDate() + (7 * numWeek))\r\n\r\n\t\tlet dDisplay = new Date(dateInputDisplay)\r\n\t\tdDisplay.setDate(dDisplay.getDate() + (7 * numWeek))\r\n\r\n\t\tsetDateInputDisplay(formatDate2(dDisplay))\r\n\t\tsetDate(d)\r\n\t}\r\n\r\n\tconst formatDate = (datevalue) => {\r\n\t\tlet date = new Date(datevalue),\r\n\t\t\tday = date.getDate(),\r\n\t\t\tmonth = date.getMonth(),\r\n\t\t\tyear = date.getFullYear(),\r\n\t\t\tmonths = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],\r\n\t\t\tweeks = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],\r\n\t\t\tdayOfWeek = date.getDay()\r\n\r\n\t\treturn weeks[dayOfWeek] + ' ' + day + ' ' + months[month] + ' ' + year;\r\n\t}\r\n\r\n\tconst minutesToHhMmAPmString = (minutes) => {\r\n\t\tlet hours = Math.floor(minutes / 60)\r\n\t\tconst suffix = hours >= 12 ? \"PM\" : \"AM\"\r\n\t\tlet minutePart = ((minutes % 60) + '0').substring(0, 2)\r\n\t\thours = `${((hours + 11) % 12 + 1)}:${minutePart} ${suffix}`\r\n\t\treturn hours\r\n\t}\r\n\r\n\tconst convertDateAndTimeRangeString = (date, duration) => {\r\n\t\tlet start_time_string = minutesToHhMmAPmString(Math.floor(date.getHours()) * 60 + date.getMinutes())\r\n\t\tlet end_time_string = minutesToHhMmAPmString(Math.floor(date.getHours()) * 60 + date.getMinutes() + duration)\r\n\r\n\t\treturn `${start_time_string} - ${end_time_string}`\r\n\t}\r\n\r\n\tconst handleApptClicked = (e) => {\r\n\t\te.preventDefault()\r\n\t\tsetSelectedAppt(e.currentTarget.id)\r\n\t}\r\n\r\n\tfunction formatDate2(date) {\r\n\t\tvar d = new Date(date),\r\n\t\t\tmonth = '' + (d.getMonth() + 1),\r\n\t\t\tday = '' + d.getDate(),\r\n\t\t\tyear = d.getFullYear();\r\n\r\n\t\tif (month.length < 2)\r\n\t\t\tmonth = '0' + month;\r\n\t\tif (day.length < 2)\r\n\t\t\tday = '0' + day;\r\n\r\n\t\treturn [year, month, day].join('-');\r\n\t}\r\n\r\n\t// <div style={{ textAlign: \"center\" }}>\r\n\t// \t<button onClick={decrementYear} className=\"float-start arrow-spinner\" >\r\n\t// \t\t<FaAngleLeft size={25} />\r\n\t// \t</button>\r\n\t// \t<span style={{ fontSize: 20 }}>{year}</span>\r\n\t// \t<button onClick={incrementYear} className=\"float-end arrow-spinner\">\r\n\t// \t\t<FaAngleRight size={25} />\r\n\t// \t</button>\r\n\t// </div>\r\n\t// <button onClick={decrementYear} className=\"float-start arrow-spinner\" >\r\n\t// \t<FaAngleLeft size={25} />\r\n\t// </button>\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t{\r\n\t\t\t\terror &&\r\n\t\t\t\t<div className=\"alert alert-danger\" role=\"alert\">\r\n\t\t\t\t\t{error}\r\n\t\t\t\t</div>\r\n\t\t\t}\r\n\t\t\t<div className=\"mx-auto text-center\" style={{ overflowY: \"auto\", maxHeight: \"100vh\" }}>\r\n\t\t\t\t<div className=\"mw-1000 mx-auto my-3\">\r\n\t\t\t\t\t<input type=\"date\" value={dateInputDisplay}\r\n\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\tlet d = new Date(e.target.value)\r\n\t\t\t\t\t\t\tsetDateInputDisplay(formatDate2(d))\r\n\t\t\t\t\t\t\tchangeInputDateToFirstDayOfWeek(d)\r\n\t\t\t\t\t\t\tsetDate(d)\r\n\t\t\t\t\t\t}} />\r\n\r\n\r\n\r\n\r\n\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"mw-1000 mx-auto\" style={{ overflowX: \"scroll\", maxHeight: \"90vh\" }}>\r\n\t\t\t\t\t<table className=\"calendar\" style={isLoading ? { backgroundColor: \"#efefef\" } : {}}>\r\n\t\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t<th className=\"header-fixed\" style={{ maxWidth: 60, padding: 5 }}>\r\n\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t<button className=\"float-start circle\" onClick={() => handleWeekChange(-1)}>\r\n\t\t\t\t\t\t\t\t\t\t\t<FaAngleLeft size={25} />\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t<button className=\"refresh\">\r\n\t\t\t\t\t\t\t\t\t\t\t<GrRefresh title=\"refresh\" color=\"white\" onClick={() => refresh()} />\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t<button className=\"float-end circle\" onClick={() => handleWeekChange(1)}>\r\n\t\t\t\t\t\t\t\t\t\t\t<FaAngleRight size={25} />\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tweek.map((day, index) => {\r\n\t\t\t\t\t\t\t\t\t\tlet [w, d, m, y] = formatDate(day).split(' ')\r\n\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t<th className=\"head-fixed\" key={index}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<p>{w}</p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<p>{d} {m} {y}</p>\r\n\t\t\t\t\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t</thead>\r\n\t\t\t\t\t\t<tbody >\r\n\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t<th className=\"header-fixed\"></th>\r\n\t\t\t\t\t\t\t\t<td colSpan={7} style={{ height: \"20px\" }}></td>\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tdata.map((row, index) => {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<tr key={index}>\r\n\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\trow.map((col, index) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tswitch (col.type) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'appointment':\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlet appt = col.data\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td className=\"td-with-data\" rowSpan={Math.floor(appt.duration / 30)} key={index}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div id={appt.appointmentId} onClick={handleApptClicked}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p>{convertDateAndTimeRangeString(appt.appointmentStart, appt.duration)}</p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p>{appt.lessonName}</p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p>{appt.customerName}</p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p>{appt.duration} minutes</p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p>{appt.appointmentId}</p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'time':\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th className=\"header-fixed\" key={index} style={{ verticalAlign: \"top\" }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div style={{ minHeight: 25 }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"time\" style={{ position: \"absolute\", top: -12, right: 5 }}>{col.data}</p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'spanned':\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn null\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td key={index}></td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t</table>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t{\r\n\t\t\t\tselectedAppt &&\r\n\t\t\t\t<AppModal\r\n\t\t\t\t\tshow={selectedAppt ? true : false}\r\n\t\t\t\t\tonClose={() => setSelectedAppt('')}\r\n\t\t\t\t\ttitle={`Appointment: ${selectedAppt}`}>\r\n\t\t\t\t\t<Appointment\r\n\t\t\t\t\t\tid={selectedAppt}\r\n\t\t\t\t\t\tonUpdate={() => {\r\n\t\t\t\t\t\t\trefresh()\r\n\t\t\t\t\t\t\tsetSelectedAppt('')\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</AppModal>\r\n\t\t\t}\r\n\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Calendar\r\n","import React, { useState, useRef, useEffect } from 'react'\r\nimport { API_URL } from '../JS/variables'\r\n\r\nfunction ChangePassword() {\r\n\tconst mountedRef = useRef(true)\r\n\tconst [openPwdArea, setOpenPwdArea] = useState(false)\r\n\tconst [currentPwd, setCurrentPwd] = useState('')\r\n\tconst [newPwd, setNewPwd] = useState('')\r\n\tconst [newPwdConfirm, setNewPwdConfirm] = useState('')\r\n\tconst [success, setSuccess] = useState(false)\r\n\tconst [errors, setErrors] = useState([])\r\n\tconst [loading, setLoading] = useState(false)\r\n\r\n\r\n\tuseEffect(() => {\r\n\t\treturn () => {\r\n\t\t\tmountedRef.current = false\r\n\t\t}\r\n\t}, [])\r\n\r\n\tconst resetFormState = () => {\r\n\t\tsetCurrentPwd('')\r\n\t\tsetNewPwd('')\r\n\t\tsetNewPwdConfirm('')\r\n\t}\r\n\r\n\tconst resetAllState = () => {\r\n\t\tresetFormState()\r\n\t\tsetSuccess(false)\r\n\t\tsetErrors([])\r\n\t\tsetLoading(false)\r\n\t}\r\n\r\n\tconst handleChangePassword = (e) => {\r\n\t\te.preventDefault()\r\n\t\tconsole.log(`current: ${currentPwd}`)\r\n\t\tconsole.log(`pwd: ${newPwd}`)\r\n\t\tconsole.log(`confirm pwd: ${newPwdConfirm}`)\r\n\t\tconst requestOptions = {\r\n\t\t\tmethod: 'POST',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t'Accept': 'application/json',\r\n\t\t\t},\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\tcurrentPwd: currentPwd,\r\n\t\t\t\tnewPwd: newPwd,\r\n\t\t\t\tnewPwdConfirm: newPwdConfirm\r\n\t\t\t}),\r\n\t\t\tcredentials: 'include'\r\n\t\t}\r\n\r\n\t\tsetSuccess(false)\r\n\t\tsetErrors([])\r\n\t\tsetLoading(true)\r\n\r\n\t\tfetch(`${API_URL}/api/auth/changepassword`, requestOptions)\r\n\t\t\t.then(res => res.json())\r\n\t\t\t.then(data => {\r\n\t\t\t\tif (!mountedRef.current) return null\r\n\t\t\t\tif (!data.success) {\r\n\t\t\t\t\tsetErrors(data.message)\r\n\t\t\t\t\tsetLoading(false)\r\n\t\t\t\t\tsetSuccess(false)\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tsetLoading(false)\r\n\t\t\t\tsetSuccess(true)\r\n\t\t\t\tsetErrors([])\r\n\t\t\t\tresetFormState()\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (!mountedRef.current) return null\r\n\t\t\t\tsetErrors([error.message])\r\n\t\t\t\tsetLoading(false)\r\n\t\t\t\tsetSuccess(false)\r\n\t\t\t})\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<p><b>Password</b><span className=\"clickable\" onClick={() => {\r\n\t\t\t\tsetOpenPwdArea(!openPwdArea)\r\n\r\n\t\t\t\t// Reset state\r\n\r\n\t\t\t}}>change password</span></p>\r\n\t\t\t<div className=\"subform\" style={{ display: openPwdArea ? 'block' : 'none' }}>\r\n\t\t\t\t<form onSubmit={handleChangePassword}>\r\n\t\t\t\t\t<div className=\"mb-3\">\r\n\t\t\t\t\t\t<label htmlFor=\"currentPwd\" className=\"form-label\">CURRENT PASSWORD</label>\r\n\t\t\t\t\t\t<input className=\"form-control\" type=\"password\" name=\"currentPwd\" id=\"currentPwd\" value={currentPwd}\r\n\t\t\t\t\t\t\tonChange={(e) => setCurrentPwd(e.target.value)} required\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"mb-3\">\r\n\t\t\t\t\t\t<label htmlFor=\"newPwd\" className=\"form-label\">NEW PASSWORD</label>\r\n\t\t\t\t\t\t<input className=\"form-control\" type=\"password\" name=\"newPwd\" id=\"newPwd\" value={newPwd}\r\n\t\t\t\t\t\t\tonChange={(e) => setNewPwd(e.target.value)} required\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"mb-3\">\r\n\t\t\t\t\t\t<label htmlFor=\"newPwdConfirm\" className=\"form-label\">CONFIRM NEW PASSWORD</label>\r\n\t\t\t\t\t\t<input className=\"form-control\" type=\"password\" name=\"newPwdConfirm\" id=\"newPwdConfirm\" value={newPwdConfirm}\r\n\t\t\t\t\t\t\tonChange={(e) => setNewPwdConfirm(e.target.value)} required\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\terrors.map((err, index) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<div key={index} className=\"alert alert-danger  show mt-3\" role=\"alert\">\r\n\t\t\t\t\t\t\t\t\t{err}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsuccess &&\r\n\t\t\t\t\t\t<div className=\"alert alert-success  show mt-3\" role=\"alert\">\r\n\t\t\t\t\t\t\tSuccessfully changed password.\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t}\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tloading ?\r\n\t\t\t\t\t\t\t<div style={{ display: \"flex\", justifyContent: \"flex-end\" }}>\r\n\t\t\t\t\t\t\t\t<button className=\"btn btn-primary\" type=\"button\" disabled>\r\n\t\t\t\t\t\t\t\t\t<span className=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\r\n\t\t\t\t\t\t\t\t\t<span className=\"sr-only\"> DONE</span>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t<div style={{ display: \"flex\", justifyContent: \"flex-end\" }}>\r\n\t\t\t\t\t\t\t\t<button className=\"btn btn-primary\" type=\"submit\">DONE</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t}\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default ChangePassword\r\n","import React, { useState, useEffect, useRef } from 'react'\r\nimport { API_URL } from '../JS/variables'\r\nimport ChangePassword from './ChangePassword'\r\n\r\nfunction AccountSettingPanel() {\r\n    const mountedRef = useRef(true)\r\n    const [email, setEmail] = useState('')\r\n    const [dummy, setDummy] = useState(0)\r\n\r\n    const [openEmailArea, setOpenEmailArea] = useState(false)\r\n    const [newEmail, setNewEmail] = useState('')\r\n    const [pwdForEmailChanging, setPwdForEmailChanging] = useState('')\r\n    const [eStep1Success, setEStep1Success] = useState('')\r\n    const [eStep1Error, setEStep1Error] = useState('')\r\n    const [eStep1Loading, setEStep1Loading] = useState(false)\r\n\r\n    const [code, setCode] = useState('')\r\n    const [eStep2Loading, setEStep2Loading] = useState(false)\r\n    const [eStep2Error, setEStep2Error] = useState('')\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            mountedRef.current = false\r\n        }\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        const requestOptions = {\r\n            method: 'GET',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Accept': 'application/json'\r\n            },\r\n            credentials: 'include'\r\n        }\r\n        fetch(`${API_URL}/api/auth/userinfo`, requestOptions)\r\n            .then(res => res.json())\r\n            .then(data => {\r\n                if (!mountedRef.current) return null\r\n                if (!data.success) {\r\n                    throw new Error(data.message)\r\n                }\r\n                setEmail(data.email)\r\n            })\r\n            .catch(error => {\r\n\r\n            })\r\n    }, [dummy])\r\n\r\n    const resetEState = () => {\r\n        setNewEmail('')\r\n        setPwdForEmailChanging('')\r\n        setEStep1Success('')\r\n        setEStep1Error('')\r\n        setEStep1Loading(false)\r\n\r\n        setCode('')\r\n        setEStep2Loading(false)\r\n        setEStep2Error('')\r\n    }\r\n\r\n    const handleRequestCode = (e) => {\r\n        e.preventDefault()\r\n        const requestOptions = {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Accept': 'application/json',\r\n            },\r\n            body: JSON.stringify({\r\n                currentEmail: email,\r\n                newEmail: newEmail,\r\n                password: pwdForEmailChanging\r\n            }),\r\n            credentials: 'include'\r\n        }\r\n\r\n        setEStep1Loading(true)\r\n        setEStep1Error('')\r\n        setEStep1Success('')\r\n\r\n        fetch(`${API_URL}/api/auth/changeemail/code`, requestOptions)\r\n            .then(res => res.json())\r\n            .then(data => {\r\n                if (!mountedRef.current) return null\r\n                if (!data.success) {\r\n                    throw new Error(data.message)\r\n                }\r\n                setEStep1Loading(false)\r\n                setEStep1Success(data.message)\r\n            })\r\n            .catch(error => {\r\n                console.log(error)\r\n                if (!mountedRef.current) return null\r\n                setEStep1Loading(false)\r\n                setEStep1Error(error.message)\r\n                setEStep1Success('')\r\n            })\r\n    }\r\n\r\n    const handleChangeEmail = (e) => {\r\n        e.preventDefault()\r\n        const requestOptions = {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Accept': 'application/json',\r\n            },\r\n            body: JSON.stringify({\r\n                code: code\r\n            }),\r\n            credentials: 'include'\r\n        }\r\n\r\n        setEStep2Loading(true)\r\n        setEStep2Error('')\r\n        fetch(`${API_URL}/api/auth/changeemail/change`, requestOptions)\r\n            .then(res => res.json())\r\n            .then(data => {\r\n                if (!mountedRef.current) return null\r\n                if (!data.success) {\r\n                    throw new Error(data.message)\r\n                }\r\n                resetEState()\r\n                setOpenEmailArea(false)\r\n                setDummy(dummy + 1)\r\n            })\r\n            .catch(error => {\r\n                console.log('in error')\r\n                if (!mountedRef.current) return null\r\n                console.log(error)\r\n                setEStep2Loading(false)\r\n                setEStep2Error(error.message)\r\n\r\n            })\r\n    }\r\n\r\n    return (\r\n        <div className=\"account-setting\">\r\n            <div className=\"mb-3 pb-3 bottom-border\">\r\n                <p><b>Email</b><span>{email}</span><span className=\"clickable\" onClick={() => {\r\n                    setOpenEmailArea(!openEmailArea)\r\n                    resetEState()\r\n                }}>change email</span></p>\r\n                {\r\n                    openEmailArea &&\r\n                    <div className=\"subform\">\r\n                        <form onSubmit={handleRequestCode}>\r\n                            <div className=\"mb-3\">\r\n                                <label htmlFor=\"email\" className=\"form-label\">NEW EMAIL</label>\r\n                                <input className=\"form-control\" type=\"email\" name=\"email\" id=\"email\"\r\n                                    onChange={(e) => setNewEmail(e.target.value)} required />\r\n                            </div>\r\n                            <div className=\"mb-3\">\r\n                                <label htmlFor=\"password\" className=\"form-label\">CURRENT PASSWORD</label>\r\n                                <input className=\"form-control\" type=\"password\" name=\"password\" id=\"password\"\r\n                                    onChange={(e) => setPwdForEmailChanging(e.target.value)} required\r\n                                />\r\n                            </div>\r\n\r\n                            {eStep1Error &&\r\n                                <div className=\"alert alert-danger  show mt-3\" role=\"alert\">\r\n                                    {eStep1Error}\r\n                                </div>\r\n                            }\r\n                            {\r\n                                eStep1Success &&\r\n                                <div className=\"alert alert-success  show mt-3\" role=\"alert\">\r\n                                    {eStep1Success}\r\n                                </div>\r\n                            }\r\n                            {\r\n                                eStep1Loading ?\r\n                                    <div style={{ display: \"flex\", justifyContent: \"flex-end\" }}>\r\n                                        <button className=\"btn btn-primary\" type=\"button\" disabled>\r\n                                            <span className=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\r\n                                            <span className=\"sr-only\">SEND PASSCODE TO NEW EMAIL.</span>\r\n                                        </button>\r\n                                    </div>\r\n                                    :\r\n                                    <div style={{ display: \"flex\", justifyContent: \"flex-end\" }}>\r\n                                    <button className=\"btn btn-primary\" type=\"submit\" >SEND PASSCODE TO NEW EMAIL</button>\r\n                                    </div>\r\n                            }\r\n                        </form>\r\n\r\n                        {/* {form to change email with code} */}\r\n                        {\r\n                            eStep1Success &&\r\n                            <div className=\"mt-3\">\r\n                                <form onSubmit={handleChangeEmail}>\r\n                                    <div className=\"mb-3\">\r\n                                        <label htmlFor=\"code\" className=\"form-label\">CODE</label>\r\n                                        <input className=\"form-control\" type=\"text\" name=\"code\" id=\"code\"\r\n                                            onChange={(e) => setCode(e.target.value)} required\r\n                                        />\r\n                                    </div>\r\n\r\n                                    {\r\n                                        eStep2Error &&\r\n                                        <div className=\"alert alert-danger  show mt-3\" role=\"alert\">\r\n                                            {eStep2Error}\r\n                                        </div>\r\n\r\n                                    }\r\n                                    {\r\n                                        eStep2Loading ?\r\n                                            <div style={{ display: \"flex\", justifyContent: \"flex-end\" }}>\r\n                                                <button className=\"btn btn-primary\" type=\"submit\" disabled>\r\n                                                    <span className=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\r\n                                                    <span className=\"sr-only\">DONE</span>\r\n                                                </button>\r\n                                            </div>\r\n                                            :\r\n                                            <div style={{ display: \"flex\", justifyContent: \"flex-end\" }}>\r\n                                                <button className=\"btn btn-primary\" type=\"submit\">DONE</button>\r\n                                            </div>\r\n                                    }\r\n                                </form>\r\n                            </div>\r\n                        }\r\n                    </div>\r\n                }\r\n            </div>\r\n\r\n            <ChangePassword />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default AccountSettingPanel\r\n","import React from 'react';\r\nimport { Switch, Route } from 'react-router-dom';\r\nimport Sidebar from './Sidebar';\r\nimport LessonPanel from './LessonPanel';\r\nimport Booking from './Booking';\r\nimport AvailabilityPanel from './AvailabilityPanel';\r\nimport Calendar from './Calendar';\r\nimport AccountSettingPanel from './AccountSettingPanel';\r\n\r\nfunction AdminPanel() {\r\n  return (\r\n    <div>\r\n      <div style={{ position: \"relative\" }}>\r\n        <Sidebar />\r\n        <div className=\"content-wrapper\">\r\n          <Switch>\r\n            <Route exact path=\"/\">\r\n              <Calendar />\r\n            </Route>\r\n            <Route path=\"/calendar\">\r\n              <Calendar />\r\n            </Route>\r\n            <Route path=\"/lesson\">\r\n              <LessonPanel />\r\n            </Route>\r\n            <Route path=\"/availability\">\r\n              <AvailabilityPanel />\r\n            </Route>\r\n            <Route path=\"/account\">\r\n              <AccountSettingPanel />\r\n            </Route>\r\n            <Route path=\"/booking\">\r\n              <Booking />\r\n            </Route>\r\n          </Switch>\r\n        </div>\r\n\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default AdminPanel\r\n","import React, { useState, useEffect, useContext } from 'react'\r\nimport { AppContext } from './AppContext'\r\nimport Cookies from 'js-cookie'\r\nimport { API_URL } from '../JS/variables'\r\n\r\nfunction Login() {\r\n    const { setUser } = useContext(AppContext)\r\n    const [email, setEmail] = useState('')\r\n    const [password, setPassword] = useState('')\r\n    const [isLoading, setIsLoading] = useState(false)\r\n    const [error, setError] = useState('')\r\n\r\n    const [forgotPassword, setForgotPassword] = useState(false)\r\n    const [requestCodeLoading, setRequestCodeLoading] = useState(false)\r\n    const [requestCodeError, setRequestCodeError] = useState('')\r\n    const [codeRequestSuccess, setCodeRequestSuccess] = useState(false)\r\n\r\n    const [newPwd, setNewPwd] = useState('')\r\n    const [newPwdConfirm, setNewPwdConfirm] = useState('')\r\n    const [code, setCode] = useState('')\r\n    const [newPwdErrors, setNewPwdErrors] = useState([])\r\n    const [newPwdLoading, setNewPwdLoading] = useState(false)\r\n    const [newPwdSuccess, setNewPwdSuccess] = useState(false)\r\n\r\n\r\n    useEffect(() => {\r\n        // document.body.style = \"background: #f29a04\"\r\n\r\n        // return () => {\r\n        //     document.body.style = { background: \"#eee\" }  //whenever the component removes it will executes\r\n        // }\r\n    }, [])\r\n\r\n    const handleLogin = (e) => {\r\n        e.preventDefault()\r\n        const requestOptions = {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Accept': 'application/json',\r\n            },\r\n            body: JSON.stringify({\r\n                email: email,\r\n                password: password\r\n            }),\r\n            credentials: 'include'\r\n        }\r\n        setIsLoading(true)\r\n        setError(false)\r\n\r\n        fetch(`${API_URL}/api/auth/login`, requestOptions)\r\n            .then((res) => {\r\n                console.log(res)\r\n\r\n                return res\r\n            })\r\n            .then(res => res.json())\r\n            .then(data => {\r\n                if (!data.success) {\r\n                    throw new Error(data.message)\r\n                }\r\n                Cookies.set('loggedIn', true)\r\n                setUser({ loggedIn: true })\r\n            })\r\n            .catch(error => {\r\n                console.log(error)\r\n                setIsLoading(false)\r\n                setError(error.message)\r\n            })\r\n    }\r\n\r\n    const handleRequestResetPwdCode = () => {\r\n        if (!email) {\r\n            setRequestCodeError('Require your login email.')\r\n            return\r\n        }\r\n\r\n        const requestOptions = {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Accept': 'application/json',\r\n            },\r\n            body: JSON.stringify({\r\n                email: email\r\n            })\r\n        }\r\n\r\n        setRequestCodeError('')\r\n        setRequestCodeLoading(true)\r\n        setCodeRequestSuccess(false)\r\n\r\n        fetch(`${API_URL}/api/auth/requestresetpasswordcode`, requestOptions)\r\n            .then(res => res.json())\r\n            .then(data => {\r\n                if (!data.success) {\r\n                    throw new Error(data.message)\r\n                }\r\n                setRequestCodeError('')\r\n                setRequestCodeLoading(false)\r\n                setCodeRequestSuccess(true)\r\n            })\r\n            .catch(error => {\r\n                console.log(error)\r\n                setRequestCodeError(error.message)\r\n                setRequestCodeLoading(false)\r\n            })\r\n    }\r\n\r\n    const validatePassword = (password) => {\r\n        const pwdError = []\r\n        if (password.length < 8) {\r\n            pwdError.push('Password length must be atleast 8 characters.')\r\n        } else if (password.length > 20) {\r\n            pwdError.push('Password length must not exceed 20 characters.')\r\n        }\r\n\r\n        let re = /(?=.*[a-z])/\r\n        if (!re.test(password)) {\r\n            pwdError.push('Password must contain atleast 1 lowercase alphabetical character')\r\n        }\r\n\r\n        re = /(?=.*[A-Z])/\r\n        if (!re.test(password)) {\r\n            pwdError.push('Password must contain at least 1 uppercase alphabetical character')\r\n        }\r\n\r\n        re = /(?=.*[0-9])/\r\n        if (!re.test(password)) {\r\n            pwdError.push('Password must contain at least 1 numeric character')\r\n        }\r\n\r\n        return pwdError\r\n\r\n    }\r\n\r\n    const handleChangePassword = (e) => {\r\n        e.preventDefault()\r\n        const inputErrors = validatePassword(newPwd)\r\n        if (newPwd !== newPwdConfirm) {\r\n            inputErrors.push('Passwords do not match.')\r\n        }\r\n\r\n        if (inputErrors.length) {\r\n            setNewPwdErrors(inputErrors)\r\n            return\r\n        }\r\n\r\n        //fetch\r\n        const requestOptions = {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Accept': 'application/json',\r\n            },\r\n            body: JSON.stringify({\r\n                pwd: newPwd,\r\n                pwdConfirm: newPwdConfirm,\r\n                code: code\r\n            })\r\n        }\r\n\r\n        setNewPwdErrors([])\r\n        setNewPwdLoading(true)\r\n        setNewPwdSuccess(false)\r\n\r\n        fetch(`${API_URL}/api/auth/resetpasswordbycode`, requestOptions)\r\n            .then(res => res.json())\r\n            .then(data => {\r\n                console.log(data)\r\n                if (!data.success) {\r\n                    if (Array.isArray(data.message)) {\r\n                        setNewPwdErrors(data.message)\r\n                    } else {\r\n                        setNewPwdErrors([data.message])\r\n                    }\r\n                    setNewPwdLoading(false)\r\n                    setNewPwdSuccess(false)\r\n                    return\r\n                }\r\n                setNewPwdErrors([])\r\n                setNewPwdLoading(false)\r\n                setNewPwdSuccess(true)\r\n            })\r\n            .catch(error => {\r\n                console.log(error)\r\n                setNewPwdErrors([error.message])\r\n                setNewPwdLoading(false)\r\n                setNewPwdSuccess(false)\r\n            })\r\n    }\r\n\r\n    return (\r\n        <div >\r\n            <div className=\"row\">\r\n                <div className=\"col-0 col-md-3 col-xl-4\"></div>\r\n                <div className=\"col-12 col-md-6 col-xl-4 mt-5 px-0\" style={{ border: \"1px solid rgb(224, 224, 224)\" }}>\r\n                    <div >\r\n                        <form\r\n                            onSubmit={handleLogin}>\r\n                            <div style={{ margin: 20 }}>\r\n                                <div className=\"mb-3\">\r\n                                    <label htmlFor=\"email\" className=\"form-label\">Email</label>\r\n                                    <input className=\"form-control\" type=\"email\" name=\"email\" id=\"email\"\r\n                                        onChange={(e) => setEmail(e.target.value)} required />\r\n                                </div>\r\n\r\n                                <div className=\"mb-3\">\r\n                                    <label htmlFor=\"password\" className=\"form-label\">Password</label>\r\n                                    <input className=\"form-control\" type=\"password\" name=\"password\" id=\"password\"\r\n                                        onChange={(e) => setPassword(e.target.value)} required\r\n                                    />\r\n                                </div>\r\n\r\n                                {error &&\r\n                                    <div className=\"alert alert-danger  show mt-3\" role=\"alert\">\r\n                                        {error}\r\n                                    </div>\r\n                                }\r\n                                {\r\n                                    isLoading ?\r\n                                        <button className=\"btn btn-primary\" type=\"submit\" style={{ width: \"100%\" }} disabled>\r\n                                            <span className=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\r\n                                            <span className=\"sr-only\">Loading...</span>\r\n                                        </button>\r\n                                        :\r\n                                        <button className=\"btn btn-primary\" type=\"submit\" style={{ width: \"100%\" }}>Login</button>\r\n                                }\r\n                            </div>\r\n                        </form>\r\n\r\n                        {/* {forgot password} */}\r\n                        <div className=\"px-3\" style={{ background: \"rgb(238, 238, 238)\" }}>\r\n                            <div className=\"mt-4\" style={{ display: \"flex\", justifyContent: \"flex-end\", alignItems: \"center\", paddingRight: 15, height: 50 }}>\r\n                                <p style={{ color: \"rgb(88, 88, 88)\", textDecoration: \"underline\" }} onClick={() => setForgotPassword(true)}>forgot password?</p>\r\n                            </div>\r\n                            {\r\n                                forgotPassword &&\r\n                                <div style={{ padding: 10 }}>\r\n                                    <p>Type email in the field above then submit. We will send reset password code to your email.</p>\r\n\r\n                                    {requestCodeError &&\r\n                                        <div className=\"alert alert-danger  show mt-3\" role=\"alert\">\r\n                                            {requestCodeError}\r\n                                        </div>\r\n                                    }\r\n                                    {\r\n                                        codeRequestSuccess &&\r\n                                        <div className=\"alert alert-success  show mt-3\" role=\"alert\">\r\n                                            Reset password code has been sent to your email. Use that code to reset password.\r\n                                        </div>\r\n                                    }\r\n                                    {\r\n                                        requestCodeLoading ?\r\n                                            <div style={{ display: \"flex\", justifyContent: \"flex-end\" }}>\r\n                                                <button className=\"btn btn-warning\" type=\"button\" disabled>\r\n                                                    <span className=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\r\n                                                    <span className=\"sr-only\"> send code</span>\r\n                                                </button>\r\n                                            </div>\r\n                                            :\r\n                                            <div style={{ display: \"flex\", justifyContent: \"flex-end\" }}>\r\n                                                <button className=\"btn btn-warning\" type=\"button\" onClick={() => handleRequestResetPwdCode()}>send code</button>\r\n                                            </div>\r\n                                    }\r\n\r\n                                    {/* {form to reset password} */}\r\n                                    {\r\n                                        codeRequestSuccess &&\r\n                                        <div>\r\n                                            <form onSubmit={handleChangePassword}>\r\n                                                <div className=\"mb-3\">\r\n                                                    <label htmlFor=\"pwd1\" className=\"form-label\">new password</label>\r\n                                                    <input className=\"form-control\" type=\"password\" name=\"pwd1\" id=\"pwd1\"\r\n                                                        onChange={(e) => setNewPwd(e.target.value)} required\r\n                                                    />\r\n                                                </div>\r\n                                                <div className=\"mb-3\">\r\n                                                    <label htmlFor=\"pwd2\" className=\"form-label\">confirm password</label>\r\n                                                    <input className=\"form-control\" type=\"password\" name=\"pwd2\" id=\"pwd2\"\r\n                                                        onChange={(e) => setNewPwdConfirm(e.target.value)} required\r\n                                                    />\r\n                                                </div>\r\n                                                <div className=\"mb-3\">\r\n                                                    <label htmlFor=\"code\" className=\"form-label\">code</label>\r\n                                                    <input className=\"form-control\" type=\"text\" name=\"code\" id=\"code\"\r\n                                                        onChange={(e) => setCode(e.target.value)} required\r\n                                                    />\r\n                                                </div>\r\n\r\n                                                {newPwdErrors &&\r\n                                                    newPwdErrors.map((err, index) => {\r\n                                                        return (\r\n                                                            <div key={index} className=\"alert alert-danger  show mt-3\" role=\"alert\">\r\n                                                                {err}\r\n                                                            </div>\r\n                                                        )\r\n                                                    })\r\n                                                }\r\n                                                {\r\n                                                    newPwdSuccess &&\r\n                                                    <div className=\"alert alert-success  show mt-3\" role=\"alert\">\r\n                                                        Successful. You can now login with the new password.\r\n                                                    </div>\r\n                                                }\r\n                                                {\r\n                                                    newPwdLoading ?\r\n                                                        <div style={{ display: \"flex\", justifyContent: \"flex-end\" }}>\r\n                                                            <button className=\"btn btn-primary\" type=\"button\" disabled>\r\n                                                                <span className=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\r\n                                                                <span className=\"sr-only\"> change password</span>\r\n                                                            </button>\r\n                                                        </div>\r\n                                                        :\r\n                                                        <div style={{ display: \"flex\", justifyContent: \"flex-end\" }}>\r\n                                                            <button className=\"btn btn-primary\" type=\"submit\">change password</button>\r\n                                                        </div>\r\n                                                }\r\n                                            </form>\r\n                                        </div>\r\n                                    }\r\n\r\n                                </div>\r\n                            }\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Login","import React from 'react'\r\nimport { EatLoading } from 'react-loadingg'\r\n\r\nfunction Loading() {\r\n    return (\r\n        <div>\r\n            <EatLoading size=\"40\" />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Loading\r\n","import './App.css';\nimport React, { useState, useEffect } from 'react'\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom'\nimport AdminPanel from './components/AdminPanel'\nimport Login from './components/Login'\nimport { AppContext } from './components/AppContext';\nimport Cookies from 'js-cookie'\nimport Loading from './components/Loading';\n//logged_in\n\n\nfunction App() {\n  const [user, setUser] = useState(null)\n  const [isLoading, setIsLoading] = useState(true)\n\n  useEffect(() => {\n    if (Cookies.get('loggedIn')) {\n      setUser({ loggedIn: true })\n    }\n\n    setIsLoading(false)\n  }, [])\n\n  return (\n    <AppContext.Provider value={{ user, setUser }} >\n      <div>\n        <Router basename={'admin'}>\n          {\n            isLoading ?\n              <Loading />\n\n              :\n\n              user ?\n                <AdminPanel />\n                :\n\n                <Login />\n\n          }\n        </Router>\n      </div>\n    </AppContext.Provider>\n  );\n}\n\n\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}