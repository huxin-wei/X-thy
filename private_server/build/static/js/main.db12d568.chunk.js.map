{"version":3,"sources":["components/AppContext.jsx","components/Sidebar.jsx","JS/variables.js","components/CreateLessonForm.jsx","components/Lesson.jsx","components/LessonPanel.jsx","components/DatePicker.jsx","components/TimeOffer.jsx","components/ClassOffer.jsx","components/Booking.jsx","components/CreateAvailabilityForm.jsx","components/Availability.jsx","components/AvailabilityPanel.jsx","components/AppModal.jsx","components/Appointment.jsx","components/Calendar.jsx","components/AdminPanel.jsx","components/Login.jsx","components/Loading.jsx","App.js","index.js"],"names":["AppContext","createContext","Sidebar","setUser","useContext","size","className","title","activeClassName","to","onClick","fetch","method","headers","credentials","then","res","json","data","success","Error","message","Cookies","remove","catch","error","console","log","API_URL","CreateLessonForm","props","useState","lessonName","setLessonName","description","setDescription","price30m","setPrice30m","price60m","setPrice60m","loading","setLoading","setError","mountedRef","useRef","useEffect","current","onSubmit","e","preventDefault","requestOptions","body","JSON","stringify","lesson","ok","status","handleClose","signalAddSuccess","err","htmlFor","length","onChange","target","value","type","id","style","height","Math","min","scrollHeight","rows","maxLength","wrap","test","role","width","margin","disabled","Lesson","lessonId","removeLesson","isLoading","setIsLoading","fontSize","LessonPanel","lessons","setLessons","showForm","setShowForm","addSuccess","setAddSuccess","dummy","setDummy","filter","lesson_id","setTimeout","textAlign","color","map","lesson_name","price_30m","price_60m","MONTH","month","WEEK","DatePicker","date","setDate","setMonth","year","setYear","selectedMonth","setSelectedMonth","selectedYear","setSelectedYear","dates","setDates","handleDateChange","onDateChange","resetCalendar","newDates","today","Date","dayOfMonthAtStart","getDay","numObj","getDate","currentDate","i","theDate","obj","upComming","checkFutureDay","checkSameDay","push","date1","date2","getMonth","getFullYear","thresholdDate","monthHandle","parseInt","onSelectDateHandle","display","borderBottom","monthObj","aDay","index","aDate","upcommingCSS","currentCSS","TimeOffer","fetchErrors","setFetchErrors","times","setTimes","fullDate","day","toUTCString","duration","Array","isArray","time","HHMMAPMstr","minutes","hours","floor","suffix","minutePart","substring","minutesToHhMmAPmString","onTimeSelected","ClassOffer","selectedLessonId","setSelectedLessonId","selectLesson","initDate","initMonth","initYear","INIT_FULLDATE","Booking","name","setName","email","setEmail","phone","setPhone","note","setNote","setDuration","setFullDate","setLesson","fullTime","setFullTime","submitErrors","setSubmitErrors","bookingSuccess","setBookingSuccess","handleSubmit","errors","d","maxWidth","padding","defaultValue","required","colSpan","verticalAlign","CrateAvailabilityForm","isChecked","selectedDays","setSelectedDays","dateError","dayError","setDayError","fromH","setFromH","fromM","setFromM","fromAP","setFromAP","toH","setToH","toM","setToM","toAP","setToAP","getSelectedDaysValue","val","onSelectedDayChange","checked","timeFrom","timeTo","days","marginTop","Availability","availability","removeAvailability","start_time","start_minute","end_time","end_minute","week","minWidth","getAvailDisplay","availability_id","AvailabilityPanel","availabilities","setAvailabilities","compare","a","b","sort","CreateAvailabilityForm","avail","AppModal","show","onClose","children","document","addEventListener","closeOnEscapeKeyDown","removeEventListener","keyCode","stopPropagation","Appointment","onUpdate","appointment","setAppointment","cancelText","setCancelText","cancelLoading","setCancelLoading","setCancelError","m","y","start_time_string","getHours","getMinutes","end_time_string","convertDateAndTimeRangeString","appointment_start","appointment_id","customer_name","customer_email","customer_phone","fee","placeholder","Calendar","setWeek","setData","selectedAppt","setSelectedAppt","TIME","aWeek","beginDate","n","fetchWeekAppointment","appointments","minuteStart","indexToUse","timeCol","splice","preparingData","startDate","saturday","endDate","forEach","appt","appointmentStart","colIndex","rowIndex","numSpan","Promise","resolve","reject","appointmentId","customerName","dateToMinuteStart","refresh","handleChangeWeek","numWeek","handleApptClicked","currentTarget","overflowY","maxHeight","overflowX","datevalue","formatDate","split","w","row","col","rowSpan","minHeight","position","top","right","Upload","AdminPanel","exact","path","Login","user","password","setPassword","background","set","cookie","loggedIn","Loading","App","get","Provider","basename","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.db12d568.chunk.js","sourcesContent":["import {createContext} from 'react'\r\n\r\nexport const AppContext = createContext({})","import React, {useContext} from 'react'\r\nimport { Link, Router, NavLink } from 'react-router-dom'\r\nimport { GiSpellBook, GiTeacher, GiBookmark } from \"react-icons/gi\";\r\nimport {GoCalendar} from \"react-icons/go\"\r\nimport { ImUpload2 } from 'react-icons/im'\r\nimport { RiLogoutBoxRLine } from 'react-icons/ri'\r\nimport Cookies from 'js-cookie'\r\nimport {AppContext} from './AppContext'\r\n\r\nconst url = 'http://localhost:3001'\r\n\r\nfunction Sidebar() {\r\n    const {setUser} = useContext(AppContext)\r\n    const size = 25\r\n\r\n    const logout = () => {\r\n        const requestOptions = {\r\n\t\t\tmethod: 'POST',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t'Accept': 'application/json'\r\n\t\t\t},\r\n            credentials: 'include'\r\n            \r\n\t\t}\r\n        fetch(`${url}/api/auth/logout`, requestOptions)\r\n            .then(res => res.json())\r\n            .then(data => {\r\n                if(!data.success){\r\n                    throw new Error(data.message)\r\n                }\r\n                Cookies.remove('loggedIn')\r\n                Cookies.remove('email')\r\n                setUser(null)\r\n            })\r\n            .catch(error => {\r\n                console.log(error.message)\r\n                setUser(null)\r\n            })\r\n    }\r\n    return (\r\n        <div className=\"sidebar-wrapper\" >\r\n            <div className=\"sidebar-upper-wrapper\">\r\n                <ul>\r\n                    <li data-toggle=\"tooltip\" data-placement=\"right\" title=\"calendar\">\r\n                        <NavLink\r\n                            activeClassName=\"sidebar-link--active\"\r\n                            className=\"sidebar-link\"\r\n                            to=\"/calendar\">\r\n                            <GoCalendar size={size} />\r\n                            <p>Calendar</p>\r\n                        </NavLink>\r\n                    </li>\r\n                    <li data-toggle=\"tooltip\" data-placement=\"right\" title=\"manage guitar lessons\">\r\n                        <NavLink\r\n                            activeClassName=\"sidebar-link--active\"\r\n                            className=\"sidebar-link\"\r\n                            to=\"/lesson\">\r\n                            <GiSpellBook size={size} />\r\n                            <p>Lesson</p>\r\n\r\n                        </NavLink>\r\n                    </li>\r\n                    <li data-toggle=\"tooltip\" data-placement=\"right\" title=\"manage my availability\">\r\n                        <NavLink\r\n                            activeClassName=\"sidebar-link--active\"\r\n                            className=\"sidebar-link\"\r\n                            to=\"/availability\">\r\n                            <GiTeacher size={size} />\r\n                            <p>Availability</p>\r\n\r\n                        </NavLink>\r\n                    </li>\r\n                    <li data-toggle=\"tooltip\" data-placement=\"right\" title=\"book an appointment\">\r\n                        <NavLink\r\n                            activeClassName=\"sidebar-link--active\"\r\n                            className=\"sidebar-link\"\r\n                            to=\"/booking\">\r\n                            <GiBookmark size={size} />\r\n                            <p>Book appointment</p>\r\n\r\n                        </NavLink>\r\n                    </li>\r\n                    <li data-toggle=\"tooltip\" data-placement=\"right\" title=\"upload files\">\r\n                        <NavLink\r\n                            activeClassName=\"sidebar-link--active\"\r\n                            className=\"sidebar-link\"\r\n                            to=\"/upload\">\r\n                            <ImUpload2 size={size} />\r\n                            <p>Upload</p>\r\n\r\n                        </NavLink>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n\r\n            <div className=\"sidebar-bottom-wrapper\">\r\n                <ul>\r\n                    <li data-toggle=\"tooltip\" data-placement=\"right\" title=\"log out\">\r\n                        <NavLink\r\n                            className=\"sidebar-link\"\r\n                            to=\"/\" onClick={() => {\r\n                                logout()\r\n                            }}>\r\n                            <RiLogoutBoxRLine size={size} />\r\n                            <p>Logout</p>\r\n\r\n                        </NavLink>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Sidebar\r\n","export const API_URL = ''\r\n\r\n// export const API_URL = 'http://localhost:3001'\r\n\r\n// export const API_URL = 'http://13.239.16.220:3001'","import React, { useState, useEffect, useRef } from 'react'\r\nimport { API_URL } from '../JS/variables'\r\nconst MAX_DESCRIPTION_LENGTH = 500\r\nconst MAX_LESSON_NAME_LENGTH = 70\r\n\r\nfunction CreateLessonForm(props) {\r\n\tconst [lessonName, setLessonName] = useState('')\r\n\tconst [description, setDescription] = useState('')\r\n\tconst [price30m, setPrice30m] = useState('')\r\n\tconst [price60m, setPrice60m] = useState('')\r\n\tconst [loading, setLoading] = useState(false)\r\n\tconst [error, setError] = useState('')\r\n\tconst mountedRef = useRef(true)\r\n\r\n\tconst onLessonNameChange = (e) => {\r\n\t\tlet lessonName = e.target.value\r\n\t\tif (lessonName.length <= MAX_LESSON_NAME_LENGTH) {\r\n\t\t\tsetLessonName(e.target.value)\r\n\t\t} else {\r\n\t\t\te.target.value = lessonName\r\n\t\t}\r\n\t}\r\n\r\n\tconst onDescriptionChange = (e) => {\r\n\t\t// auto adjust textarea height\r\n\t\te.target.style.height = \"\";\r\n\t\te.target.style.height = Math.min(e.target.scrollHeight, 300) + \"px\";\r\n\r\n\t\tlet value = e.target.value\r\n\r\n\t\tif (value.length <= MAX_DESCRIPTION_LENGTH) {\r\n\t\t\tsetDescription(value)\r\n\t\t}\r\n\r\n\t\tif (value.length > MAX_DESCRIPTION_LENGTH) {\r\n\t\t\te.target.value = description\r\n\t\t}\r\n\t}\r\n\r\n\tconst onPrice30mChange = (e) => {\r\n\t\tlet value = e.target.value\r\n\t\tlet isMoney = /^\\d+\\.{0,1}\\d{0,2}$/.test(value)\r\n\t\tif (isMoney || value === '') {\r\n\t\t\tsetPrice30m(value)\r\n\t\t} else {\r\n\t\t\te.target.value = ''\r\n\t\t}\r\n\t}\r\n\r\n\tconst onPrice60mChange = (e) => {\r\n\t\tlet value = e.target.value\r\n\t\tlet isMoney = /^\\d+\\.{0,1}\\d{0,2}$/.test(value)\r\n\t\tif (isMoney || value === '') {\r\n\t\t\tsetPrice60m(value)\r\n\t\t} else {\r\n\t\t\te.target.value = ''\r\n\t\t}\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\treturn () => {\r\n\t\t\tmountedRef.current = false\r\n\t\t}\r\n\t}, [])\r\n\r\n\tconst handleAddNewLesson = (e) => {\r\n\t\te.preventDefault()\r\n\t\tif(!mountedRef.current) return null\r\n\t\tsetLoading(true)\r\n\t\tsetError('')\r\n\r\n\t\tconst requestOptions = {\r\n\t\t\tmethod: 'POST',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t'Accept': 'application/json'\r\n\t\t\t},\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\tlesson: lessonName,\r\n\t\t\t\tdescription: description,\r\n\t\t\t\tprice30m: price30m,\r\n\t\t\t\tprice60m: price60m\r\n\t\t\t}),\r\n\t\t\tcredentials: 'include'\r\n\t\t}\r\n\r\n\t\tfetch(`${API_URL}/api/lesson/add`, requestOptions)\r\n\t\t\t.then(res => {\r\n\t\t\t\tif (!res.ok) {\r\n\t\t\t\t\tthrow { message: `${res.status}: Cannot connect to the server.` }\r\n\t\t\t\t}\r\n\t\t\t\treturn res\r\n\t\t\t})\r\n\t\t\t.then(res => res.json())\r\n\t\t\t.then((data) => {\r\n\t\t\t\tif(!mountedRef.current) return null\r\n\t\t\t\tif(!data.success){\r\n\t\t\t\t\tthrow new Error(data.message)\r\n\t\t\t\t}\r\n\t\t\t\tprops.handleClose()\r\n\t\t\t\tprops.signalAddSuccess()\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\tif(!mountedRef.current) return null\r\n\t\t\t\tconsole.log(err)\r\n\t\t\t\tsetError(err.message)\r\n\t\t\t\tsetLoading(false)\r\n\t\t\t})\r\n\t}\r\n\r\n\tconsole.log('Create lesson form re render')\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className=\"mt-3 mb-3\">\r\n\t\t\t\t<form onSubmit={handleAddNewLesson} className=\"form-default-box mw-600\">\r\n\t\t\t\t\t<div className=\"mb-3\">\r\n\t\t\t\t\t\t<label htmlFor=\"lessonName\" className=\"form-label\"><b>Lesson name</b> ({MAX_LESSON_NAME_LENGTH - lessonName.length} chars left)</label>\r\n\t\t\t\t\t\t<input onChange={onLessonNameChange} value={lessonName} type=\"text\" className=\"form-control\" id=\"lessonName\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"mb-3\">\r\n\t\t\t\t\t\t<label htmlFor=\"description\" className=\"form-label\"><b>Description</b> ({MAX_DESCRIPTION_LENGTH - description.length} chars left)</label>\r\n\t\t\t\t\t\t<textarea onChange={onDescriptionChange} className=\"form-control\" id=\"description\" rows={5} maxLength={300} wrap=\"soft\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"mb-3\">\r\n\t\t\t\t\t\t<b>Price rates</b>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"row g-2 mb-2\">\r\n\t\t\t\t\t\t<div className=\"col-auto\"><label htmlFor=\"price-30m\" className=\"form-label\">30 minutes</label></div>\r\n\t\t\t\t\t\t<div className=\"col-3\">\r\n\t\t\t\t\t\t\t<input type=\"text\"\r\n\t\t\t\t\t\t\t\tonChange={onPrice30mChange}\r\n\t\t\t\t\t\t\t\tvalue={price30m}\r\n\t\t\t\t\t\t\t\tmaxLength=\"10\"\r\n\t\t\t\t\t\t\t\tclassName=\"form-control\" id=\"price-30m\" />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"col-auto\">$</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"row g-2 mb-2 \">\r\n\t\t\t\t\t\t<div className=\"col-auto \"><label htmlFor=\"price-60m\" className=\"form-label align-middle\">60 minutes</label></div>\r\n\t\t\t\t\t\t<div className=\"col-3\">\r\n\t\t\t\t\t\t\t<input type=\"text\"\r\n\t\t\t\t\t\t\t\tonChange={onPrice60mChange}\r\n\t\t\t\t\t\t\t\tvalue={price60m}\r\n\t\t\t\t\t\t\t\tmaxLength=\"10\"\r\n\t\t\t\t\t\t\t\tclassName=\"form-control\" id=\"price-60m\" />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"col-auto\">$</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\terror\r\n\t\t\t\t\t\t&&\r\n\t\t\t\t\t\t<div className=\"alert alert-danger\" role=\"alert\">\r\n\t\t\t\t\t\t\t{error}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t{/* {buttons panel} */}\r\n\t\t\t\t\t<div style={{ width: \"100%\", height: 30, margin: \"25px auto 10px auto\"}}>\r\n\t\t\t\t\t\t<button type=\"button\" className=\"btn btn-danger d-inline-block float-start\"\r\n\t\t\t\t\t\t\tonClick={() => props.handleClose()}>Cancel</button>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tloading ?\r\n\t\t\t\t\t\t\t\t<button className=\"btn btn-primary float-end\" type=\"button\" disabled>\r\n\t\t\t\t\t\t\t\t\t<span className=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\r\n\t\t\t\t\t\t\t\t\t<span className=\"sr-only\">Loading...</span>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t\t<button type=\"submit\" className=\"btn btn-primary d-inline-block float-end\">Add</button>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default CreateLessonForm\r\n","import React, { useState, useEffect, useRef } from 'react'\r\nimport { TiTrash } from 'react-icons/ti'\r\nimport { API_URL } from '../JS/variables'\r\n\r\nconst url = 'http://localhost:3001'\r\n\r\nfunction Lesson({ lessonId, lessonName, description, price30m, price60m, removeLesson }) {\r\n\tconst [error, setError] = useState('')\r\n\tconst [isLoading, setIsLoading] = useState(false)\r\n\tconst mountedRef = useRef(true)\r\n\r\n\tuseEffect(() => {\r\n\t\treturn () => {\r\n\t\t\tmountedRef.current = false\r\n\t\t}\r\n\t}, [])\r\n\t\r\n\tconst deleteLesson = () => {\r\n\t\tsetIsLoading(true)\r\n\t\tsetError('')\r\n\t\tconst requestionOptions =\r\n\t\t{\r\n\t\t\tmethod: 'DELETE',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t'Accept': 'application/json'\r\n\t\t\t},\r\n\t\t\tcredentials: 'include'\r\n\t\t}\r\n\r\n\t\tfetch(`${API_URL}/api/lesson/delete/${lessonId}`, requestionOptions)\r\n\t\t\t.then(res => res.json())\r\n\t\t\t.then(data => {\r\n\t\t\t\tif (!data.success) {\r\n\t\t\t\t\tthrow new Error(data.message)\r\n\t\t\t\t}\r\n\t\t\t\tif (!mountedRef.current) return null\r\n\t\t\t\tsetIsLoading(false)\r\n\t\t\t\tsetError('')\r\n\t\t\t\tremoveLesson(lessonId)\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (!mountedRef.current) return null\r\n\t\t\t\tsetIsLoading(false)\r\n\t\t\t\tsetError(error.message)\r\n\t\t\t})\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"mb-2 pd-4\">\r\n\t\t\t<div className=\"default-wrapper mw-600\">\r\n\t\t\t\t<h1 className=\"web-main-color\">{lessonName}</h1>\r\n\t\t\t\t<div className=\"ms-3 mb-2\">\r\n\t\t\t\t\t<p className=\"text-secondary\">{description}</p>\r\n\t\t\t\t\t<p className=\"mb-1 text-secondary\"><b>Fee rates</b></p>\r\n\t\t\t\t\t<p className=\"mb-1 text-secondary\">30 minutes: <b>${price30m}</b></p>\r\n\t\t\t\t\t<p className=\"mb-1 text-secondary\">60 minutes: <b>${price60m}</b></p>\r\n\t\t\t\t</div>\r\n\t\t\t\t{/* <button type=\"button\" title=\"edit\" className=\"btn btn-secondary py-1\">\r\n                        <TiEdit size={20} />\r\n                        <span className=\"align-middle\" style={{ fontSize: 15 }}>EDIT</span>\r\n                    </button> */}\r\n\t\t\t\t{error &&\r\n\t\t\t\t\t<div className=\"alert alert-danger\" role=\"alert\">\r\n\t\t\t\t\t\t{error}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\r\n\t\t\t\t<div style={{ height: 30 }}>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tisLoading ?\r\n\t\t\t\t\t\t\t<button className=\"btn btn-danger py-1 float-end\" type=\"button\" disabled>\r\n\t\t\t\t\t\t\t\t<span className=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\r\n\t\t\t\t\t\t\t\t<span className=\"sr-only\">Deleting...</span>\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t<button onClick={deleteLesson} type=\"button\" title=\"delete\" className=\"btn btn-danger py-1 float-end\" >\r\n\t\t\t\t\t\t\t\t<TiTrash size={20} />\r\n\t\t\t\t\t\t\t\t<span className=\"align-middle button-text\" style={{ fontSize: 12 }}>DELETE</span>\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Lesson\r\n","import React, { useState, useEffect, useRef } from 'react'\r\nimport CreateLessonForm from './CreateLessonForm'\r\nimport Lesson from './Lesson'\r\nimport { API_URL } from '../JS/variables'\r\n\r\n\r\nfunction LessonPanel() {\r\n\tconst [lessons, setLessons] = useState([])\r\n\tconst [showForm, setShowForm] = useState(false)\r\n\tconst [addSuccess, setAddSuccess] = useState(false)\r\n\tconst [dummy, setDummy] = useState(0)\r\n\tconst [isLoading, setIsLoading] = useState(false)\r\n\tconst [error, setError] = useState('')\r\n\r\n\tconst mountedRef = useRef(true)\r\n\r\n\tconst signalAddSuccess = () => {\r\n\t\tsetAddSuccess(true)\r\n\t\tsetDummy(dummy + 1)\r\n\t\tsetTimeout(() => {\r\n\t\t\tsetAddSuccess(false)\r\n\t\t}, 2000)\r\n\t}\r\n\r\n\tconst removeLesson = (lessonId) => {\r\n\t\tsetLessons(lessons.filter(lesson => lesson.lesson_id != lessonId))\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\treturn () => {\r\n\t\t\tmountedRef.current = false\r\n\t\t}\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!mountedRef.current) return null\r\n\r\n\t\tsetIsLoading(true)\r\n\t\tsetError('')\r\n\r\n\t\tconst requestOptions = {\r\n\t\t\tmethod: 'GET',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t'Accept': 'application/json'\r\n\t\t\t},\r\n\t\t\tcredentials: 'include'\r\n\t\t}\r\n\t\tfetch(`${API_URL}/api/lesson/active`, requestOptions)\r\n\t\t\t.then(res => res.json())\r\n\t\t\t.then(data => {\r\n\t\t\t\tif (!data.success) {\r\n\t\t\t\t\tthrow new Error(data.message)\r\n\t\t\t\t}\r\n\t\t\t\tif (!data.lessons.length) {\r\n\t\t\t\t\tthrow new Error('There is no lesson. Please consider creating one.')\r\n\t\t\t\t}\r\n\t\t\t\tif (!mountedRef.current) return null\r\n\t\t\t\tsetLessons(data.lessons)\r\n\t\t\t\tsetIsLoading(false)\r\n\t\t\t\tsetError('')\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (!mountedRef.current) return null\r\n\t\t\t\tconsole.log(error.message)\r\n\t\t\t\tsetIsLoading(false)\r\n\t\t\t\tsetError(error.message)\r\n\t\t\t})\r\n\t}, [dummy])\r\n\r\n\treturn (\r\n\t\t<div className=\"pt-3\">\r\n\r\n\t\t\t{/* {msg when successfully add new lesson} */}\r\n\t\t\t{\r\n\t\t\t\taddSuccess &&\r\n\t\t\t\t<div className=\"alert alert-success\" role=\"alert\">\r\n\t\t\t\t\tSuccessfully added.\r\n\t\t\t\t</div>\r\n\t\t\t}\r\n\r\n\t\t\t{/* {show form when the button clicked} */}\r\n\t\t\t{\r\n\t\t\t\tshowForm ?\r\n\t\t\t\t\t<CreateLessonForm handleClose={() => setShowForm(false)} signalAddSuccess={signalAddSuccess} />\r\n\t\t\t\t\t:\r\n\t\t\t\t\t<div style={{ textAlign: \"center\" }}>\r\n\t\t\t\t\t\t<button className=\"btn btn-primary\" onClick={() => setShowForm(true)}>\r\n\t\t\t\t\t\t\tAdd Lesson\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t}\r\n\r\n\t\t\t<div className=\"pt-3\" style={{ textAlign: \"center\" }}>\r\n\r\n\t\t\t\t{/* {LOADING && ERROR} */}\r\n\t\t\t\t{\r\n\t\t\t\t\tisLoading ?\r\n\t\t\t\t\t\t<div className=\"text-center\">\r\n\t\t\t\t\t\t\t<div className=\"spinner-border\" role=\"status\" style={{ color: \"orange\" }}>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t: (error &&\r\n\t\t\t\t\t\t\t<div className=\"alert alert-danger\" role=\"alert\">\r\n\t\t\t\t\t\t\t\t{error}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t{/* {ALL LESSONS} */}\r\n\t\t\t\t{\r\n\t\t\t\t\tlessons.map(lesson => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<Lesson\r\n\t\t\t\t\t\t\t\tkey={lesson.lesson_id}\r\n\t\t\t\t\t\t\t\tremoveLesson={removeLesson}\r\n\t\t\t\t\t\t\t\tlessonId={lesson.lesson_id}\r\n\t\t\t\t\t\t\t\tlessonName={lesson.lesson_name}\r\n\t\t\t\t\t\t\t\tdescription={lesson.description}\r\n\t\t\t\t\t\t\t\tprice30m={lesson.price_30m}\r\n\t\t\t\t\t\t\t\tprice60m={lesson.price_60m}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)\r\n\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default LessonPanel\r\n","import React, { useState, useEffect } from 'react'\r\nimport { FaAngleLeft, FaAngleRight } from 'react-icons/fa'\r\n\r\nconst MONTH = [\r\n    { value: 0, month: 'JAN' },\r\n    { value: 1, month: 'FEB' },\r\n    { value: 2, month: 'MAR' },\r\n    { value: 3, month: 'APR' },\r\n    { value: 4, month: 'MAY' },\r\n    { value: 5, month: 'JUN' },\r\n    { value: 6, month: 'JUL' },\r\n    { value: 7, month: 'AUG' },\r\n    { value: 8, month: 'SEP' },\r\n    { value: 9, month: 'OCT' },\r\n    { value: 10, month: 'NOV' },\r\n    { value: 11, month: 'DEC' },\r\n]\r\n\r\nconst WEEK = [\r\n    'Sun', 'Mon', 'Tu', 'Wed', 'Th', 'Fri', 'Sat'\r\n]\r\n\r\nfunction DatePicker(props) {\r\n    const [date, setDate] = useState(props.date)\r\n    const [month, setMonth] = useState(props.month)\r\n    const [year, setYear] = useState(props.year)\r\n    const [selectedMonth, setSelectedMonth] = useState(props.month)\r\n    const [selectedYear, setSelectedYear] = useState(props.year)\r\n    const [dates, setDates] = useState([])\r\n    const handleDateChange = props.onDateChange\r\n\r\n    useEffect(() => {\r\n        resetCalendar()\r\n    }, [month, year])\r\n\r\n    const resetCalendar = () => {\r\n        let newDates = []\r\n        let today = new Date()\r\n        let startDayOfMonth = new Date(year, month, 1)\r\n        let dayOfMonthAtStart = startDayOfMonth.getDay()\r\n        let endDayOfMonth = new Date(year, month + 1, 0)\r\n        let numDayOfMonth = endDayOfMonth.getDate()\r\n\r\n        let numObj = numDayOfMonth + dayOfMonthAtStart\r\n\r\n        let currentDate = 1 - dayOfMonthAtStart\r\n        for (let i = 0; i < numObj; i++) {\r\n            let theDate = new Date(year, month, currentDate)\r\n            let upComming = currentDate > 0 && (checkFutureDay(theDate, today) || checkSameDay(theDate, today))\r\n\r\n            let obj = {\r\n                id: currentDate,\r\n                upComming: upComming\r\n            }\r\n            newDates.push(obj)\r\n            currentDate++\r\n        }\r\n        setDates(newDates)\r\n    }\r\n\r\n    const checkSameDay = (date1, date2) => {\r\n        return date1.getDate() == date2.getDate() && date1.getMonth() == date2.getMonth() && date1.getFullYear() == date2.getFullYear()\r\n    }\r\n\r\n    const checkFutureDay = (date, thresholdDate) => {\r\n        return date > thresholdDate\r\n    }\r\n\r\n    const incrementYear = () => {\r\n        setYear(year + 1)\r\n    }\r\n\r\n    const decrementYear = () => {\r\n        if (year > 1970) {\r\n            setYear(year - 1)\r\n        }\r\n    }\r\n\r\n    const monthHandle = (e) => {\r\n        setMonth(parseInt(e.target.id))\r\n        console.log('month', e.target.id)\r\n    }\r\n\r\n    const onSelectDateHandle = (e) => {\r\n        setSelectedMonth(month)\r\n        setSelectedYear(year)\r\n        setDate(parseInt(e.target.id))\r\n        handleDateChange(parseInt(e.target.id), month, year)\r\n        console.log('var:', parseInt(e.target.id), month, year)\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"calendar-picker\">\r\n                <div style={{ display: \"flex\", margin: \"10px 3px\", borderBottom: \"2px solid #f2f2f2\" }}>\r\n                    <h3 style={{ margin: \"auto\", fontSize: 25 }}>\r\n                        {`${date} ${MONTH[selectedMonth].month} ${selectedYear}`}\r\n                    </h3>\r\n                </div>\r\n\r\n                <div className=\"year-spinner\">\r\n                    <button onClick={decrementYear} className=\"float-start\" >\r\n                        <FaAngleLeft size={25} />\r\n                    </button>\r\n                    <span style={{ fontSize: 20 }}>{year}</span>\r\n                    <button onClick={incrementYear} className=\"float-end\">\r\n                        <FaAngleRight size={25} />\r\n                    </button>\r\n                </div>\r\n                <div className=\"month-picker py-2\">\r\n                    <div className=\"month-grid\">\r\n                        {\r\n                            MONTH.map(monthObj => {\r\n                                return (\r\n                                    <div key={monthObj.value} className={`${parseInt(monthObj.value) == parseInt(month) ? 'month-item-active' : ''} month-item `}>\r\n                                        <button id={monthObj.value} onClick={monthHandle}>\r\n                                            {monthObj.month}\r\n                                        </button>\r\n                                    </div>\r\n                                )\r\n                            })\r\n                        }\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"date-grid py-2\">\r\n                    {\r\n                        WEEK.map((aDay, index) => {\r\n                            return (\r\n                                <div className=\"date-item date-item-header\" key={index} >\r\n                                    <div style={{ margin: \"auto\" }}>\r\n                                        {aDay}\r\n                                    </div>\r\n                                </div>\r\n                            )\r\n                        })\r\n                    }\r\n                    {\r\n                        dates.map(aDate => {\r\n                            let upcommingCSS = aDate.upComming ? 'date-item-upcomming' : ''\r\n                            let currentCSS = aDate.id == date && month == selectedMonth && year == selectedYear ? 'date-item-active' : ''\r\n\r\n                            return (\r\n                                <div className={`date-item ${upcommingCSS} ${currentCSS}`} key={aDate.id}>\r\n                                    <button disabled={!aDate.upComming ? true : false} onClick={onSelectDateHandle} id={aDate.id}>\r\n                                        <div id={aDate.id}>\r\n                                            <p id={aDate.id}>{aDate.id > 0 && aDate.id}</p>\r\n                                        </div>\r\n                                    </button>\r\n                                </div>\r\n                            )\r\n                        })\r\n                    }\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default DatePicker","import React, { useState, useEffect } from 'react'\r\nimport { API_URL } from '../JS/variables'\r\n\r\nfunction TimeOffer(props) {\r\n\tconst [fetchErrors, setFetchErrors] = useState([])\r\n\tconst [times, setTimes] = useState([])\r\n\tconst [isLoading, setIsLoading] = useState(false)\r\n\r\n\t// UTC TIME\r\n\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/UTC\r\n\r\n\tuseEffect(() => {\r\n\t\tsetIsLoading(true)\r\n\r\n\t\tconst requestOptions = {\r\n\t\t\tmethod: 'GET',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t'Accept': 'application/json'\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconsole.log(props.fullDate)\r\n\t\tlet date = new Date(props.fullDate)\r\n\t\tlet day = date.getDay()\r\n\t\tdate = date.toUTCString()\r\n\r\n\t\tfetch(`${API_URL}/api/availability/offertime?day=${day}&duration=${props.duration}&utcDate=${date}`, requestOptions)\r\n\t\t\t.then(res => res.json())\r\n\t\t\t.then((data) => {\r\n\t\t\t\tif (!data.success) {\r\n\t\t\t\t\tconsole.log(data)\r\n\t\t\t\t\tthrow new Error(data.message)\r\n\t\t\t\t}\r\n\t\t\t\tif (data.times.length === 0) {\r\n\t\t\t\t\tthrow new Error(\"I'm not available today. Check another day or decrease session time.\")\r\n\t\t\t\t}\r\n\t\t\t\tconsole.log(data)\r\n\t\t\t\tsetIsLoading(false)\r\n\t\t\t\tsetFetchErrors([])\r\n\t\t\t\tsetTimes(data.times)\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\tsetTimes([])\r\n\t\t\t\tsetIsLoading(false)\r\n\t\t\t\tif (Array.isArray(err)) {\r\n\t\t\t\t\tsetFetchErrors(err)\r\n\t\t\t\t\tconsole.log('it is array')\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tsetFetchErrors([err.message])\r\n\t\t\t\t\tconsole.log('err is not array')\r\n\t\t\t\t}\r\n\t\t\t\tconsole.log(err)\r\n\t\t\t})\r\n\t}, [props.fullDate, props.duration, props.dummy])\r\n\r\n\tconst minutesToHhMmAPmString = (minutes) => {\r\n\t\tlet hours = Math.floor(minutes / 60)\r\n\t\tconst suffix = hours >= 12 ? \"PM\" : \"AM\"\r\n\t\tlet minutePart = ((minutes % 60) + '0').substring(0, 2)\r\n\t\thours = `${((hours + 11) % 12 + 1)}:${minutePart} ${suffix}`\r\n\t\treturn hours\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t{\r\n\t\t\t\tisLoading ?\r\n\t\t\t\t\t<div style={{ margin: \"auto\", textAlign: \"center\" }}>\r\n\t\t\t\t\t\t<div className=\"spinner-border text-warning\" role=\"status\">\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t:\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\ttimes.map((time, index) => {\r\n\t\t\t\t\t\t\t\tlet HHMMAPMstr = minutesToHhMmAPmString(time)\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<button key={index} type=\"button\" className=\"btn btn-secondary mx-2 my-2\" style={{ width: 100 }}\r\n\t\t\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\t\t\tprops.onTimeSelected(HHMMAPMstr)\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t>{HHMMAPMstr}</button>\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t}\r\n\t\t\t{\r\n\t\t\t\tfetchErrors.map((error, index) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<div key={index} className=\"alert alert-danger\" role=\"alert\">\r\n\t\t\t\t\t\t\t{error}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default TimeOffer\r\n","import React, { useState, useEffect, useRef } from 'react'\r\nimport { EatLoading } from 'react-loadingg'\r\nimport { API_URL } from '../JS/variables';\r\n\r\nfunction ClassOffer(props) {\r\n    const [lessons, setLessons] = useState([])\r\n    const [selectedLessonId, setSelectedLessonId] = useState(null)\r\n    const mountedRef = useRef(true)\r\n    const [isLoading, setIsLoading] = useState(false)\r\n    const [error, setError] = useState('')\r\n\r\n    useEffect(() => {\r\n        if (!mountedRef.current) return null\r\n\r\n        setIsLoading(true)\r\n        setError('')\r\n\r\n        const requestOptions = {\r\n            method: 'GET',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Accept': 'application/json'\r\n            }\r\n        }\r\n        fetch(`${API_URL}/api/lesson/active`, requestOptions)\r\n            .then(res => res.json())\r\n            .then(data => {\r\n                if (!data.success) {\r\n                    throw new Error(data.message)\r\n                }\r\n                if (!data.lessons.length) {\r\n                    throw new Error('We are sorry. No lesson is available now.')\r\n                }\r\n                if (!mountedRef.current) return null\r\n                setLessons(data.lessons)\r\n                setIsLoading(false)\r\n                setError('')\r\n            })\r\n            .catch(error => {\r\n                if (!mountedRef.current) return null\r\n                console.log(error.message)\r\n                setIsLoading(false)\r\n                setError(error.message)\r\n            })\r\n\r\n        return () => {\r\n            mountedRef.current = false\r\n        }\r\n    }, [])\r\n\r\n    return (\r\n        <div>\r\n            {/* {LOADING && ERROR} */}\r\n            {\r\n                isLoading ? <EatLoading color=\"orange\" />\r\n                    : (error &&\r\n                        <div className=\"alert alert-danger\" role=\"alert\">\r\n                            {error}\r\n                        </div>\r\n                    )\r\n\r\n            }\r\n            <div className=\"class-offer-flex\">\r\n            {lessons.map(lesson => {\r\n\r\n                return (\r\n                    <div className={`class-offer my-2 ${selectedLessonId == lesson.lesson_id? \"class-offer-active\" : \"class-offer-inactive\"}`}  \r\n                    key={lesson.lesson_id} \r\n                    onClick={() => {\r\n                        setSelectedLessonId(lesson.lesson_id)\r\n                        props.selectLesson({\r\n                            lessonId: lesson.lesson_id,\r\n                            lessonName: lesson.lesson_name,\r\n                            price30m: lesson.price_30m,\r\n                            price60m: lesson.price_60m,\r\n                        })\r\n                    }}>\r\n                        <h3>{lesson.lesson_name}</h3>\r\n                        <p>30 minutes: ${lesson.price_30m}</p>\r\n                        <p>60 minutes: ${lesson.price_60m}</p>\r\n                    </div>\r\n                )\r\n            })}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ClassOffer\r\n","import React, { useState, useEffect, useRef } from 'react'\r\nimport DatePicker from './DatePicker'\r\nimport TimeOffer from './TimeOffer'\r\nimport ClassOffer from './ClassOffer'\r\nimport { API_URL } from '../JS/variables';\r\n\r\nconst today = new Date()\r\nconst initDate = today.getDate()\r\nconst initMonth = today.getMonth() + 1\r\nconst initYear = today.getFullYear()\r\nconst INIT_FULLDATE = `${initYear}-${initMonth}-${initDate}`\r\nconst INIT_DURATION = 60\r\n\r\nfunction Booking(props) {\r\n\tconst [name, setName] = useState('')\r\n\tconst [email, setEmail] = useState('')\r\n\tconst [phone, setPhone] = useState('')\r\n\tconst [note, setNote] = useState('')\r\n\tconst [duration, setDuration] = useState(INIT_DURATION)\r\n\tconst [fullDate, setFullDate] = useState(INIT_FULLDATE)\r\n\tconst [lesson, setLesson] = useState(null)\r\n\tconst [fullTime, setFullTime] = useState('')\r\n\tconst [submitErrors, setSubmitErrors] = useState([])\r\n\tconst [isLoading, setIsLoading] = useState(false)\r\n\tconst [bookingSuccess, setBookingSuccess] = useState(false)\r\n\tconst [dummy, setDummy] = useState(0)\r\n\r\n\tconst mountedRef = useRef(true)\r\n\r\n\r\n\tuseEffect(() => {\r\n\t\treturn () => {\r\n\t\t\tmountedRef.current = false\r\n\t\t}\r\n\t}, [])\r\n\r\n\tconst signalBookingSuccess = () => {\r\n\t\tsetDummy(dummy + 1)\r\n\t\tsetBookingSuccess(true)\r\n\t\tsetTimeout(() => {\r\n\t\t\tif(!mountedRef.current) return null\r\n\t\t\tsetBookingSuccess(false)\r\n\t\t}, 7000)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tsetFullTime('')\r\n\t}, [fullDate, duration])\r\n\r\n\tconst handleDateChange = (date, month, year) => {\r\n\t\tsetFullDate(year + '-' + (month + 1) + '-' + date)\r\n\t}\r\n\r\n\tconst onDurationChange = (e) => {\r\n\t\tsetDuration(e.target.value)\r\n\t}\r\n\r\n\r\n\tconst handleSubmit = () => {\r\n\t\tlet errors = [\r\n\t\t\t...(lesson ? [] : ['Lesson is missing. Please select a lesson']),\r\n\t\t\t...(fullDate ? [] : ['Date is missing. Please select date']),\r\n\t\t\t...(fullTime ? [] : ['Time is missing. Please select time.']),\r\n\t\t\t...(name ? [] : ['Name is required.']),\r\n\t\t\t...(email ? [] : ['Email address is required.']),\r\n\t\t\t...(duration > 0 && duration % 30 == 0 ? [] : ['Select session duration.'])\r\n\t\t]\r\n\t\tif (errors.length) {\r\n\t\t\treturn setSubmitErrors(errors)\r\n\t\t}\r\n\r\n\t\t// convert to utc date\r\n\t\tlet d = new Date(`${fullDate} ${fullTime}`)\r\n\t\td = d.toUTCString()\r\n\r\n\t\tconst requestOptions = {\r\n\t\t\tmethod: 'POST',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t'Accept': 'application/json'\r\n\t\t\t},\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\tname: name,\r\n\t\t\t\temail: email,\r\n\t\t\t\tphone: phone,\r\n\t\t\t\tnote: note,\r\n\t\t\t\tdate: d,\r\n\t\t\t\tduration: duration,\r\n\t\t\t\tlessonId: lesson.lessonId\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tconsole.log('the date', '')\r\n\t\tsetIsLoading(true)\r\n\t\tsetSubmitErrors([])\r\n\r\n\t\tfetch(`${API_URL}/api/booking`, requestOptions)\r\n\t\t\t.then(res => res.json())\r\n\t\t\t.then(data => {\r\n\t\t\t\tif (!mountedRef.current) return null\r\n\t\t\t\tif (!data.success) {\r\n\t\t\t\t\tthrow new Error(data.message)\r\n\t\t\t\t}\r\n\t\t\t\tconsole.log('hello')\r\n\t\t\t\tsetSubmitErrors([])\r\n\t\t\t\tsetIsLoading(false)\r\n\t\t\t\tsetFullTime('')\r\n\t\t\t\tsignalBookingSuccess()\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (!mountedRef.current) return null\r\n\t\t\t\tif (Array.isArray(error)) {\r\n\t\t\t\t\tconsole.log('1', error)\r\n\t\t\t\t\tsetSubmitErrors(error)\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tconsole.log('2', error)\r\n\t\t\t\t\tsetSubmitErrors([error.message])\r\n\t\t\t\t}\r\n\t\t\t\tsetIsLoading(false)\r\n\t\t\t})\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div style={{ maxWidth: 600, margin: \"auto\", padding: \"40px 0px 150px 0px\" }}>\r\n\t\t\t{/* {CLASS selection} */}\r\n\t\t\t<section>\r\n\t\t\t\t<div className=\"guide-banner mb-4\">\r\n\t\t\t\t\t<h3>Select class</h3>\r\n\t\t\t\t</div>\r\n\t\t\t\t<ClassOffer selectLesson={setLesson} />\r\n\r\n\t\t\t</section>\r\n\r\n\t\t\t{/* {SESSION DURATION selection} */}\r\n\t\t\t<section>\r\n\t\t\t\t<div className=\"guide-banner my-4\">\r\n\t\t\t\t\t<h3>Select session duration</h3>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<div style={{ width: 200, margin: \"20px auto\" }}>\r\n\t\t\t\t\t\t<select className=\"form-select\" defaultValue={duration} aria-label=\"Default select example\" onChange={onDurationChange}>\r\n\t\t\t\t\t\t\t<option value=\"30\">30 minutes</option>\r\n\t\t\t\t\t\t\t<option value=\"60\">1 hour</option>\r\n\t\t\t\t\t\t\t<option value=\"90\">1 hour 30 minutes</option>\r\n\t\t\t\t\t\t\t<option value=\"120\">2 hours</option>\r\n\t\t\t\t\t\t\t<option value=\"150\">2 hours 30 minutes</option>\r\n\t\t\t\t\t\t\t<option value=\"180\">3 hours</option>\r\n\t\t\t\t\t\t\t<option value=\"210\">3 hours 30 minutes</option>\r\n\t\t\t\t\t\t\t<option value=\"240\">4 hours</option>\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</section>\r\n\r\n\t\t\t{/* {DATE selection section} */}\r\n\t\t\t<section>\r\n\t\t\t\t<div className=\"guide-banner my-4\">\r\n\t\t\t\t\t<h3>Select date</h3>\r\n\t\t\t\t</div>\r\n\t\t\t\t<DatePicker date={initDate} month={initMonth - 1} year={initYear} onDateChange={handleDateChange} />\r\n\t\t\t</section>\r\n\r\n\t\t\t{/* {TIME selection section} */}\r\n\t\t\t<section>\r\n\t\t\t\t<div className=\"guide-banner my-4\">\r\n\t\t\t\t\t<h3>Select time</h3>\r\n\t\t\t\t</div>\r\n\t\t\t\t<TimeOffer duration={duration} fullDate={fullDate} onTimeSelected={setFullTime} dummy={dummy} />\r\n\t\t\t</section>\r\n\r\n\t\t\t{/* ...... {student information} ......... */}\r\n\t\t\t<section>\r\n\t\t\t\t<div className=\"guide-banner my-4\">\r\n\t\t\t\t\t<h3>Your information</h3>\r\n\t\t\t\t</div>\r\n\t\t\t\t<form className=\"form-default-box\">\r\n\t\t\t\t\t<div className=\"mb-3\">\r\n\t\t\t\t\t\t<label htmlFor=\"name\" className=\"form-label\"><b>Name</b> </label>\r\n\t\t\t\t\t\t<input type=\"text\" length={50} className=\"form-control\" id=\"name\" required\r\n\t\t\t\t\t\t\tonChange={(e) => { setName(e.target.value) }}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"mb-3\">\r\n\t\t\t\t\t\t<label htmlFor=\"email\" className=\"form-label\"><b>Email</b></label>\r\n\t\t\t\t\t\t<input type=\"email\" length={50} className=\"form-control\" id=\"email\" required\r\n\t\t\t\t\t\t\tonChange={(e) => { setEmail(e.target.value) }}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"mb-3\">\r\n\t\t\t\t\t\t<label htmlFor=\"phone\" className=\"form-label\"><b>Phone</b></label>\r\n\t\t\t\t\t\t<input type=\"tel\" length={20} className=\"form-control\" id=\"phone\"\r\n\t\t\t\t\t\t\tonChange={(e) => { setPhone(e.target.value) }}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"mb-3\">\r\n\t\t\t\t\t\t<label htmlFor=\"note\" className=\"form-label\"><b>Note</b></label>\r\n\t\t\t\t\t\t<textarea className=\"form-control\" id=\"description\" rows={5} wrap=\"soft\"\r\n\t\t\t\t\t\t\tonChange={(e) => { setNote(e.target.value) }}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</form>\r\n\t\t\t</section>\r\n\r\n\t\t\t{/* {summary table} */}\r\n\t\t\t<section>\r\n\t\t\t\t<div className=\"guide-banner my-4\">\r\n\t\t\t\t\t<h3>Confirm details & Book appointment</h3>\r\n\t\t\t\t</div>\r\n\t\t\t\t<table className=\"table mb-4\" style={{ margin: \"auto\", maxWidth: 600 }}>\r\n\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t<tr className=\"table-primary\">\r\n\t\t\t\t\t\t\t<td colSpan=\"2\">\r\n\t\t\t\t\t\t\t\t<b>Your information</b>\r\n\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t<tr className=\"table-light\">\r\n\t\t\t\t\t\t\t<td className=\"booking-info-tag\">Name</td>\r\n\t\t\t\t\t\t\t<td>{name}</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t<tr className=\"table-light\">\r\n\t\t\t\t\t\t\t<td className=\"booking-info-tag\">Email</td>\r\n\t\t\t\t\t\t\t<td>{email}</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t<tr className=\"table-light\">\r\n\t\t\t\t\t\t\t<td className=\"booking-info-tag\">Phone</td>\r\n\t\t\t\t\t\t\t<td>{phone}</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t<tr className=\"table-light\">\r\n\t\t\t\t\t\t\t<td className=\"booking-info-tag\" style={{ verticalAlign: \"top\" }}>Note</td>\r\n\t\t\t\t\t\t\t<td>{note}</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t<tr className=\"table-primary\">\r\n\t\t\t\t\t\t\t<td colSpan=\"2\"><b>Appointment information</b></td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t<tr className=\"table-light\">\r\n\t\t\t\t\t\t\t<td className=\"booking-info-tag\">Class</td>\r\n\t\t\t\t\t\t\t<td>{lesson && lesson.lessonName}</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t<tr className=\"table-light\">\r\n\t\t\t\t\t\t\t<td className=\"booking-info-tag\">Class ID</td>\r\n\t\t\t\t\t\t\t<td>{lesson && lesson.lessonId}</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t<tr className=\"table-light\">\r\n\t\t\t\t\t\t\t<td className=\"booking-info-tag\">Date</td>\r\n\t\t\t\t\t\t\t<td>{fullDate}</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t<tr className=\"table-light\">\r\n\t\t\t\t\t\t\t<td className=\"booking-info-tag\">Time</td>\r\n\t\t\t\t\t\t\t<td>{fullTime}</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t<tr className=\"table-light\">\r\n\t\t\t\t\t\t\t<td className=\"booking-info-tag\">Duration</td>\r\n\t\t\t\t\t\t\t<td>{duration} minutes</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t<tr className=\"table-light\">\r\n\t\t\t\t\t\t\t<td className=\"booking-info-tag\">Fee</td>\r\n\t\t\t\t\t\t\t<td>${lesson && lesson.price60m * Math.floor(duration / 60) + lesson.price30m * (duration % 60 == 30 ? 1 : 0)} (pay at the study date)</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t</tbody>\r\n\t\t\t\t</table>\r\n\r\n\t\t\t\t{\r\n\t\t\t\t\tsubmitErrors.length > 0 &&\r\n\t\t\t\t\t<div className=\"alert alert-danger\" role=\"alert\">\r\n\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tsubmitErrors.map((error, index) => {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<li key={index}>{error}</li>\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\r\n\t\t\t{\r\n\t\t\t\tbookingSuccess &&\r\n\t\t\t\t<div className=\"alert alert-success\" role=\"alert\">\r\n\t\t\t\t\t<p>Successfully booked. Booking details will be sent to your email address.</p>\r\n\t\t\t\t\t<p>You can continue booking on this page.</p>\r\n\t\t\t\t</div>\r\n\t\t\t}\r\n\r\n\t\t\t\t{\r\n\t\t\t\t\tisLoading ?\r\n\t\t\t\t\t\t<button className=\"btn btn-primary float-end\" type=\"button\" disabled>\r\n\t\t\t\t\t\t\t<span className=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\r\n\t\t\t\t\t\t\t<span className=\"sr-only\">Loading...</span>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t:\r\n\t\t\t\t\t\t<button className=\"btn btn-primary d-inline-block float-end\" onClick={() => { handleSubmit() }}>Book now</button>\r\n\t\t\t\t}\r\n\t\t\t</section>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\n\r\nexport default Booking\r\n//handleDateChange={handleDateChange}\r\n\r\n{/* <button className=\"btn btn-primary float-end mt-3\"\r\nonClick={() => {handleSubmit()}}>\r\n\tBOOK APPOINTMENT\r\n</button> */}","import React, { useState, useEffect, useRef } from 'react'\r\nimport { API_URL } from '../JS/variables'\r\n\r\nconst EVERYDAY_INDEX = 7\r\n\r\n\r\nfunction CrateAvailabilityForm(props) {\r\n\tconst DAYS = [\r\n\t\t{ id: 0, day: 'Sun', isChecked: false },\r\n\t\t{ id: 1, day: 'Mon', isChecked: false },\r\n\t\t{ id: 2, day: 'Tu', isChecked: false },\r\n\t\t{ id: 3, day: 'Wed', isChecked: false },\r\n\t\t{ id: 4, day: 'Th', isChecked: false },\r\n\t\t{ id: 5, day: 'Fri', isChecked: false },\r\n\t\t{ id: 6, day: 'Sat', isChecked: false },\r\n\t\t{ id: 7, day: 'Everyday', isChecked: false },\r\n\t]\r\n\r\n\tconst [timeFrom, setTimeFrom] = useState('')\r\n\tconst [timeTo, setTimeTo] = useState('')\r\n\tconst [selectedDays, setSelectedDays] = useState(DAYS)\r\n\tconst [isLoading, setIsLoading] = useState(false)\r\n\tconst [fetchErrors, setFetchErrors] = useState([])\r\n\tconst [dateError, setDateError] = useState('')\r\n\tconst [dayError, setDayError] = useState('')\r\n\tconst [fromH, setFromH] = useState(0)\r\n\tconst [fromM, setFromM] = useState(0)\r\n\tconst [fromAP, setFromAP] = useState('AM')\r\n\tconst [toH, setToH] = useState(0)\r\n\tconst [toM, setToM] = useState(0)\r\n\tconst [toAP, setToAP] = useState('AM')\r\n\r\n\tconst mountedRef = useRef(true)\r\n\r\n\tuseEffect(() => {\r\n\t\treturn () => {\r\n\t\t\tmountedRef.current = false\r\n\t\t}\r\n\t}, [])\r\n\r\n\tconst getFromMinute = () => {\r\n\t\treturn (fromH * 1 + (fromAP === 'AM'? 0 : 12)) * 60 + fromM * 1\r\n\t}\r\n\r\n\tconst getToMinute = () => {\r\n\t\t// to midnight\r\n\t\tconsole.log(toH)\r\n\t\tconsole.log(toM)\r\n\t\tconsole.log(toAP)\r\n\t\tif (toH * 1 == 0 && toM * 1 == 0 && toAP == 'AM'){\r\n\t\t\tconsole.log('visit')\r\n\t\t\treturn 24*60\r\n\t\t}\r\n\t\treturn (toH * 1 + (toAP === 'AM'? 0 : 12)) * 60 + toM * 1\r\n\t}\r\n\r\n\tconst handleAddAvailability = (e) => {\r\n\t\te.preventDefault()\r\n\t\tlet timeFrom = getFromMinute()\r\n\t\tlet timeTo = getToMinute()\r\n\r\n\r\n\t\tif(timeFrom >= timeTo){\r\n\t\t\tconsole.log('timefrom', timeFrom)\r\n\t\t\tconsole.log('timeto', timeTo)\r\n\t\t\treturn setFetchErrors(['Incorrect time.'])\r\n\t\t}\r\n\r\n\t\tconsole.log('after')\r\n\r\n\t\tif (!mountedRef.current) {\r\n\t\t\tconsole.log('mountedRef false')\r\n\t\t\treturn null\r\n\t\t}\r\n\t\tsetFetchErrors([])\r\n\t\tsetIsLoading(true)\r\n\r\n\t\tconsole.log('1')\r\n\t\tconst days = getSelectedDaysValue()\r\n\r\n\t\tif (!days) {\r\n\t\t\tsetDayError('At least one day must be selected.')\r\n\t\t\tsetIsLoading(false)\r\n\t\t\treturn\r\n\t\t} else {\r\n\t\t\tsetDayError('')\r\n\t\t}\r\n\t\tconsole.log('2')\r\n\r\n\t\tconst requestOptions = {\r\n\t\t\tmethod: 'POST',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t'Accept': 'application/json'\r\n\t\t\t},\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\ttimeFrom: timeFrom,\r\n\t\t\t\ttimeTo: timeTo,\r\n\t\t\t\tdays: getSelectedDaysValue()\r\n\t\t\t}),\r\n\t\t\tcredentials: 'include'\r\n\t\t}\r\n\r\n\t\tfetch(`${API_URL}/api/availability/`, requestOptions)\r\n\t\t\t.then(res => {\r\n\t\t\t\tif (res.status === 401) {\r\n\t\t\t\t\tthrow new Error('Unauthorized.')\r\n\t\t\t\t}\r\n\t\t\t\treturn res\r\n\t\t\t})\r\n\t\t\t.then(res => res.json())\r\n\t\t\t.then((data) => {\r\n\t\t\t\tconsole.log('data: ', data)\r\n\t\t\t\tif (!mountedRef.current) return null\r\n\t\t\t\tconsole.log('yo')\r\n\t\t\t\tif (!data.success) {\r\n\t\t\t\t\tthrow new Error(data.message)\r\n\t\t\t\t}\r\n\t\t\t\tprops.handleClose()\r\n\t\t\t\tprops.signalAddSuccess()\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\tif (!mountedRef.current) return null\r\n\t\t\t\tif (Array.isArray(err)) {\r\n\t\t\t\t\tconsole.log('1', err)\r\n\t\t\t\t\tsetFetchErrors(err)\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tconsole.log('2', err)\r\n\t\t\t\t\tsetFetchErrors([err.message])\r\n\t\t\t\t}\r\n\t\t\t\tsetIsLoading(false)\r\n\t\t\t})\r\n\t}\r\n\r\n\tconsole.log('Create availability form re render')\r\n\r\n\t// return 056 if Sun, Fri, Sat is checked\r\n\tconst getSelectedDaysValue = () => {\r\n\t\tlet val = ''\r\n\t\tselectedDays.map(day => {\r\n\t\t\tif (day.id == EVERYDAY_INDEX) { return }\r\n\t\t\tif (day.isChecked) {\r\n\t\t\t\tval += day.id\r\n\t\t\t}\r\n\t\t})\r\n\t\treturn val\r\n\t}\r\n\r\n\tconst onTimeFromChange = (e) => {\r\n\t\tlet time = destructHHMM(e.target.value)\r\n\r\n\t\tif (timeTo == '' || time < timeTo) {\r\n\t\t\tsetTimeFrom(time)\r\n\t\t\tif (dateError) {\r\n\t\t\t\tsetDateError('')\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\te.target.value = ''\r\n\t\t\tsetDateError('Must be lesser.')\r\n\t\t}\r\n\t}\r\n\r\n\tconst onTimeToChange = (e) => {\r\n\t\tlet time = destructHHMM(e.target.value)\r\n\r\n\t\tif (timeFrom == '' || time > timeFrom) {\r\n\t\t\tsetTimeTo(time)\r\n\t\t\tif (dateError) {\r\n\t\t\t\tsetDateError('')\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\te.target.value = ''\r\n\t\t\tsetDateError('Must be greater.')\r\n\t\t}\r\n\t}\r\n\r\n\tconst destructHHMM = (hhmmStr) => {\r\n\t\tlet list = hhmmStr.split(':')\r\n\t\treturn list[0] * 60 + list[1] * 1\r\n\t}\r\n\r\n\tconst onSelectedDayChange = (e) => {\r\n\t\tsetSelectedDays(selectedDays.map(day => {\r\n\t\t\tif (e.target.id == 7) {\r\n\t\t\t\tselectedDays.map(d => {\r\n\t\t\t\t\td.isChecked = e.target.checked\r\n\t\t\t\t})\r\n\t\t\t} else {\r\n\t\t\t\tif (e.target.id == day.id) {\r\n\t\t\t\t\tday.isChecked = e.target.checked\r\n\t\t\t\t\tselectedDays[7].isChecked = false\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn {\r\n\t\t\t\t...day\r\n\t\t\t}\r\n\t\t}))\r\n\t\tconsole.log(selectedDays)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className=\"mt-3 mb-3\">\r\n\t\t\t\t<form className=\"form-default-box\" onSubmit={handleAddAvailability} style={{ margin: \"auto\", maxWidth: 320 }}>\r\n\r\n\t\t\t\t\t{/* {TIME INPUTS} */}\r\n\t\t\t\t\t<div className=\"py-1\" style={{ textAlign: \"center\" }}>\r\n\t\t\t\t\t\t<b>From</b>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div style={{ margin: \"5px auto\", width: \"100%\", textAlign: \"center\" }}>\r\n\t\t\t\t\t\t<div style={{ display: \"inline-block\" }}>\r\n\t\t\t\t\t\t\t<select className=\"form-select\" defaultValue={fromH} name=\"fromH\" id=\"fromH\"\t\t\t\t\t\r\n\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\t\tsetFromH(e.target.value)\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<option value=\"0\">12</option>\r\n\t\t\t\t\t\t\t\t<option value=\"1\">01</option>\r\n\t\t\t\t\t\t\t\t<option value=\"2\">02</option>\r\n\t\t\t\t\t\t\t\t<option value=\"3\">03</option>\r\n\t\t\t\t\t\t\t\t<option value=\"4\">04</option>\r\n\t\t\t\t\t\t\t\t<option value=\"5\">05</option>\r\n\t\t\t\t\t\t\t\t<option value=\"6\">06</option>\r\n\t\t\t\t\t\t\t\t<option value=\"7\">07</option>\r\n\t\t\t\t\t\t\t\t<option value=\"8\">08</option>\r\n\t\t\t\t\t\t\t\t<option value=\"9\">09</option>\r\n\t\t\t\t\t\t\t\t<option value=\"10\">10</option>\r\n\t\t\t\t\t\t\t\t<option value=\"11\">11</option>\r\n\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t&nbsp;<b>:</b>&nbsp;\r\n\t\t\t\t\t\t<div style={{ display: \"inline-block\" }}>\r\n\t\t\t\t\t\t\t<select className=\"form-select\" defaultValue={fromM} name=\"fromM\" id=\"fromM\" \r\n\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\tsetFromM(e.target.value)\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<option value=\"0\">00</option>\r\n\t\t\t\t\t\t\t\t<option value=\"30\">30</option>\r\n\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t&nbsp;\r\n\t\t\t\t\t\t<div style={{ display: \"inline-block\" }}>\r\n\t\t\t\t\t\t\t<select className=\"form-select\" defaultValue={fromAP} name=\"fromAP\" id=\"fromAP\" \r\n\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\tsetFromAP(e.target.value)\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<option value=\"AM\">AM</option>\r\n\t\t\t\t\t\t\t\t<option value=\"PM\">PM</option>\r\n\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"py-1\" style={{ textAlign: \"center\" }}>\r\n\t\t\t\t\t\t<b>To</b>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div style={{ margin: \"5px auto\", width: \"100%\", textAlign: \"center\" }}>\r\n\t\t\t\t\t\t<div style={{ display: \"inline-block\" }}>\r\n\t\t\t\t\t\t\t<select className=\"form-select\" defaultValue={toH} name=\"toH\" id=\"toH\" \r\n\t\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\t\tsetToH(e.target.value)\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<option value=\"0\">12</option>\r\n\t\t\t\t\t\t\t\t<option value=\"1\">01</option>\r\n\t\t\t\t\t\t\t\t<option value=\"2\">02</option>\r\n\t\t\t\t\t\t\t\t<option value=\"3\">03</option>\r\n\t\t\t\t\t\t\t\t<option value=\"4\">04</option>\r\n\t\t\t\t\t\t\t\t<option value=\"5\">05</option>\r\n\t\t\t\t\t\t\t\t<option value=\"6\">06</option>\r\n\t\t\t\t\t\t\t\t<option value=\"7\">07</option>\r\n\t\t\t\t\t\t\t\t<option value=\"8\">08</option>\r\n\t\t\t\t\t\t\t\t<option value=\"9\">09</option>\r\n\t\t\t\t\t\t\t\t<option value=\"10\">10</option>\r\n\t\t\t\t\t\t\t\t<option value=\"11\">11</option>\r\n\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t&nbsp;<b>:</b>&nbsp;\r\n\t\t\t\t\t\t<div style={{ display: \"inline-block\" }}>\r\n\t\t\t\t\t\t\t<select className=\"form-select\" defaultValue={toM} name=\"toM\" id=\"toM\" \r\n\t\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\t\tsetToM(e.target.value)\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<option value=\"0\">00</option>\r\n\t\t\t\t\t\t\t\t<option value=\"30\">30</option>\r\n\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t&nbsp;\r\n\t\t\t\t\t\t<div style={{ display: \"inline-block\" }}>\r\n\t\t\t\t\t\t\t<select className=\"form-select\" defaultValue={toAP} name=\"toAP\" id=\"toAP\" \r\n\t\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\t\tsetToAP(e.target.value)\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<option value=\"AM\">AM</option>\r\n\t\t\t\t\t\t\t\t<option value=\"PM\">PM</option>\r\n\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"form-check\">\r\n\t\t\t\t\t\t{selectedDays.map((day) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<div key={day.id}>\r\n\t\t\t\t\t\t\t\t\t<input className=\"form-check-input\" type=\"checkbox\" id={day.id} onChange={onSelectedDayChange} checked={day.isChecked} />\r\n\t\t\t\t\t\t\t\t\t<label className=\"form-check-label\" htmlFor={day.id}>{day.day}</label>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</div>\r\n\r\n\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tdateError\r\n\t\t\t\t\t\t&&\r\n\t\t\t\t\t\t<div className=\"alert alert-danger\" role=\"alert\">\r\n\t\t\t\t\t\t\t{dateError}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t}\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tdayError\r\n\t\t\t\t\t\t&&\r\n\t\t\t\t\t\t<div className=\"alert alert-danger\" role=\"alert\">\r\n\t\t\t\t\t\t\t{dayError}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t}\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tfetchErrors.map((error, index) => {\r\n\t\t\t\t\t\t\tconsole.log(error)\r\n\t\t\t\t\t\t\tconsole.log(`the error is: ${index}: ${error}`)\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<div key={index} className=\"alert alert-danger\" role=\"alert\">\r\n\t\t\t\t\t\t\t\t\t{error}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t{/* {Submit and Cancel buttons} */}\r\n\t\t\t\t\t<div style={{ width: \"100%\", height: 20, marginTop: 20 }}>\r\n\t\t\t\t\t\t<button type=\"button\" className=\"btn btn-danger d-inline-block float-start\"\r\n\t\t\t\t\t\t\tonClick={() => props.handleClose()}>Cancel</button>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tisLoading ?\r\n\t\t\t\t\t\t\t\t<button className=\"btn btn-primary float-end\" type=\"button\" disabled>\r\n\t\t\t\t\t\t\t\t\t<span className=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\r\n\t\t\t\t\t\t\t\t\t<span className=\"sr-only\">Loading...</span>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t\t<button type=\"submit\" className=\"btn btn-primary d-inline-block float-end\">Add</button>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t</div >\r\n\t)\r\n}\r\n\r\nexport default CrateAvailabilityForm\r\n","import React, { useState, useEffect, useRef } from 'react'\r\nimport { TiEdit, TiTrash } from 'react-icons/ti'\r\nimport { API_URL } from '../JS/variables';\r\n\r\n\r\nfunction Availability({availability, removeAvailability}) {\r\n\tconst [isLoading, setIsLoading] = useState(false)\r\n\tconst [error, setError] = useState('')\r\n\tconst mountedRef = useRef(true)\r\n\r\n\tconst WEEK = [\r\n\t\t'Sun', 'Mon', 'Tu', 'Wed', 'Th', 'Fri', 'Sat'\r\n\t]\r\n\r\n\tconst minutesToHhMmAPmString = (minutes) => {\r\n\t\t// 12:00 AM is a special case for 12:00 AM - 12:00AM (terminal)\r\n\t\tif(minutes == 24*60){\r\n\t\t\treturn '12:00 AM'\r\n\t\t}\r\n\t\tlet hours = Math.floor(minutes / 60)\r\n\t\tconst suffix = hours >= 12 ? \"PM\" : \"AM\"\r\n\t\tlet minutePart = ((minutes % 60) + '0').substring(0, 2)\r\n\t\thours = `${((hours + 11) % 12 + 1)}:${minutePart} ${suffix}`\r\n\t\treturn hours\r\n\t}\r\n\r\n\tconst start_time = minutesToHhMmAPmString(availability.start_minute)\r\n\tconst end_time = minutesToHhMmAPmString(availability.end_minute)\r\n\r\n\tconst getAvailDisplay = () => {\r\n\t\tlet week = [0, 0, 0, 0, 0, 0, 0]\r\n\t\tlet days = availability.days\r\n\t\tfor (let i = 0; i < days.length; i++) {\r\n\t\t\tweek[days[i]] = 1\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<div style={{ margin: \"10px auto\" }}>\r\n\t\t\t\t{week.map((day, index) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<div key={index} style={{ display: \"inline-block\", textAlign: \"center\", minWidth: 40, color: day ? 'orange' : '#eee' }}>{WEEK[index]}</div>\r\n\t\t\t\t\t)\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\r\n\tconst deleteAvailability = () => {\r\n\t\tsetIsLoading(true)\r\n\t\tsetError('')\r\n\t\tconst requestionOptions =\r\n\t\t{\r\n\t\t\tmethod: 'DELETE',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t'Accept': 'application/json'\r\n\t\t\t},\r\n\t\t\tcredentials: 'include'\r\n\t\t}\r\n\r\n\t\tfetch(`${API_URL}/api/availability/delete/${availability.availability_id}`, requestionOptions)\r\n\t\t\t.then(res => res.json())\r\n\t\t\t.then(data => {\r\n\t\t\t\tif (!data.success) {\r\n\t\t\t\t\tthrow new Error(data.message)\r\n\t\t\t\t}\r\n\t\t\t\tif (!mountedRef.current) return null\r\n\t\t\t\tsetIsLoading(false)\r\n\t\t\t\tsetError('')\r\n\t\t\t\tremoveAvailability(availability.availability_id)\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (!mountedRef.current) return null\r\n\t\t\t\tsetIsLoading(false)\r\n\t\t\t\tsetError(error.message)\r\n\t\t\t})\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className=\"mb-2 pd-4 default-wrapper mw-400\">\r\n\t\t\t\t<div className=\"\">\r\n\t\t\t\t\t<div className=\"mb-2\">\r\n\t\t\t\t\t\t{getAvailDisplay()}\r\n\t\t\t\t\t\t<p className=\"mb-1 text-secondary\"><b>{start_time == end_time ? 'All day' : `${start_time} - ${end_time}`}</b></p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{/* <button type=\"button\" title=\"edit\" className=\"btn btn-secondary py-1\">\r\n                            <TiEdit size={20} />\r\n                            <span className=\"align-middle\" style={{ fontSize: 15 }}>EDIT</span>\r\n                        </button> */}\r\n\r\n\t\t\t\t\t{/* {error warning} */}\r\n\t\t\t\t\t{error &&\r\n\t\t\t\t\t\t<div className=\"alert alert-danger\" role=\"alert\">\r\n\t\t\t\t\t\t\t{error}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t{/* {button panel} */}\r\n\t\t\t\t\t<div style={{ height: 30 }}>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tisLoading ?\r\n\t\t\t\t\t\t\t\t<button className=\"btn btn-danger py-1 float-end\" type=\"button\" disabled>\r\n\t\t\t\t\t\t\t\t\t<span className=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\r\n\t\t\t\t\t\t\t\t\t<span className=\"sr-only\">Deleting...</span>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t\t<button onClick={deleteAvailability} type=\"button\" title=\"delete\" className=\"btn btn-danger py-1 float-end\" >\r\n\t\t\t\t\t\t\t\t\t<TiTrash size={20} />\r\n\t\t\t\t\t\t\t\t\t<span className=\"align-middle button-text\" style={{ fontSize: 10 }}>DELETE</span>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div >\r\n\t)\r\n}\r\n\r\nexport default Availability\r\n","import React, { useState, useEffect, useRef } from 'react';\r\nimport CreateAvailabilityForm from './CreateAvailabilityForm';\r\nimport Availability from './Availability';\r\nimport { API_URL } from '../JS/variables';\r\n\r\nfunction AvailabilityPanel() {\r\n\tconst [formMessage, setFormMessage] = useState({ success: false })\r\n\tconst [availabilities, setAvailabilities] = useState([])\r\n\tconst mountedRef = useRef(true)\r\n\tconst [showForm, setShowForm] = useState(false)\r\n\tconst [addSuccess, setAddSuccess] = useState(false)\r\n\tconst [dummy, setDummy] = useState(0)\r\n\tconst [isLoading, setIsLoading] = useState(false)\r\n\tconst [error, setError] = useState('')\r\n\r\n\tconst signalAddSuccess = () => {\r\n\t\tsetAddSuccess(true)\r\n\t\tsetDummy(dummy + 1)\r\n\t\tsetTimeout(() => {\r\n\t\t\tsetAddSuccess(false)\r\n\t\t}, 2000)\r\n\t}\r\n\r\n\tfunction compare(a, b) {\r\n\t\tif (a.days < b.days) {\r\n\t\t\treturn -1;\r\n\t\t}\r\n\t\tif (a.days > b.days) {\r\n\t\t\treturn 1;\r\n\t\t}\r\n\t\treturn 0;\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\treturn () => {\r\n\t\t\tmountedRef.current = false\r\n\t\t}\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!mountedRef.current) return null\r\n\t\tsetIsLoading(true)\r\n\t\tsetError('')\r\n\t\tconst requestOptions = {\r\n\t\t\tmethod: 'GET',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t'Accept': 'application/json',\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfetch(`${API_URL}/api/availability/all`, requestOptions)\r\n\t\t\t.then(res => res.json())\r\n\t\t\t.then(res => {\r\n\t\t\t\tif (!mountedRef.current) return null\r\n\t\t\t\tif (!res.success) {\r\n\t\t\t\t\tthrow new Error(res.message)\r\n\t\t\t\t}\r\n\t\t\t\tconst avails = res.data\r\n\t\t\t\tavails.sort(compare)\r\n\t\t\t\tsetAvailabilities(res.data)\r\n\t\t\t\tsetError('')\r\n\t\t\t\tsetIsLoading(false)\r\n\t\t\t})\r\n\t\t\t.catch(err => {\r\n\t\t\t\tif (!mountedRef.current) return null\r\n\t\t\t\tconsole.log(err.message)\r\n\t\t\t\tsetError(err.message)\r\n\t\t\t\tsetIsLoading(false)\r\n\t\t\t})\r\n\r\n\r\n\t}, [dummy])\r\n\r\n\tconst removeAvailability = (id) => {\r\n\t\tsetAvailabilities(availabilities.filter(availability => availability.availability_id != id))\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"mt-3\">\r\n\t\t\t{/* {msg when successfully add new availability} */}\r\n\t\t\t{\r\n\t\t\t\taddSuccess &&\r\n\t\t\t\t<div className=\"alert alert-success\" role=\"alert\">\r\n\t\t\t\t\tSuccessfully added.\r\n\t\t\t\t</div>\r\n\t\t\t}\r\n\r\n\t\t\t{/* {Form component} */}\r\n\t\t\t{\r\n\t\t\t\tshowForm ?\r\n\t\t\t\t\t<CreateAvailabilityForm signalAddSuccess={signalAddSuccess} handleClose={() => setShowForm(false)} />\r\n\t\t\t\t\t:\r\n\t\t\t\t\t<div style={{ textAlign: \"center\" }}>\r\n\t\t\t\t\t\t<button type=\"button\" className=\"btn btn-primary mb-5\" onClick={() => setShowForm(true)}>\r\n\t\t\t\t\t\t\tAdd availability\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t}\r\n\r\n\t\t\t{/* {LOADING && ERROR} */}\r\n\t\t\t{\r\n\t\t\t\tisLoading ?\r\n\t\t\t\t\t<div className=\"text-center\">\r\n\t\t\t\t\t\t<div className=\"spinner-border\" role=\"status\" style={{color: \"orange\"}}>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t: (error &&\r\n\t\t\t\t\t\t<div className=\"alert alert-danger\" role=\"alert\">\r\n\t\t\t\t\t\t\t{error}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)\r\n\t\t\t}\r\n\r\n\t\t\t{/* {Availability list} */}\r\n\t\t\t{\r\n\t\t\t\tavailabilities.map(avail => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<Availability\r\n\t\t\t\t\t\t\tkey={avail.availability_id}\r\n\t\t\t\t\t\t\tremoveAvailability={removeAvailability}\r\n\t\t\t\t\t\t\tavailability={avail}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)\r\n\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default AvailabilityPanel\r\n","import React, {useState, useEffect} from 'react'\r\n\r\nfunction AppModal({show, onClose, title, children}) {\r\n\r\n    useEffect(() => {\r\n        document.addEventListener('keydown', closeOnEscapeKeyDown)\r\n        return () => {\r\n            document.removeEventListener('keydown', closeOnEscapeKeyDown)\r\n        }\r\n    }, [])\r\n\r\n    const closeOnEscapeKeyDown = (e) => {\r\n        if( e.keyCode === 27) {\r\n            onClose()\r\n        } \r\n    }\r\n\r\n    return (\r\n        <div className={`app-modal ${show? 'show' : ''}`} onClick={onClose}>\r\n            <div className=\"app-modal-content\" onClick={(e) => {e.stopPropagation()}}>\r\n                <div className=\"modal-header\">\r\n                    <h4 className=\"app-modal-title\">{title}</h4>\r\n                </div>\r\n                <div className=\"app-modal-body\">\r\n                    {children}\r\n                </div>\r\n                <div className=\"app-modal-footer\">\r\n                    <button className=\"btn btn-secondary\" onClick={onClose}>\r\n                        Close\r\n                    </button>\r\n                </div>\r\n            </div>\r\n            \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default AppModal\r\n","import React, { useState, useEffect, useRef } from 'react'\r\nimport { API_URL } from '../JS/variables';\r\n\r\nfunction Appointment({ id, onUpdate }) {\r\n\tconst [appointment, setAppointment] = useState(null)\r\n\tconst [isLoading, setIsLoading] = useState(false)\r\n\tconst [error, setError] = useState('')\r\n\tconst [showForm, setShowForm] = useState(false)\r\n\tconst [cancelText, setCancelText] = useState('')\r\n\tconst [cancelLoading, setCancelLoading] = useState(false)\r\n\tconst [cancelError, setCancelError] = useState('')\r\n\tconst mountedRef = useRef(true)\r\n\r\n\tuseEffect(() => {\r\n\t\treturn () => {\r\n\t\t\tmountedRef.current = false\r\n\t\t}\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!id) {\r\n\t\t\tconsole.log('id is null')\r\n\t\t\tsetAppointment(null)\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tsetIsLoading(true)\r\n\t\tsetError('')\r\n\r\n\t\tconst requestOptions = {\r\n\t\t\tmethod: 'GET',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t'Accept': 'application/json'\r\n\t\t\t},\r\n\t\t\tcredentials: 'include'\r\n\t\t}\r\n\t\tconsole.log('id is: ', id)\r\n\r\n\t\tfetch(`${API_URL}/api/appointment/id/${id}`, requestOptions)\r\n\t\t\t.then(res => res.json())\r\n\t\t\t.then(data => {\r\n\t\t\t\tif (!mountedRef.current) return null\r\n\t\t\t\tif (!data.success) {\r\n\t\t\t\t\tthrow new Error(data.message)\r\n\t\t\t\t}\r\n\t\t\t\tsetIsLoading(false)\r\n\t\t\t\tsetError('')\r\n\t\t\t\tconsole.log(data.appointment)\r\n\t\t\t\tsetAppointment(data.appointment)\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (!mountedRef.current) return null\r\n\t\t\t\tconsole.log(error)\r\n\t\t\t\tsetIsLoading(false)\r\n\t\t\t\tsetError(error.message)\r\n\t\t\t})\r\n\t}, [id])\r\n\r\n\tconst minutesToHhMmAPmString = (minutes) => {\r\n\t\tlet hours = Math.floor(minutes / 60)\r\n\t\tconst suffix = hours >= 12 ? \"PM\" : \"AM\"\r\n\t\tlet minutePart = ((minutes % 60) + '0').substring(0, 2)\r\n\t\thours = `${((hours + 11) % 12 + 1)}:${minutePart} ${suffix}`\r\n\t\treturn hours\r\n\t}\r\n\r\n\tconst convertDateAndTimeRangeString = (date, duration) => {\r\n\t\tlet d = date.getDate()\r\n\t\tlet m = date.getMonth() + 1\r\n\t\tlet y = date.getFullYear()\r\n\t\tlet start_time_string = minutesToHhMmAPmString(Math.floor(date.getHours()) * 60 + date.getMinutes())\r\n\t\tlet end_time_string = minutesToHhMmAPmString(Math.floor(date.getHours()) * 60 + date.getMinutes() + duration)\r\n\r\n\t\treturn `${d}/${m}/${y} ${start_time_string} - ${end_time_string}`\r\n\t}\r\n\r\n\tconst onCancelTextChange = (e) => {\r\n\t\t// auto adjust textarea height\r\n\t\te.target.style.height = \"\";\r\n\t\te.target.style.height = Math.min(e.target.scrollHeight, 300) + \"px\";\r\n\t\tsetCancelText(e.target.value)\r\n\t}\r\n\t\r\n\tconst handleCancelAppointment = (e) => {\r\n\t\te.preventDefault()\r\n\t\tconst requestOptions = {\r\n\t\t\tmethod: 'POST',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t'Accept': 'application/json'\r\n\t\t\t},\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\tid: appointment.appointment_id,\r\n\t\t\t\tmessage: cancelText\r\n\t\t\t}),\r\n\t\t\tcredentials: 'include'\r\n\t\t}\r\n\r\n\t\tsetCancelLoading(true)\r\n\t\tsetCancelError('')\r\n\r\n\t\tfetch(`${API_URL}/api/appointment/admincancel?id=${appointment.appointment_id}}`, requestOptions)\r\n\t\t\t.then(res => res.json())\r\n\t\t\t.then(data => {\r\n\t\t\t\tif(!mountedRef.current) return null\r\n\t\t\t\tif(!data.success){\r\n\t\t\t\t\tthrow new Error(data.message)\r\n\t\t\t\t}\r\n\t\t\t\tonUpdate()\r\n\t\t\t\t\r\n\t\t\t})\r\n\t\t\t.catch(error=> {\r\n\t\t\t\tconsole.log(error)\r\n\t\t\t\tsetCancelLoading(false)\r\n\t\t\t\tsetCancelError(error.message)\r\n\t\t\t})\r\n\t}\r\n\treturn (\r\n\t\t<div className=\"mb-2\">\r\n\t\t\t<div className=\"appointment-info-upcoming-wrapper py-2 px-2\">\r\n\t\t\t\t{/* {LOADING && ERROR} */}\r\n\t\t\t\t{\r\n\t\t\t\t\tisLoading ? <div className=\"text-center\">\r\n\t\t\t\t\t\t<div className=\"spinner-border\" role=\"status\">\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t\t: (error &&\r\n\t\t\t\t\t\t\t<div className=\"alert alert-danger\" role=\"alert\">\r\n\t\t\t\t\t\t\t\t{error}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t\t{\r\n\t\t\t\t\tappointment &&\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<p style={{color: \"black\"}}><b>Datetime: {convertDateAndTimeRangeString(new Date(appointment.appointment_start), appointment.duration)} ({appointment.duration} minutes)</b></p>\r\n\t\t\t\t\t\t<p><b>Appointment ID: </b>{appointment.appointment_id}</p>\r\n\t\t\t\t\t\t<p><b>Lesson: </b>{appointment.lesson_name}</p>\r\n\t\t\t\t\t\t<p><b>Customer: </b>{appointment.customer_name}</p>\r\n\t\t\t\t\t\t<p><b>Email: </b>{appointment.customer_email}</p>\r\n\t\t\t\t\t\t<p><b>Phone: </b>{appointment.customer_phone}</p>\r\n\t\t\t\t\t\t<p><b>Note: </b>{appointment.note}</p>\r\n\t\t\t\t\t\t<p><b>Fee: </b>${appointment.fee}</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t\t<div className=\"mt-2\">\r\n\t\t\t\t{\r\n\t\t\t\t\t!showForm ?\r\n\t\t\t\t\t\t<button className=\"btn btn-danger float-end\" onClick={() => setShowForm(true)}>\r\n\t\t\t\t\t\t\tcancel appointment\r\n\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t\t:\r\n\t\t\t\t\t\t(\r\n\t\t\t\t\t\t\tcancelLoading ?\r\n\t\t\t\t\t\t\t\t<button className=\"btn btn-danger py-1 float-end\" type=\"button\" disabled>\r\n\t\t\t\t\t\t\t\t\t<span className=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<form onSubmit={handleCancelAppointment} className=\"py-2\">\r\n\t\t\t\t\t\t\t\t\t\t<textarea onChange={onCancelTextChange} className=\"form-control\" id=\"cancelText\" rows={5} wrap=\"soft\" placeholder=\"write message here\" />\r\n\t\t\t\t\t\t\t\t\t\t<button type=\"submit\" title=\"delete\" className=\"btn btn-danger my-2 float-end\" >\r\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"align-middle button-text\" style={{ fontSize: 12 }}>confirm cancellation</span>\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t</form >\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Appointment\r\n","import React, { useState, useEffect, useRef } from 'react'\r\nimport { API_URL } from '../JS/variables'\r\nimport AppModal from './AppModal'\r\nimport Appointment from './Appointment'\r\n\r\nfunction Calendar() {\r\n\tconst [date, setDate] = useState(new Date())\r\n\tconst [week, setWeek] = useState([])\r\n\tconst [data, setData] = useState([])\r\n\tconst [isLoading, setIsLoading] = useState(false)\r\n\tconst [error, setError] = useState('')\r\n\tconst [selectedAppt, setSelectedAppt] = useState('')\r\n\tconst [dummy, setDummy] = useState(0)\r\n\tconst mountedRef = useRef(true)\r\n\r\n\tconst TIME = ['12:00 AM', '12:30 AM', '1:00 AM', '1:30 AM', '2:00 AM', '2:30 AM', '3:00 AM', '3:30 AM', '4:00 AM', '4:30 AM', '5:00 AM', '5:30 AM', '6:00 AM', '6:30 AM', '7:00 AM', '7:30 AM', '8:00 AM', '8:30 AM', '9:00 AM', '9:30 AM', '10:00 AM', '10:30 AM', '11:00 AM', '11:30 AM', '12:00 PM', '12:30 PM', '1:00 PM', '1:30 PM', '2:00 PM', '2:30 PM', '3:00 PM', '3:30 PM', '4:00 PM', '4:30 PM', '5:00 PM', '5:30 PM', '6:00 PM', '6:30 PM', '7:00 PM', '7:30 PM', '8:00 PM', '8:30 PM', '9:00 PM', '9:30 PM', '10:00 PM', '10:30 PM', '11:00 PM', '11:30 PM'\r\n\t]\r\n\r\n\r\n\tuseEffect(() => {\r\n\r\n\t\treturn () => {\r\n\t\t\tmountedRef.current = false\r\n\t\t}\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!date) return\r\n\r\n\t\tlet aWeek = []\r\n\t\tlet beginDate = new Date(date.setDate(date.getDate() - date.getDay())) // beginning of the week (Sunday)\r\n\r\n\t\t\t\t\r\n\t\tconsole.log(`date is: ... ${date}`)\r\n\t\tconsole.log(`begin date is: ... ${beginDate}`)\r\n\r\n\t\tbeginDate = new Date(beginDate.getFullYear(), beginDate.getMonth(), beginDate.getDate(), 0, 0, 0)\r\n\t\t\r\n\t\tconsole.log(`date is: ... ${date}`)\r\n\t\tconsole.log(`begin date is: ... ${beginDate}`)\r\n\r\n\t\t// push seven day in array\r\n\t\tfor (let i = 0; i < 7; i++) {\r\n\t\t\tlet dummyDate = new Date(beginDate)\r\n\t\t\tlet aDate = dummyDate.setDate(beginDate.getDate() + i)\r\n\t\t\taWeek.push(aDate)\r\n\t\t}\r\n\r\n\t\tconsole.log(`setting week to ${aWeek}`)\r\n\t\tsetWeek(aWeek)\r\n\t}, [date])\r\n\r\n\tuseEffect(async () => {\r\n\t\tif (!week.length) return\r\n\r\n\t\tlet n = 0\r\n\r\n\t\t//fetch appointment\r\n\t\tsetError('')\r\n\t\tsetIsLoading(true)\r\n\t\tlet appointments = await fetchWeekAppointment().catch((error) => {\r\n\t\t\tsetError(error.message)\r\n\t\t\tsetIsLoading(false)\r\n\t\t\tconsole.log(error)\r\n\t\t\tconsole.log(++n)\r\n\t\t})\r\n\r\n\t\tif (!appointments) {\r\n\t\t\tsetData([])\r\n\t\t\tconsole.log('in if !appointment')\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\t//find the ealiest time of a day\r\n\t\tlet min = appointments.length ? appointments[0].minuteStart : 0\r\n\t\tconsole.log(++n)\r\n\t\tfor (let i = 1; i < appointments.length; i++) {\r\n\t\t\tif (appointments[i].minuteStart < min) {\r\n\t\t\t\tmin = appointments[i].minuteStart\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconsole.log('after find earliest day')\r\n\r\n\t\t// find the index of time to be used in calendar\r\n\t\tlet indexToUse = Math.floor(min / 30)\r\n\t\tlet timeCol = TIME.splice(indexToUse)\r\n\r\n\t\tconsole.log(++n)\r\n\t\t// create 2D array to store each row (timeCol.length * 8)\r\n\t\tlet preparingData = new Array(timeCol.length)\r\n\t\tconsole.log(++n)\r\n\t\tfor (let i = 0; i < preparingData.length; i++) {\r\n\t\t\tpreparingData[i] = new Array('', '', '', '', '', '', '', '')\r\n\t\t}\r\n\t\tconsole.log(++n)\r\n\t\t// store time in first index of all data's index\r\n\t\tfor (let i = 0; i < preparingData.length; i++) {\r\n\t\t\tpreparingData[i][0] = {\r\n\t\t\t\ttype: 'time',\r\n\t\t\t\tdata: timeCol[i]\r\n\t\t\t}\r\n\t\t}\r\n\t\tconsole.log(++n)\r\n\t\tlet startDate = new Date(week[0])\r\n\t\tlet saturday = new Date(week[6])\r\n\t\tlet endDate = saturday.setDate(saturday.getDate() + 1)\r\n\t\t// store appointment in 2D array\r\n\t\tappointments.forEach(appt => {\r\n\t\t\tlet duration = appt.duration\r\n\t\t\tlet aDate = new Date(appt.appointmentStart)\r\n\t\t\tconsole.log(`aappointment start: ${aDate}`)\r\n\t\t\tconsole.log(`start date: ${startDate}`)\r\n\t\t\tconsole.log(`end date: ${endDate}`)\r\n\t\t\tconsole.log('in for each')\r\n\t\t\tif (aDate >= startDate && aDate < endDate) {\r\n\t\t\t\tconsole.log(++n)\r\n\t\t\t\tlet colIndex = aDate.getDay() + 1 //first column is time, thus add 1\r\n\r\n\t\t\t\t// find a row to push appt in\r\n\t\t\t\tlet rowIndex = Math.floor((appt.minuteStart - min) / 30)\r\n\r\n\t\t\t\tpreparingData[rowIndex][colIndex] = {\r\n\t\t\t\t\ttype: 'appointment',\r\n\t\t\t\t\tdata: appt\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// span row will overlap - assign the following rows in the same column to be blank when draw table\r\n\t\t\t\tlet numSpan = Math.floor(duration / 30) - 1 // subtract one because first row already assign\r\n\r\n\t\t\t\tfor (let i = 0; i < numSpan; i++) {\r\n\t\t\t\t\tpreparingData[++rowIndex][colIndex] = {\r\n\t\t\t\t\t\ttype: 'spanned'\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t\tconsole.log('final')\r\n\r\n\t\tsetIsLoading(false)\r\n\t\tsetError('')\r\n\t\tsetData(preparingData)\r\n\t}, [week, dummy])\r\n\r\n\tconst fetchWeekAppointment = () => {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tconst requestOptions = {\r\n\t\t\t\tcredentials: 'include'\r\n\t\t\t}\r\n\t\t\t// console.log('date that i will fetch', date)\r\n\t\t\t// console.log('date that i will fetch utc', date.toUTCString())\r\n\t\t\tfetch(`${API_URL}/api/appointment/week?utcDate=${date.toUTCString()}`, requestOptions)\r\n\t\t\t\t.then(res => res.json())\r\n\t\t\t\t.then(data => {\r\n\t\t\t\t\tif (!mountedRef) return null\r\n\t\t\t\t\tif (!data.success) {\r\n\t\t\t\t\t\tthrow new Error(data.message)\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tlet appointments = data.appointments.map(appt => {\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\tappointmentId: appt.appointment_id,\r\n\t\t\t\t\t\t\tcustomerName: appt.customer_name,\r\n\t\t\t\t\t\t\tlessonName: appt.lesson_name,\r\n\t\t\t\t\t\t\tappointmentStart: new Date(appt.appointment_start),\r\n\t\t\t\t\t\t\tduration: appt.duration,\r\n\t\t\t\t\t\t\tminuteStart: dateToMinuteStart(new Date(appt.appointment_start))\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t})\r\n\t\t\t\t\tconsole.log(`appointments:\\n`)\r\n\t\t\t\t\tconsole.log(appointments)\r\n\t\t\t\t\tresolve(appointments)\r\n\t\t\t\t})\r\n\t\t\t\t.catch(error => {\r\n\t\t\t\t\treject(error)\r\n\t\t\t\t})\r\n\t\t})\r\n\t}\r\n\r\n\tconst refresh = () => {\r\n\t\tsetDummy(dummy + 1)\r\n\t}\r\n\r\n\tconst dateToMinuteStart = (date) => {\r\n\t\treturn date.getHours() * 60 + date.getMinutes()\r\n\t}\r\n\r\n\tconst handleChangeWeek = (numWeek) => {\r\n\t\tlet d = new Date(date)\r\n\t\td.setDate(d.getDate() + (7 * numWeek))\r\n\t\tsetDate(d)\r\n\t}\r\n\r\n\tconst formatDate = (datevalue) => {\r\n\t\tlet date = new Date(datevalue),\r\n\t\t\tday = date.getDate(),\r\n\t\t\tmonth = date.getMonth(),\r\n\t\t\tyear = date.getFullYear(),\r\n\t\t\tmonths = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],\r\n\t\t\tweeks = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],\r\n\t\t\tdayOfWeek = date.getDay()\r\n\r\n\t\treturn weeks[dayOfWeek] + ' ' + day + ' ' + months[month] + ' ' + year;\r\n\t}\r\n\r\n\tconst minutesToHhMmAPmString = (minutes) => {\r\n\t\tlet hours = Math.floor(minutes / 60)\r\n\t\tconst suffix = hours >= 12 ? \"PM\" : \"AM\"\r\n\t\tlet minutePart = ((minutes % 60) + '0').substring(0, 2)\r\n\t\thours = `${((hours + 11) % 12 + 1)}:${minutePart} ${suffix}`\r\n\t\treturn hours\r\n\t}\r\n\r\n\tconst convertDateAndTimeRangeString = (date, duration) => {\r\n\t\tlet start_time_string = minutesToHhMmAPmString(Math.floor(date.getHours()) * 60 + date.getMinutes())\r\n\t\tlet end_time_string = minutesToHhMmAPmString(Math.floor(date.getHours()) * 60 + date.getMinutes() + duration)\r\n\r\n\t\treturn `${start_time_string} - ${end_time_string}`\r\n\t}\r\n\r\n\tconst handleApptClicked = (e) => {\r\n\t\te.preventDefault()\r\n\t\tsetSelectedAppt(e.currentTarget.id)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t{\r\n\t\t\t\tisLoading ?\r\n\t\t\t\t\t<div className=\"text-center\">\r\n\t\t\t\t\t\t<div className=\"spinner-border\" role=\"status\" style={{ color: \"orange\" }}>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t: (error &&\r\n\t\t\t\t\t\t<div className=\"alert alert-danger\" role=\"alert\">\r\n\t\t\t\t\t\t\t{error}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)\r\n\r\n\t\t\t}\r\n\t\t\t<div className=\"mx-auto text-center\" style={{ overflowY: \"auto\", maxHeight: \"100vh\" }}>\r\n\t\t\t\t<div className=\"mw-1000 mx-auto my-3\">\r\n\t\t\t\t\t<button className=\"me-5\" onClick={() => handleChangeWeek(-1)}>previous</button>\r\n\t\t\t\t\t<input type=\"date\" onChange={(e) => setDate(new Date(e.target.value))}/>\r\n\t\t\t\t\t<button onClick={() => refresh()}>refresh</button>\r\n\t\t\t\t\t<button className=\"ms-5\" onClick={() => handleChangeWeek(1)}>next</button>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"mw-1000 mx-auto\" style={{ overflowX: \"scroll\", maxHeight: \"90vh\" }}>\r\n\t\t\t\t\t<table className=\"calendar\">\r\n\t\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t<th style={{ maxWidth: 60 }}></th>\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tweek.map((day, index) => {\r\n\t\t\t\t\t\t\t\t\t\tlet [w, d, m, y] = formatDate(day).split(' ')\r\n\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t<th className=\"head-fixed\" key={index}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<p>{w}</p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<p>{d} {m} {y}</p>\r\n\t\t\t\t\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t</thead>\r\n\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t<th className=\"header-fixed\"></th>\r\n\t\t\t\t\t\t\t\t<td colSpan={7} style={{height: \"20px\"}}></td>\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tdata.map((row, index) => {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<tr key={index}>\r\n\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\trow.map((col, index) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tswitch (col.type) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'appointment':\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlet appt = col.data\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td className=\"td-with-data\" rowSpan={Math.floor(appt.duration / 30)} key={index}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div id={appt.appointmentId} onClick={handleApptClicked}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p>{convertDateAndTimeRangeString(appt.appointmentStart, appt.duration)}</p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p>{appt.lessonName}</p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p>{appt.customerName}</p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p>{appt.duration} minutes</p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p>{appt.appointmentId}</p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'time':\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th className=\"header-fixed\" key={index} style={{verticalAlign: \"top\"}}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div style={{minHeight: 25}}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"time\" style={{position: \"absolute\", top: -12, right: 5}}>{col.data}</p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'spanned':\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td key={index}></td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t</table>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t{\r\n\t\t\t\tselectedAppt &&\r\n\t\t\t\t<AppModal\r\n\t\t\t\t\tshow={selectedAppt ? true : false}\r\n\t\t\t\t\tonClose={() => setSelectedAppt('')}\r\n\t\t\t\t\ttitle={`Appointment: ${selectedAppt}`}>\r\n\t\t\t\t\t<Appointment \r\n\t\t\t\t\t\tid={selectedAppt} \r\n\t\t\t\t\t\tonUpdate={() => {\r\n\t\t\t\t\t\t\trefresh()\r\n\t\t\t\t\t\t\tsetSelectedAppt('')\r\n\t\t\t\t\t\t}} \r\n\t\t\t\t\t/>\r\n\t\t\t\t</AppModal>\r\n\t\t\t}\r\n\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Calendar\r\n","import React from 'react';\r\nimport { Switch, Route, Redirect } from 'react-router-dom';\r\nimport Sidebar from './Sidebar';\r\nimport LessonPanel from './LessonPanel';\r\nimport Booking from './Booking';\r\nimport AvailabilityPanel from './AvailabilityPanel';\r\nimport Calendar from './Calendar';\r\n\r\n\r\nfunction Upload() {\r\n  return (\r\n    <div>\r\n      Upload\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nfunction AdminPanel() {\r\n  return (\r\n    <div>\r\n      <div style={{position: \"relative\"}}>\r\n        <Sidebar />\r\n          <div className=\"content-wrapper\">\r\n              <Switch>\r\n                <Route exact path=\"/\">\r\n                  Greeting user\r\n                </Route>\r\n                <Route path=\"/calendar\">\r\n                  <Calendar />\r\n                </Route>\r\n                <Route path=\"/lesson\">\r\n                  <LessonPanel />\r\n                </Route>\r\n                <Route path=\"/availability\">\r\n                  <AvailabilityPanel />\r\n                </Route>\r\n                <Route path=\"/upload\">\r\n                  <Upload />\r\n                </Route>\r\n                <Route path=\"/booking\">\r\n                  <Booking />\r\n                </Route>\r\n              </Switch>\r\n          </div>\r\n\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default AdminPanel\r\n","import React, { useState, useEffect, useContext } from 'react'\r\nimport {AppContext} from './AppContext'\r\nimport Cookies from 'js-cookie'\r\nimport { API_URL } from '../JS/variables'\r\n\r\nfunction Login() {\r\n    const {user, setUser} = useContext(AppContext)\r\n    const [email, setEmail] = useState('')\r\n    const [password, setPassword] = useState('')\r\n    const [isLoading, setIsLoading] = useState(false)\r\n    const [error, setError] = useState('')\r\n\r\n\r\n    useEffect(() => {\r\n        document.body.style = \"background: #f29a04\"\r\n\r\n        return () => {\r\n            document.body.style = { background: \"#eee\" }  //whenever the component removes it will executes\r\n        }\r\n    }, [])\r\n\r\n    const handleLogin = (e) => {\r\n        e.preventDefault()\r\n        const requestOptions = {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Accept': 'application/json',\r\n            },\r\n            body: JSON.stringify({\r\n                email: email,\r\n                password: password\r\n            }),\r\n            credentials: 'include'\r\n        }\r\n        setIsLoading(true)\r\n        setError(false)\r\n\r\n        fetch(`${API_URL}/api/auth/login`, requestOptions)\r\n            .then((res) => {\r\n                console.log(res)\r\n\r\n                return res\r\n            })\r\n            .then(res => res.json())\r\n            .then(data => {\r\n                if(!data.success){\r\n                    throw new Error(data.message)\r\n                }\r\n                Cookies.set('loggedIn', true)\r\n                Cookies.set('email', data.email)\r\n                console.log(document.cookie)\r\n                setUser({loggedIn: true})\r\n            })\r\n            .catch(error => {\r\n                console.log(error)\r\n                setIsLoading(false)\r\n                setError(error.message)\r\n            })\r\n    }\r\n\r\n    return (\r\n        <div >\r\n            <div className=\"box\">\r\n                <h2>Login</h2>\r\n                <form onSubmit={handleLogin}>\r\n                    <div className=\"inputBox\">\r\n                        <input type=\"email\" name=\"email\" onChange={(e) => setEmail(e.target.value)} required/>\r\n                        <label htmlFor=\"email\">Username</label>\r\n                    </div>\r\n                    <div className=\"inputBox\">\r\n                        <input type=\"password\" name=\"password\" onChange={(e) => setPassword(e.target.value)} required/>\r\n                        <label htmlFor=\"password\">password</label>\r\n                    </div>\r\n\r\n                    {error &&\r\n                        <div className=\"alert alert-danger  show mt-3\" role=\"alert\">\r\n                            {error}\r\n                        </div>\r\n                    }\r\n                    {\r\n                        isLoading ?\r\n                            <button className=\"btn btn-primary float-end\" type=\"button\" disabled>\r\n                                <span className=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\r\n                                <span className=\"sr-only\">Loading...</span>\r\n                            </button>\r\n                            :\r\n                            <button type=\"submit\" className=\"btn btn-primary d-inline-block float-end\">Submit</button>\r\n                    }\r\n\r\n                </form>\r\n\r\n\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Login\r\n","import React from 'react'\r\nimport { EatLoading } from 'react-loadingg'\r\n\r\nfunction Loading() {\r\n    return (\r\n        <div>\r\n            <EatLoading size=\"40\" />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Loading\r\n","import './App.css';\nimport React, { useState, useEffect } from 'react'\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom'\nimport AdminPanel from './components/AdminPanel'\nimport Login from './components/Login'\nimport { AppContext } from './components/AppContext';\nimport Cookies from 'js-cookie'\nimport Loading from './components/Loading';\n//logged_in\n\n\nfunction App() {\n  const [user, setUser] = useState(null)\n  const [isLoading, setIsLoading] = useState(true)\n\n  useEffect(() => {\n\n    if (Cookies.get('loggedIn')) {\n      setUser({ loggedIn: true })\n    }\n\n    setIsLoading(false)\n  }, [])\n\n\n\n  return (\n    <AppContext.Provider value={{ user, setUser }} >\n      <div>\n        <Router basename={'admin'}>\n          {\n          isLoading ? \n            <Loading />\n\n          :\n          \n          user ?\n\n            <AdminPanel />\n            :\n\n            <Login />\n\n          }\n        </Router>\n      </div>\n    </AppContext.Provider>\n  );\n}\n\n\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}