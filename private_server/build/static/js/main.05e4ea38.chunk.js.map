{"version":3,"sources":["components/AppContext.jsx","JS/variables.js","components/Sidebar.jsx","components/CreateLessonForm.jsx","components/Lesson.jsx","components/LessonPanel.jsx","components/DatePicker.jsx","components/TimeOffer.jsx","components/ClassOffer.jsx","components/Booking.jsx","components/CreateAvailabilityForm.jsx","components/Availability.jsx","components/AvailabilityPanel.jsx","components/AppModal.jsx","components/Appointment.jsx","components/Calendar.jsx","components/AdminPanel.jsx","components/Login.jsx","components/Loading.jsx","App.js","index.js"],"names":["AppContext","createContext","API_URL","Sidebar","setUser","useContext","size","className","title","activeClassName","to","onClick","fetch","method","headers","credentials","then","res","json","data","success","Error","message","Cookies","remove","catch","error","console","log","alert","CreateLessonForm","props","useState","lessonName","setLessonName","description","setDescription","price30m","setPrice30m","price60m","setPrice60m","loading","setLoading","setError","mountedRef","useRef","useEffect","current","onSubmit","e","preventDefault","requestOptions","body","JSON","stringify","lesson","ok","status","handleClose","signalAddSuccess","err","htmlFor","length","onChange","target","value","type","id","style","height","Math","min","scrollHeight","rows","maxLength","wrap","test","role","width","margin","disabled","Lesson","lessonId","removeLesson","isLoading","setIsLoading","fontSize","LessonPanel","lessons","setLessons","showForm","setShowForm","addSuccess","setAddSuccess","dummy","setDummy","filter","lesson_id","setTimeout","textAlign","color","map","lesson_name","price_30m","price_60m","MONTH","month","WEEK","DatePicker","date","setDate","setMonth","year","setYear","selectedMonth","setSelectedMonth","selectedYear","setSelectedYear","dates","setDates","handleDateChange","onDateChange","resetCalendar","newDates","today","Date","dayOfMonthAtStart","getDay","numObj","getDate","currentDate","i","theDate","obj","upComming","checkFutureDay","checkSameDay","push","date1","date2","getMonth","getFullYear","thresholdDate","monthHandle","parseInt","onSelectDateHandle","display","borderBottom","monthObj","aDay","index","aDate","upcommingCSS","currentCSS","TimeOffer","fetchErrors","setFetchErrors","times","setTimes","fullDate","day","toUTCString","duration","Array","isArray","time","HHMMAPMstr","minutes","hours","floor","suffix","minutePart","substring","minutesToHhMmAPmString","getHours","getMinutes","getTotalMinutesFromDate","onTimeSelected","ClassOffer","selectedLessonId","setSelectedLessonId","selectLesson","initDate","initMonth","initYear","INIT_FULLDATE","Booking","name","setName","email","setEmail","phone","setPhone","note","setNote","setDuration","setFullDate","setLesson","fullTime","setFullTime","submitErrors","setSubmitErrors","bookingSuccess","setBookingSuccess","handleSubmit","errors","d","maxWidth","padding","defaultValue","required","colSpan","verticalAlign","CrateAvailabilityForm","isChecked","selectedDays","setSelectedDays","dateError","dayError","setDayError","fromH","setFromH","fromM","setFromM","fromAP","setFromAP","toH","setToH","toM","setToM","toAP","setToAP","getSelectedDaysValue","val","onSelectedDayChange","checked","timeFrom","timeTo","days","marginTop","Availability","availability","removeAvailability","start_time","start_minute","end_time","end_minute","week","minWidth","getAvailDisplay","availability_id","AvailabilityPanel","availabilities","setAvailabilities","compare","a","b","sort","CreateAvailabilityForm","avail","AppModal","show","onClose","children","document","addEventListener","closeOnEscapeKeyDown","removeEventListener","keyCode","stopPropagation","Appointment","onUpdate","appointment","setAppointment","cancelText","setCancelText","cancelLoading","setCancelLoading","setCancelError","m","y","start_time_string","end_time_string","convertDateAndTimeRangeString","appointment_start","appointment_id","customer_name","customer_email","customer_phone","fee","placeholder","Calendar","dateInputDisplay","setDateInputDisplay","setWeek","setData","selectedAppt","setSelectedAppt","TIME","setDateToBeginningOfWeek","setHours","setMinutes","setSeconds","formatDate2","aWeek","beginDate","fetchWeekAppointment","appointments","minuteStart","indexToUse","timeCol","splice","preparingData","startDate","endDate","forEach","appt","appointmentStart","colIndex","rowIndex","numSpan","Promise","resolve","reject","appointmentId","customerName","dateToMinuteStart","refresh","handleWeekChange","numWeek","dDisplay","handleApptClicked","currentTarget","join","overflowY","maxHeight","overflowX","datevalue","formatDate","split","w","row","col","rowSpan","minHeight","position","top","right","Upload","AdminPanel","exact","path","Login","user","password","setPassword","background","set","cookie","loggedIn","Loading","App","get","Provider","basename","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.05e4ea38.chunk.js","sourcesContent":["import {createContext} from 'react'\r\n\r\nexport const AppContext = createContext({})","export const API_URL = ''\r\n\r\n// export const API_URL = 'http://localhost:3001'\r\n\r\n// export const API_URL = 'http://13.239.16.220:3001'","import React, {useContext} from 'react'\r\nimport { Link, Router, NavLink } from 'react-router-dom'\r\nimport { GiSpellBook, GiTeacher, GiBookmark } from \"react-icons/gi\";\r\nimport {GoCalendar} from \"react-icons/go\"\r\nimport { ImUpload2 } from 'react-icons/im'\r\nimport { RiLogoutBoxRLine } from 'react-icons/ri'\r\nimport Cookies from 'js-cookie'\r\nimport {AppContext} from './AppContext'\r\nimport { API_URL } from '../JS/variables';\r\n\r\nfunction Sidebar() {\r\n    const {setUser} = useContext(AppContext)\r\n    const size = 25\r\n\r\n    const logout = () => {\r\n        const requestOptions = {\r\n\t\t\tmethod: 'POST',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t'Accept': 'application/json'\r\n\t\t\t},\r\n            credentials: 'include'\r\n\t\t}\r\n        fetch(`${API_URL}/api/auth/logout`, requestOptions)\r\n            .then(res => res.json())\r\n            .then(data => {\r\n                if(!data.success){\r\n                    throw new Error(data.message)\r\n                }\r\n                Cookies.remove('loggedIn')\r\n                Cookies.remove('email')\r\n                setUser(null)\r\n            })\r\n            .catch(error => {\r\n                console.log(error.message)\r\n                alert('Something went wrong. Cannot logout properly.')\r\n            })\r\n    }\r\n    return (\r\n        <div className=\"sidebar-wrapper\" >\r\n            <div className=\"sidebar-upper-wrapper\">\r\n                <ul>\r\n                    <li data-toggle=\"tooltip\" data-placement=\"right\" title=\"calendar\">\r\n                        <NavLink\r\n                            activeClassName=\"sidebar-link--active\"\r\n                            className=\"sidebar-link\"\r\n                            to=\"/calendar\">\r\n                            <GoCalendar size={size} />\r\n                            <p>Calendar</p>\r\n                        </NavLink>\r\n                    </li>\r\n                    <li data-toggle=\"tooltip\" data-placement=\"right\" title=\"manage guitar lessons\">\r\n                        <NavLink\r\n                            activeClassName=\"sidebar-link--active\"\r\n                            className=\"sidebar-link\"\r\n                            to=\"/lesson\">\r\n                            <GiSpellBook size={size} />\r\n                            <p>Lesson</p>\r\n\r\n                        </NavLink>\r\n                    </li>\r\n                    <li data-toggle=\"tooltip\" data-placement=\"right\" title=\"manage my availability\">\r\n                        <NavLink\r\n                            activeClassName=\"sidebar-link--active\"\r\n                            className=\"sidebar-link\"\r\n                            to=\"/availability\">\r\n                            <GiTeacher size={size} />\r\n                            <p>Availability</p>\r\n\r\n                        </NavLink>\r\n                    </li>\r\n                    <li data-toggle=\"tooltip\" data-placement=\"right\" title=\"book an appointment\">\r\n                        <NavLink\r\n                            activeClassName=\"sidebar-link--active\"\r\n                            className=\"sidebar-link\"\r\n                            to=\"/booking\">\r\n                            <GiBookmark size={size} />\r\n                            <p>Book appointment</p>\r\n\r\n                        </NavLink>\r\n                    </li>\r\n                    <li data-toggle=\"tooltip\" data-placement=\"right\" title=\"upload files\">\r\n                        <NavLink\r\n                            activeClassName=\"sidebar-link--active\"\r\n                            className=\"sidebar-link\"\r\n                            to=\"/upload\">\r\n                            <ImUpload2 size={size} />\r\n                            <p>Upload</p>\r\n\r\n                        </NavLink>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n\r\n            <div className=\"sidebar-bottom-wrapper\">\r\n                <ul>\r\n                    <li data-toggle=\"tooltip\" data-placement=\"right\" title=\"log out\">\r\n                        <NavLink\r\n                            className=\"sidebar-link\"\r\n                            to=\"/\" onClick={() => {\r\n                                logout()\r\n                            }}>\r\n                            <RiLogoutBoxRLine size={size} />\r\n                            <p>Logout</p>\r\n\r\n                        </NavLink>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Sidebar\r\n","import React, { useState, useEffect, useRef } from 'react'\r\nimport { API_URL } from '../JS/variables'\r\nconst MAX_DESCRIPTION_LENGTH = 500\r\nconst MAX_LESSON_NAME_LENGTH = 70\r\n\r\nfunction CreateLessonForm(props) {\r\n\tconst [lessonName, setLessonName] = useState('')\r\n\tconst [description, setDescription] = useState('')\r\n\tconst [price30m, setPrice30m] = useState('')\r\n\tconst [price60m, setPrice60m] = useState('')\r\n\tconst [loading, setLoading] = useState(false)\r\n\tconst [error, setError] = useState('')\r\n\tconst mountedRef = useRef(true)\r\n\r\n\tconst onLessonNameChange = (e) => {\r\n\t\tlet lessonName = e.target.value\r\n\t\tif (lessonName.length <= MAX_LESSON_NAME_LENGTH) {\r\n\t\t\tsetLessonName(e.target.value)\r\n\t\t} else {\r\n\t\t\te.target.value = lessonName\r\n\t\t}\r\n\t}\r\n\r\n\tconst onDescriptionChange = (e) => {\r\n\t\t// auto adjust textarea height\r\n\t\te.target.style.height = \"\";\r\n\t\te.target.style.height = Math.min(e.target.scrollHeight, 300) + \"px\";\r\n\r\n\t\tlet value = e.target.value\r\n\r\n\t\tif (value.length <= MAX_DESCRIPTION_LENGTH) {\r\n\t\t\tsetDescription(value)\r\n\t\t}\r\n\r\n\t\tif (value.length > MAX_DESCRIPTION_LENGTH) {\r\n\t\t\te.target.value = description\r\n\t\t}\r\n\t}\r\n\r\n\tconst onPrice30mChange = (e) => {\r\n\t\tlet value = e.target.value\r\n\t\tlet isMoney = /^\\d+\\.{0,1}\\d{0,2}$/.test(value)\r\n\t\tif (isMoney || value === '') {\r\n\t\t\tsetPrice30m(value)\r\n\t\t} else {\r\n\t\t\te.target.value = ''\r\n\t\t}\r\n\t}\r\n\r\n\tconst onPrice60mChange = (e) => {\r\n\t\tlet value = e.target.value\r\n\t\tlet isMoney = /^\\d+\\.{0,1}\\d{0,2}$/.test(value)\r\n\t\tif (isMoney || value === '') {\r\n\t\t\tsetPrice60m(value)\r\n\t\t} else {\r\n\t\t\te.target.value = ''\r\n\t\t}\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\treturn () => {\r\n\t\t\tmountedRef.current = false\r\n\t\t}\r\n\t}, [])\r\n\r\n\tconst handleAddNewLesson = (e) => {\r\n\t\te.preventDefault()\r\n\t\tif(!mountedRef.current) return null\r\n\t\tsetLoading(true)\r\n\t\tsetError('')\r\n\r\n\t\tconst requestOptions = {\r\n\t\t\tmethod: 'POST',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t'Accept': 'application/json'\r\n\t\t\t},\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\tlesson: lessonName,\r\n\t\t\t\tdescription: description,\r\n\t\t\t\tprice30m: price30m,\r\n\t\t\t\tprice60m: price60m\r\n\t\t\t}),\r\n\t\t\tcredentials: 'include'\r\n\t\t}\r\n\r\n\t\tfetch(`${API_URL}/api/lesson/add`, requestOptions)\r\n\t\t\t.then(res => {\r\n\t\t\t\tif (!res.ok) {\r\n\t\t\t\t\tthrow { message: `${res.status}: Cannot connect to the server.` }\r\n\t\t\t\t}\r\n\t\t\t\treturn res\r\n\t\t\t})\r\n\t\t\t.then(res => res.json())\r\n\t\t\t.then((data) => {\r\n\t\t\t\tif(!mountedRef.current) return null\r\n\t\t\t\tif(!data.success){\r\n\t\t\t\t\tthrow new Error(data.message)\r\n\t\t\t\t}\r\n\t\t\t\tprops.handleClose()\r\n\t\t\t\tprops.signalAddSuccess()\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\tif(!mountedRef.current) return null\r\n\t\t\t\tconsole.log(err)\r\n\t\t\t\tsetError(err.message)\r\n\t\t\t\tsetLoading(false)\r\n\t\t\t})\r\n\t}\r\n\r\n\tconsole.log('Create lesson form re render')\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className=\"mt-3 mb-3\">\r\n\t\t\t\t<form onSubmit={handleAddNewLesson} className=\"form-default-box mw-600\">\r\n\t\t\t\t\t<div className=\"mb-3\">\r\n\t\t\t\t\t\t<label htmlFor=\"lessonName\" className=\"form-label\"><b>Lesson name</b> ({MAX_LESSON_NAME_LENGTH - lessonName.length} chars left)</label>\r\n\t\t\t\t\t\t<input onChange={onLessonNameChange} value={lessonName} type=\"text\" className=\"form-control\" id=\"lessonName\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"mb-3\">\r\n\t\t\t\t\t\t<label htmlFor=\"description\" className=\"form-label\"><b>Description</b> ({MAX_DESCRIPTION_LENGTH - description.length} chars left)</label>\r\n\t\t\t\t\t\t<textarea onChange={onDescriptionChange} className=\"form-control\" id=\"description\" rows={5} maxLength={300} wrap=\"soft\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"mb-3\">\r\n\t\t\t\t\t\t<b>Price rates</b>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"row g-2 mb-2\">\r\n\t\t\t\t\t\t<div className=\"col-auto\"><label htmlFor=\"price-30m\" className=\"form-label\">30 minutes</label></div>\r\n\t\t\t\t\t\t<div className=\"col-3\">\r\n\t\t\t\t\t\t\t<input type=\"text\"\r\n\t\t\t\t\t\t\t\tonChange={onPrice30mChange}\r\n\t\t\t\t\t\t\t\tvalue={price30m}\r\n\t\t\t\t\t\t\t\tmaxLength=\"10\"\r\n\t\t\t\t\t\t\t\tclassName=\"form-control\" id=\"price-30m\" />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"col-auto\">$</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"row g-2 mb-2 \">\r\n\t\t\t\t\t\t<div className=\"col-auto \"><label htmlFor=\"price-60m\" className=\"form-label align-middle\">60 minutes</label></div>\r\n\t\t\t\t\t\t<div className=\"col-3\">\r\n\t\t\t\t\t\t\t<input type=\"text\"\r\n\t\t\t\t\t\t\t\tonChange={onPrice60mChange}\r\n\t\t\t\t\t\t\t\tvalue={price60m}\r\n\t\t\t\t\t\t\t\tmaxLength=\"10\"\r\n\t\t\t\t\t\t\t\tclassName=\"form-control\" id=\"price-60m\" />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"col-auto\">$</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\terror\r\n\t\t\t\t\t\t&&\r\n\t\t\t\t\t\t<div className=\"alert alert-danger\" role=\"alert\">\r\n\t\t\t\t\t\t\t{error}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t{/* {buttons panel} */}\r\n\t\t\t\t\t<div style={{ width: \"100%\", height: 30, margin: \"25px auto 10px auto\"}}>\r\n\t\t\t\t\t\t<button type=\"button\" className=\"btn btn-danger d-inline-block float-start\"\r\n\t\t\t\t\t\t\tonClick={() => props.handleClose()}>Cancel</button>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tloading ?\r\n\t\t\t\t\t\t\t\t<button className=\"btn btn-primary float-end\" type=\"button\" disabled>\r\n\t\t\t\t\t\t\t\t\t<span className=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\r\n\t\t\t\t\t\t\t\t\t<span className=\"sr-only\">Loading...</span>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t\t<button type=\"submit\" className=\"btn btn-primary d-inline-block float-end\">Add</button>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default CreateLessonForm\r\n","import React, { useState, useEffect, useRef } from 'react'\r\nimport { TiTrash } from 'react-icons/ti'\r\nimport { API_URL } from '../JS/variables'\r\n\r\nconst url = 'http://localhost:3001'\r\n\r\nfunction Lesson({ lessonId, lessonName, description, price30m, price60m, removeLesson }) {\r\n\tconst [error, setError] = useState('')\r\n\tconst [isLoading, setIsLoading] = useState(false)\r\n\tconst mountedRef = useRef(true)\r\n\r\n\tuseEffect(() => {\r\n\t\treturn () => {\r\n\t\t\tmountedRef.current = false\r\n\t\t}\r\n\t}, [])\r\n\t\r\n\tconst deleteLesson = () => {\r\n\t\tsetIsLoading(true)\r\n\t\tsetError('')\r\n\t\tconst requestionOptions =\r\n\t\t{\r\n\t\t\tmethod: 'DELETE',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t'Accept': 'application/json'\r\n\t\t\t},\r\n\t\t\tcredentials: 'include'\r\n\t\t}\r\n\r\n\t\tfetch(`${API_URL}/api/lesson/delete/${lessonId}`, requestionOptions)\r\n\t\t\t.then(res => res.json())\r\n\t\t\t.then(data => {\r\n\t\t\t\tif (!data.success) {\r\n\t\t\t\t\tthrow new Error(data.message)\r\n\t\t\t\t}\r\n\t\t\t\tif (!mountedRef.current) return null\r\n\t\t\t\tsetIsLoading(false)\r\n\t\t\t\tsetError('')\r\n\t\t\t\tremoveLesson(lessonId)\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (!mountedRef.current) return null\r\n\t\t\t\tsetIsLoading(false)\r\n\t\t\t\tsetError(error.message)\r\n\t\t\t})\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"mb-2 pd-4\">\r\n\t\t\t<div className=\"default-wrapper mw-600\">\r\n\t\t\t\t<h1 className=\"web-main-color\">{lessonName}</h1>\r\n\t\t\t\t<div className=\"ms-3 mb-2\">\r\n\t\t\t\t\t<p className=\"text-secondary\">{description}</p>\r\n\t\t\t\t\t<p className=\"mb-1 text-secondary\"><b>Fee rates</b></p>\r\n\t\t\t\t\t<p className=\"mb-1 text-secondary\">30 minutes: <b>${price30m}</b></p>\r\n\t\t\t\t\t<p className=\"mb-1 text-secondary\">60 minutes: <b>${price60m}</b></p>\r\n\t\t\t\t</div>\r\n\t\t\t\t{/* <button type=\"button\" title=\"edit\" className=\"btn btn-secondary py-1\">\r\n                        <TiEdit size={20} />\r\n                        <span className=\"align-middle\" style={{ fontSize: 15 }}>EDIT</span>\r\n                    </button> */}\r\n\t\t\t\t{error &&\r\n\t\t\t\t\t<div className=\"alert alert-danger\" role=\"alert\">\r\n\t\t\t\t\t\t{error}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\r\n\t\t\t\t<div style={{ height: 30 }}>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tisLoading ?\r\n\t\t\t\t\t\t\t<button className=\"btn btn-danger py-1 float-end\" type=\"button\" disabled>\r\n\t\t\t\t\t\t\t\t<span className=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\r\n\t\t\t\t\t\t\t\t<span className=\"sr-only\">Deleting...</span>\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t<button onClick={deleteLesson} type=\"button\" title=\"delete\" className=\"btn btn-danger py-1 float-end\" >\r\n\t\t\t\t\t\t\t\t<TiTrash size={20} />\r\n\t\t\t\t\t\t\t\t<span className=\"align-middle button-text\" style={{ fontSize: 12 }}>DELETE</span>\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Lesson\r\n","import React, { useState, useEffect, useRef } from 'react'\r\nimport CreateLessonForm from './CreateLessonForm'\r\nimport Lesson from './Lesson'\r\nimport { API_URL } from '../JS/variables'\r\n\r\n\r\nfunction LessonPanel() {\r\n\tconst [lessons, setLessons] = useState([])\r\n\tconst [showForm, setShowForm] = useState(false)\r\n\tconst [addSuccess, setAddSuccess] = useState(false)\r\n\tconst [dummy, setDummy] = useState(0)\r\n\tconst [isLoading, setIsLoading] = useState(false)\r\n\tconst [error, setError] = useState('')\r\n\r\n\tconst mountedRef = useRef(true)\r\n\r\n\tconst signalAddSuccess = () => {\r\n\t\tsetAddSuccess(true)\r\n\t\tsetDummy(dummy + 1)\r\n\t\tsetTimeout(() => {\r\n\t\t\tsetAddSuccess(false)\r\n\t\t}, 2000)\r\n\t}\r\n\r\n\tconst removeLesson = (lessonId) => {\r\n\t\tsetLessons(lessons.filter(lesson => lesson.lesson_id != lessonId))\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\treturn () => {\r\n\t\t\tmountedRef.current = false\r\n\t\t}\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!mountedRef.current) return null\r\n\r\n\t\tsetIsLoading(true)\r\n\t\tsetError('')\r\n\r\n\t\tconst requestOptions = {\r\n\t\t\tmethod: 'GET',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t'Accept': 'application/json'\r\n\t\t\t},\r\n\t\t\tcredentials: 'include'\r\n\t\t}\r\n\t\tfetch(`${API_URL}/api/lesson/active`, requestOptions)\r\n\t\t\t.then(res => res.json())\r\n\t\t\t.then(data => {\r\n\t\t\t\tif (!data.success) {\r\n\t\t\t\t\tthrow new Error(data.message)\r\n\t\t\t\t}\r\n\t\t\t\tif (!data.lessons.length) {\r\n\t\t\t\t\tthrow new Error('There is no lesson. Please consider creating one.')\r\n\t\t\t\t}\r\n\t\t\t\tif (!mountedRef.current) return null\r\n\t\t\t\tsetLessons(data.lessons)\r\n\t\t\t\tsetIsLoading(false)\r\n\t\t\t\tsetError('')\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (!mountedRef.current) return null\r\n\t\t\t\tconsole.log(error.message)\r\n\t\t\t\tsetIsLoading(false)\r\n\t\t\t\tsetError(error.message)\r\n\t\t\t})\r\n\t}, [dummy])\r\n\r\n\treturn (\r\n\t\t<div className=\"pt-3\">\r\n\r\n\t\t\t{/* {msg when successfully add new lesson} */}\r\n\t\t\t{\r\n\t\t\t\taddSuccess &&\r\n\t\t\t\t<div className=\"alert alert-success\" role=\"alert\">\r\n\t\t\t\t\tSuccessfully added.\r\n\t\t\t\t</div>\r\n\t\t\t}\r\n\r\n\t\t\t{/* {show form when the button clicked} */}\r\n\t\t\t{\r\n\t\t\t\tshowForm ?\r\n\t\t\t\t\t<CreateLessonForm handleClose={() => setShowForm(false)} signalAddSuccess={signalAddSuccess} />\r\n\t\t\t\t\t:\r\n\t\t\t\t\t<div style={{ textAlign: \"center\" }}>\r\n\t\t\t\t\t\t<button className=\"btn btn-primary\" onClick={() => setShowForm(true)}>\r\n\t\t\t\t\t\t\tAdd Lesson\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t}\r\n\r\n\t\t\t<div className=\"pt-3\" style={{ textAlign: \"center\" }}>\r\n\r\n\t\t\t\t{/* {LOADING && ERROR} */}\r\n\t\t\t\t{\r\n\t\t\t\t\tisLoading ?\r\n\t\t\t\t\t\t<div className=\"text-center\">\r\n\t\t\t\t\t\t\t<div className=\"spinner-border\" role=\"status\" style={{ color: \"orange\" }}>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t: (error &&\r\n\t\t\t\t\t\t\t<div className=\"alert alert-danger\" role=\"alert\">\r\n\t\t\t\t\t\t\t\t{error}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t{/* {ALL LESSONS} */}\r\n\t\t\t\t{\r\n\t\t\t\t\tlessons.map(lesson => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<Lesson\r\n\t\t\t\t\t\t\t\tkey={lesson.lesson_id}\r\n\t\t\t\t\t\t\t\tremoveLesson={removeLesson}\r\n\t\t\t\t\t\t\t\tlessonId={lesson.lesson_id}\r\n\t\t\t\t\t\t\t\tlessonName={lesson.lesson_name}\r\n\t\t\t\t\t\t\t\tdescription={lesson.description}\r\n\t\t\t\t\t\t\t\tprice30m={lesson.price_30m}\r\n\t\t\t\t\t\t\t\tprice60m={lesson.price_60m}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)\r\n\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default LessonPanel\r\n","import React, { useState, useEffect } from 'react'\r\nimport { FaAngleLeft, FaAngleRight } from 'react-icons/fa'\r\n\r\nconst MONTH = [\r\n    { value: 0, month: 'JAN' },\r\n    { value: 1, month: 'FEB' },\r\n    { value: 2, month: 'MAR' },\r\n    { value: 3, month: 'APR' },\r\n    { value: 4, month: 'MAY' },\r\n    { value: 5, month: 'JUN' },\r\n    { value: 6, month: 'JUL' },\r\n    { value: 7, month: 'AUG' },\r\n    { value: 8, month: 'SEP' },\r\n    { value: 9, month: 'OCT' },\r\n    { value: 10, month: 'NOV' },\r\n    { value: 11, month: 'DEC' },\r\n]\r\n\r\nconst WEEK = [\r\n    'Sun', 'Mon', 'Tu', 'Wed', 'Th', 'Fri', 'Sat'\r\n]\r\n\r\nfunction DatePicker(props) {\r\n    const [date, setDate] = useState(props.date)\r\n    const [month, setMonth] = useState(props.month)\r\n    const [year, setYear] = useState(props.year)\r\n    const [selectedMonth, setSelectedMonth] = useState(props.month)\r\n    const [selectedYear, setSelectedYear] = useState(props.year)\r\n    const [dates, setDates] = useState([])\r\n    const handleDateChange = props.onDateChange\r\n\r\n    useEffect(() => {\r\n        resetCalendar()\r\n    }, [month, year])\r\n\r\n    const resetCalendar = () => {\r\n        let newDates = []\r\n        let today = new Date()\r\n        let startDayOfMonth = new Date(year, month, 1)\r\n        let dayOfMonthAtStart = startDayOfMonth.getDay()\r\n        let endDayOfMonth = new Date(year, month + 1, 0)\r\n        let numDayOfMonth = endDayOfMonth.getDate()\r\n\r\n        let numObj = numDayOfMonth + dayOfMonthAtStart\r\n\r\n        let currentDate = 1 - dayOfMonthAtStart\r\n        for (let i = 0; i < numObj; i++) {\r\n            let theDate = new Date(year, month, currentDate)\r\n            let upComming = currentDate > 0 && (checkFutureDay(theDate, today) || checkSameDay(theDate, today))\r\n\r\n            let obj = {\r\n                id: currentDate,\r\n                upComming: upComming\r\n            }\r\n            newDates.push(obj)\r\n            currentDate++\r\n        }\r\n        setDates(newDates)\r\n    }\r\n\r\n    const checkSameDay = (date1, date2) => {\r\n        return date1.getDate() == date2.getDate() && date1.getMonth() == date2.getMonth() && date1.getFullYear() == date2.getFullYear()\r\n    }\r\n\r\n    const checkFutureDay = (date, thresholdDate) => {\r\n        return date > thresholdDate\r\n    }\r\n\r\n    const incrementYear = () => {\r\n        setYear(year + 1)\r\n    }\r\n\r\n    const decrementYear = () => {\r\n        if (year > 1970) {\r\n            setYear(year - 1)\r\n        }\r\n    }\r\n\r\n    const monthHandle = (e) => {\r\n        setMonth(parseInt(e.target.id))\r\n        console.log('month', e.target.id)\r\n    }\r\n\r\n    const onSelectDateHandle = (e) => {\r\n        setSelectedMonth(month)\r\n        setSelectedYear(year)\r\n        setDate(parseInt(e.target.id))\r\n        handleDateChange(parseInt(e.target.id), month, year)\r\n        console.log('var:', parseInt(e.target.id), month, year)\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"calendar-picker\">\r\n                <div style={{ display: \"flex\", margin: \"10px 3px\", borderBottom: \"2px solid #f2f2f2\" }}>\r\n                    <h3 style={{ margin: \"auto\", fontSize: 25 }}>\r\n                        {`${date} ${MONTH[selectedMonth].month} ${selectedYear}`}\r\n                    </h3>\r\n                </div>\r\n\r\n                <div className=\"year-spinner\">\r\n                    <button onClick={decrementYear} className=\"float-start\" >\r\n                        <FaAngleLeft size={25} />\r\n                    </button>\r\n                    <span style={{ fontSize: 20 }}>{year}</span>\r\n                    <button onClick={incrementYear} className=\"float-end\">\r\n                        <FaAngleRight size={25} />\r\n                    </button>\r\n                </div>\r\n                <div className=\"month-picker py-2\">\r\n                    <div className=\"month-grid\">\r\n                        {\r\n                            MONTH.map(monthObj => {\r\n                                return (\r\n                                    <div key={monthObj.value} className={`${parseInt(monthObj.value) == parseInt(month) ? 'light-blue-active' : ''} light-blue month-item`}>\r\n                                        <button id={monthObj.value} onClick={monthHandle}>\r\n                                            {monthObj.month}\r\n                                        </button>\r\n                                    </div>\r\n                                )\r\n                            })\r\n                        }\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"date-grid py-2\">\r\n                    {\r\n                        WEEK.map((aDay, index) => {\r\n                            return (\r\n                                <div className=\"date-item date-item-header\" key={index} >\r\n                                    <div style={{ margin: \"auto\" }}>\r\n                                        {aDay}\r\n                                    </div>\r\n                                </div>\r\n                            )\r\n                        })\r\n                    }\r\n                    {\r\n                        dates.map(aDate => {\r\n                            let upcommingCSS = aDate.upComming ? 'date-item-upcomming' : ''\r\n                            let currentCSS = aDate.id == date && month == selectedMonth && year == selectedYear ? 'date-item-active' : ''\r\n\r\n                            return (\r\n                                <div className={`date-item ${upcommingCSS} ${currentCSS}`} key={aDate.id}>\r\n                                    <button disabled={!aDate.upComming ? true : false} onClick={onSelectDateHandle} id={aDate.id}>\r\n                                        <div id={aDate.id}>\r\n                                            <p id={aDate.id}>{aDate.id > 0 && aDate.id}</p>\r\n                                        </div>\r\n                                    </button>\r\n                                </div>\r\n                            )\r\n                        })\r\n                    }\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default DatePicker","import React, { useState, useEffect } from 'react'\r\nimport { API_URL } from '../JS/variables'\r\n\r\nfunction TimeOffer(props) {\r\n\tconst [fetchErrors, setFetchErrors] = useState([])\r\n\tconst [times, setTimes] = useState([])\r\n\tconst [isLoading, setIsLoading] = useState(false)\r\n\r\n\t// UTC TIME\r\n\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/UTC\r\n\r\n\tuseEffect(() => {\r\n\t\tsetIsLoading(true)\r\n\r\n\t\tconst requestOptions = {\r\n\t\t\tmethod: 'GET',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t'Accept': 'application/json'\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconsole.log(props.fullDate)\r\n\t\tlet date = new Date(props.fullDate)\r\n\t\tlet day = date.getDay()\r\n\t\tdate = date.toUTCString()\r\n\r\n\t\tfetch(`${API_URL}/api/availability/offertime?day=${day}&duration=${props.duration}&utcDate=${date}`, requestOptions)\r\n\t\t\t.then(res => res.json())\r\n\t\t\t.then((data) => {\r\n\t\t\t\tif (!data.success) {\r\n\t\t\t\t\tconsole.log(data)\r\n\t\t\t\t\tthrow new Error(data.message)\r\n\t\t\t\t}\r\n\t\t\t\tif (data.times.length === 0) {\r\n\t\t\t\t\tthrow new Error(\"I'm not available today. Check another day or decrease session time.\")\r\n\t\t\t\t}\r\n\t\t\t\tconsole.log(data)\r\n\t\t\t\tsetIsLoading(false)\r\n\t\t\t\tsetFetchErrors([])\r\n\t\t\t\tsetTimes(data.times)\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\tsetTimes([])\r\n\t\t\t\tsetIsLoading(false)\r\n\t\t\t\tif (Array.isArray(err)) {\r\n\t\t\t\t\tsetFetchErrors(err)\r\n\t\t\t\t\tconsole.log('it is array')\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tsetFetchErrors([err.message])\r\n\t\t\t\t\tconsole.log('err is not array')\r\n\t\t\t\t}\r\n\t\t\t\tconsole.log(err)\r\n\t\t\t})\r\n\t}, [props.fullDate, props.duration, props.dummy])\r\n\r\n\tconst minutesToHhMmAPmString = (minutes) => {\r\n\t\tlet hours = Math.floor(minutes / 60)\r\n\t\tconst suffix = hours >= 12 ? \"PM\" : \"AM\"\r\n\t\tlet minutePart = ((minutes % 60) + '0').substring(0, 2)\r\n\t\thours = `${((hours + 11) % 12 + 1)}:${minutePart} ${suffix}`\r\n\t\treturn hours\r\n\t}\r\n\r\n\tconst getTotalMinutesFromDate = (date) => {\r\n\t\treturn date.getHours() * 60 + date.getMinutes()\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t{\r\n\t\t\t\tisLoading ?\r\n\t\t\t\t\t<div style={{ margin: \"auto\", textAlign: \"center\" }}>\r\n\t\t\t\t\t\t<div className=\"spinner-border text-warning\" role=\"status\">\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t:\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\ttimes.map((time, index) => {\r\n\t\t\t\t\t\t\t\tconst date = new Date(time)\r\n\t\t\t\t\t\t\t\tconst minutes = getTotalMinutesFromDate(date)\r\n\t\t\t\t\t\t\t\tlet HHMMAPMstr = minutesToHhMmAPmString(minutes)\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<button key={index} type=\"button\" className=\"btn btn-secondary mx-2 my-2\" style={{ width: 80, fontSize: 12 }}\r\n\t\t\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\t\t\tprops.onTimeSelected(HHMMAPMstr)\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t>{HHMMAPMstr}</button>\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t}\r\n\t\t\t{\r\n\t\t\t\tfetchErrors.map((error, index) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<div key={index} className=\"alert alert-danger\" role=\"alert\">\r\n\t\t\t\t\t\t\t{error}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default TimeOffer\r\n","import React, { useState, useEffect, useRef } from 'react'\r\nimport { EatLoading } from 'react-loadingg'\r\nimport { API_URL } from '../JS/variables';\r\n\r\nfunction ClassOffer(props) {\r\n    const [lessons, setLessons] = useState([])\r\n    const [selectedLessonId, setSelectedLessonId] = useState(null)\r\n    const mountedRef = useRef(true)\r\n    const [isLoading, setIsLoading] = useState(false)\r\n    const [error, setError] = useState('')\r\n\r\n    useEffect(() => {\r\n        if (!mountedRef.current) return null\r\n\r\n        setIsLoading(true)\r\n        setError('')\r\n\r\n        const requestOptions = {\r\n            method: 'GET',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Accept': 'application/json'\r\n            }\r\n        }\r\n        fetch(`${API_URL}/api/lesson/active`, requestOptions)\r\n            .then(res => res.json())\r\n            .then(data => {\r\n                if (!data.success) {\r\n                    throw new Error(data.message)\r\n                }\r\n                if (!data.lessons.length) {\r\n                    throw new Error('We are sorry. No lesson is available now.')\r\n                }\r\n                if (!mountedRef.current) return null\r\n                setLessons(data.lessons)\r\n                setIsLoading(false)\r\n                setError('')\r\n            })\r\n            .catch(error => {\r\n                if (!mountedRef.current) return null\r\n                console.log(error.message)\r\n                setIsLoading(false)\r\n                setError(error.message)\r\n            })\r\n\r\n        return () => {\r\n            mountedRef.current = false\r\n        }\r\n    }, [])\r\n\r\n    return (\r\n        <div>\r\n            {/* {LOADING && ERROR} */}\r\n            {\r\n                isLoading ? <EatLoading color=\"orange\" />\r\n                    : (error &&\r\n                        <div className=\"alert alert-danger\" role=\"alert\">\r\n                            {error}\r\n                        </div>\r\n                    )\r\n\r\n            }\r\n            <div className=\"class-offer-flex\">\r\n            {lessons.map(lesson => {\r\n\r\n                return (\r\n                    <div className={`class-offer my-2 ${selectedLessonId == lesson.lesson_id? \"class-offer-active\" : \"class-offer-inactive\"}`}  \r\n                    key={lesson.lesson_id} \r\n                    onClick={() => {\r\n                        setSelectedLessonId(lesson.lesson_id)\r\n                        props.selectLesson({\r\n                            lessonId: lesson.lesson_id,\r\n                            lessonName: lesson.lesson_name,\r\n                            price30m: lesson.price_30m,\r\n                            price60m: lesson.price_60m,\r\n                        })\r\n                    }}>\r\n                        <h3>{lesson.lesson_name}</h3>\r\n                        <p>30 minutes: ${lesson.price_30m}</p>\r\n                        <p>60 minutes: ${lesson.price_60m}</p>\r\n                    </div>\r\n                )\r\n            })}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ClassOffer\r\n","import React, { useState, useEffect, useRef } from 'react'\r\nimport DatePicker from './DatePicker'\r\nimport TimeOffer from './TimeOffer'\r\nimport ClassOffer from './ClassOffer'\r\nimport { API_URL } from '../JS/variables';\r\n\r\nconst today = new Date()\r\nconst initDate = today.getDate()\r\nconst initMonth = today.getMonth() + 1\r\nconst initYear = today.getFullYear()\r\nconst INIT_FULLDATE = `${initYear}-${initMonth}-${initDate}`\r\nconst INIT_DURATION = 60\r\n\r\nfunction Booking(props) {\r\n\tconst [name, setName] = useState('')\r\n\tconst [email, setEmail] = useState('')\r\n\tconst [phone, setPhone] = useState('')\r\n\tconst [note, setNote] = useState('')\r\n\tconst [duration, setDuration] = useState(INIT_DURATION)\r\n\tconst [fullDate, setFullDate] = useState(INIT_FULLDATE)\r\n\tconst [lesson, setLesson] = useState(null)\r\n\tconst [fullTime, setFullTime] = useState('')\r\n\tconst [submitErrors, setSubmitErrors] = useState([])\r\n\tconst [isLoading, setIsLoading] = useState(false)\r\n\tconst [bookingSuccess, setBookingSuccess] = useState(false)\r\n\tconst [dummy, setDummy] = useState(0)\r\n\r\n\tconst mountedRef = useRef(true)\r\n\r\n\r\n\tuseEffect(() => {\r\n\t\treturn () => {\r\n\t\t\tmountedRef.current = false\r\n\t\t}\r\n\t}, [])\r\n\r\n\tconst signalBookingSuccess = () => {\r\n\t\tsetDummy(dummy + 1)\r\n\t\tsetBookingSuccess(true)\r\n\t\tsetTimeout(() => {\r\n\t\t\tif(!mountedRef.current) return null\r\n\t\t\tsetBookingSuccess(false)\r\n\t\t}, 7000)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tsetFullTime('')\r\n\t}, [fullDate, duration])\r\n\r\n\tconst handleDateChange = (date, month, year) => {\r\n\t\tsetFullDate(year + '-' + (month + 1) + '-' + date)\r\n\t}\r\n\r\n\tconst onDurationChange = (e) => {\r\n\t\tsetDuration(e.target.value)\r\n\t}\r\n\r\n\r\n\tconst handleSubmit = () => {\r\n\t\tlet errors = [\r\n\t\t\t...(lesson ? [] : ['Lesson is missing. Please select a lesson']),\r\n\t\t\t...(fullDate ? [] : ['Date is missing. Please select date']),\r\n\t\t\t...(fullTime ? [] : ['Time is missing. Please select time.']),\r\n\t\t\t...(name ? [] : ['Name is required.']),\r\n\t\t\t...(email ? [] : ['Email address is required.']),\r\n\t\t\t...(duration > 0 && duration % 30 == 0 ? [] : ['Select session duration.'])\r\n\t\t]\r\n\t\tif (errors.length) {\r\n\t\t\treturn setSubmitErrors(errors)\r\n\t\t}\r\n\r\n\t\t// convert to utc date\r\n\t\tlet d = new Date(`${fullDate} ${fullTime}`)\r\n\t\td = d.toUTCString()\r\n\r\n\t\tconst requestOptions = {\r\n\t\t\tmethod: 'POST',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t'Accept': 'application/json'\r\n\t\t\t},\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\tname: name,\r\n\t\t\t\temail: email,\r\n\t\t\t\tphone: phone,\r\n\t\t\t\tnote: note,\r\n\t\t\t\tdate: d,\r\n\t\t\t\tduration: duration,\r\n\t\t\t\tlessonId: lesson.lessonId\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tsetIsLoading(true)\r\n\t\tsetSubmitErrors([])\r\n\r\n\t\tfetch(`${API_URL}/api/booking`, requestOptions)\r\n\t\t\t.then(res => res.json())\r\n\t\t\t.then(data => {\r\n\t\t\t\tif (!mountedRef.current) return null\r\n\t\t\t\tif (!data.success) {\r\n\t\t\t\t\tthrow new Error(data.message)\r\n\t\t\t\t}\r\n\t\t\t\tsetSubmitErrors([])\r\n\t\t\t\tsetIsLoading(false)\r\n\t\t\t\tsetFullTime('')\r\n\t\t\t\tsignalBookingSuccess()\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (!mountedRef.current) return null\r\n\t\t\t\tif (Array.isArray(error)) {\r\n\t\t\t\t\tconsole.log('1', error)\r\n\t\t\t\t\tsetSubmitErrors(error)\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tconsole.log('2', error)\r\n\t\t\t\t\tsetSubmitErrors([error.message])\r\n\t\t\t\t}\r\n\t\t\t\tsetIsLoading(false)\r\n\t\t\t})\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div style={{ maxWidth: 600, margin: \"auto\", padding: \"40px 0px 150px 0px\" }}>\r\n\t\t\t{/* {CLASS selection} */}\r\n\t\t\t<section>\r\n\t\t\t\t<div className=\"guide-banner mb-4\">\r\n\t\t\t\t\t<h3>Select class</h3>\r\n\t\t\t\t</div>\r\n\t\t\t\t<ClassOffer selectLesson={setLesson} />\r\n\r\n\t\t\t</section>\r\n\r\n\t\t\t{/* {SESSION DURATION selection} */}\r\n\t\t\t<section>\r\n\t\t\t\t<div className=\"guide-banner my-4\">\r\n\t\t\t\t\t<h3>Select session duration</h3>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<div style={{ width: 200, margin: \"20px auto\" }}>\r\n\t\t\t\t\t\t<select className=\"form-select\" defaultValue={duration} aria-label=\"Default select example\" onChange={onDurationChange}>\r\n\t\t\t\t\t\t\t<option value=\"30\">30 minutes</option>\r\n\t\t\t\t\t\t\t<option value=\"60\">1 hour</option>\r\n\t\t\t\t\t\t\t<option value=\"90\">1 hour 30 minutes</option>\r\n\t\t\t\t\t\t\t<option value=\"120\">2 hours</option>\r\n\t\t\t\t\t\t\t<option value=\"150\">2 hours 30 minutes</option>\r\n\t\t\t\t\t\t\t<option value=\"180\">3 hours</option>\r\n\t\t\t\t\t\t\t<option value=\"210\">3 hours 30 minutes</option>\r\n\t\t\t\t\t\t\t<option value=\"240\">4 hours</option>\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</section>\r\n\r\n\t\t\t{/* {DATE selection section} */}\r\n\t\t\t<section>\r\n\t\t\t\t<div className=\"guide-banner my-4\">\r\n\t\t\t\t\t<h3>Select date</h3>\r\n\t\t\t\t</div>\r\n\t\t\t\t<DatePicker date={initDate} month={initMonth - 1} year={initYear} onDateChange={handleDateChange} />\r\n\t\t\t</section>\r\n\r\n\t\t\t{/* {TIME selection section} */}\r\n\t\t\t<section>\r\n\t\t\t\t<div className=\"guide-banner my-4\">\r\n\t\t\t\t\t<h3>Select time</h3>\r\n\t\t\t\t</div>\r\n\t\t\t\t<TimeOffer duration={duration} fullDate={fullDate} onTimeSelected={setFullTime} dummy={dummy} />\r\n\t\t\t</section>\r\n\r\n\t\t\t{/* ...... {student information} ......... */}\r\n\t\t\t<section>\r\n\t\t\t\t<div className=\"guide-banner my-4\">\r\n\t\t\t\t\t<h3>Your information</h3>\r\n\t\t\t\t</div>\r\n\t\t\t\t<form className=\"form-default-box\">\r\n\t\t\t\t\t<div className=\"mb-3\">\r\n\t\t\t\t\t\t<label htmlFor=\"name\" className=\"form-label\"><b>Name</b> </label>\r\n\t\t\t\t\t\t<input type=\"text\" length={50} className=\"form-control\" id=\"name\" required\r\n\t\t\t\t\t\t\tonChange={(e) => { setName(e.target.value) }}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"mb-3\">\r\n\t\t\t\t\t\t<label htmlFor=\"email\" className=\"form-label\"><b>Email</b></label>\r\n\t\t\t\t\t\t<input type=\"email\" length={50} className=\"form-control\" id=\"email\" required\r\n\t\t\t\t\t\t\tonChange={(e) => { setEmail(e.target.value) }}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"mb-3\">\r\n\t\t\t\t\t\t<label htmlFor=\"phone\" className=\"form-label\"><b>Phone</b></label>\r\n\t\t\t\t\t\t<input type=\"tel\" length={20} className=\"form-control\" id=\"phone\"\r\n\t\t\t\t\t\t\tonChange={(e) => { setPhone(e.target.value) }}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"mb-3\">\r\n\t\t\t\t\t\t<label htmlFor=\"note\" className=\"form-label\"><b>Note</b></label>\r\n\t\t\t\t\t\t<textarea className=\"form-control\" id=\"description\" rows={5} wrap=\"soft\"\r\n\t\t\t\t\t\t\tonChange={(e) => { setNote(e.target.value) }}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</form>\r\n\t\t\t</section>\r\n\r\n\t\t\t{/* {summary table} */}\r\n\t\t\t<section>\r\n\t\t\t\t<div className=\"guide-banner my-4\">\r\n\t\t\t\t\t<h3>Confirm details & Book appointment</h3>\r\n\t\t\t\t</div>\r\n\t\t\t\t<table className=\"table mb-4\" style={{ margin: \"auto\", maxWidth: 600 }}>\r\n\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t<tr className=\"table-primary\">\r\n\t\t\t\t\t\t\t<td colSpan=\"2\">\r\n\t\t\t\t\t\t\t\t<b>Your information</b>\r\n\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t<tr className=\"table-light\">\r\n\t\t\t\t\t\t\t<td className=\"booking-info-tag\">Name</td>\r\n\t\t\t\t\t\t\t<td>{name}</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t<tr className=\"table-light\">\r\n\t\t\t\t\t\t\t<td className=\"booking-info-tag\">Email</td>\r\n\t\t\t\t\t\t\t<td>{email}</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t<tr className=\"table-light\">\r\n\t\t\t\t\t\t\t<td className=\"booking-info-tag\">Phone</td>\r\n\t\t\t\t\t\t\t<td>{phone}</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t<tr className=\"table-light\">\r\n\t\t\t\t\t\t\t<td className=\"booking-info-tag\" style={{ verticalAlign: \"top\" }}>Note</td>\r\n\t\t\t\t\t\t\t<td>{note}</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t<tr className=\"table-primary\">\r\n\t\t\t\t\t\t\t<td colSpan=\"2\"><b>Appointment information</b></td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t<tr className=\"table-light\">\r\n\t\t\t\t\t\t\t<td className=\"booking-info-tag\">Class</td>\r\n\t\t\t\t\t\t\t<td>{lesson && lesson.lessonName}</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t<tr className=\"table-light\">\r\n\t\t\t\t\t\t\t<td className=\"booking-info-tag\">Class ID</td>\r\n\t\t\t\t\t\t\t<td>{lesson && lesson.lessonId}</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t<tr className=\"table-light\">\r\n\t\t\t\t\t\t\t<td className=\"booking-info-tag\">Date</td>\r\n\t\t\t\t\t\t\t<td>{fullDate}</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t<tr className=\"table-light\">\r\n\t\t\t\t\t\t\t<td className=\"booking-info-tag\">Time</td>\r\n\t\t\t\t\t\t\t<td>{fullTime}</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t<tr className=\"table-light\">\r\n\t\t\t\t\t\t\t<td className=\"booking-info-tag\">Duration</td>\r\n\t\t\t\t\t\t\t<td>{duration} minutes</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t<tr className=\"table-light\">\r\n\t\t\t\t\t\t\t<td className=\"booking-info-tag\">Fee</td>\r\n\t\t\t\t\t\t\t<td>${lesson && lesson.price60m * Math.floor(duration / 60) + lesson.price30m * (duration % 60 == 30 ? 1 : 0)} (pay at the study date)</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t</tbody>\r\n\t\t\t\t</table>\r\n\r\n\t\t\t\t{\r\n\t\t\t\t\tsubmitErrors.length > 0 &&\r\n\t\t\t\t\t<div className=\"alert alert-danger\" role=\"alert\">\r\n\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tsubmitErrors.map((error, index) => {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<li key={index}>{error}</li>\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\r\n\t\t\t{\r\n\t\t\t\tbookingSuccess &&\r\n\t\t\t\t<div className=\"alert alert-success\" role=\"alert\">\r\n\t\t\t\t\t<p>Successfully booked. Booking details will be sent to your email address.</p>\r\n\t\t\t\t\t<p>You can continue booking on this page.</p>\r\n\t\t\t\t</div>\r\n\t\t\t}\r\n\r\n\t\t\t\t{\r\n\t\t\t\t\tisLoading ?\r\n\t\t\t\t\t\t<button className=\"btn btn-primary float-end\" type=\"button\" disabled>\r\n\t\t\t\t\t\t\t<span className=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\r\n\t\t\t\t\t\t\t<span className=\"sr-only\">Loading...</span>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t:\r\n\t\t\t\t\t\t<button className=\"btn btn-primary d-inline-block float-end\" onClick={() => { handleSubmit() }}>Book now</button>\r\n\t\t\t\t}\r\n\t\t\t</section>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\n\r\nexport default Booking\r\n//handleDateChange={handleDateChange}\r\n\r\n{/* <button className=\"btn btn-primary float-end mt-3\"\r\nonClick={() => {handleSubmit()}}>\r\n\tBOOK APPOINTMENT\r\n</button> */}","import React, { useState, useEffect, useRef } from 'react'\r\nimport { API_URL } from '../JS/variables'\r\n\r\nconst EVERYDAY_INDEX = 7\r\n\r\n\r\nfunction CrateAvailabilityForm(props) {\r\n\tconst DAYS = [\r\n\t\t{ id: 0, day: 'Sun', isChecked: false },\r\n\t\t{ id: 1, day: 'Mon', isChecked: false },\r\n\t\t{ id: 2, day: 'Tu', isChecked: false },\r\n\t\t{ id: 3, day: 'Wed', isChecked: false },\r\n\t\t{ id: 4, day: 'Th', isChecked: false },\r\n\t\t{ id: 5, day: 'Fri', isChecked: false },\r\n\t\t{ id: 6, day: 'Sat', isChecked: false },\r\n\t\t{ id: 7, day: 'Everyday', isChecked: false },\r\n\t]\r\n\r\n\tconst [timeFrom, setTimeFrom] = useState('')\r\n\tconst [timeTo, setTimeTo] = useState('')\r\n\tconst [selectedDays, setSelectedDays] = useState(DAYS)\r\n\tconst [isLoading, setIsLoading] = useState(false)\r\n\tconst [fetchErrors, setFetchErrors] = useState([])\r\n\tconst [dateError, setDateError] = useState('')\r\n\tconst [dayError, setDayError] = useState('')\r\n\tconst [fromH, setFromH] = useState(0)\r\n\tconst [fromM, setFromM] = useState(0)\r\n\tconst [fromAP, setFromAP] = useState('AM')\r\n\tconst [toH, setToH] = useState(0)\r\n\tconst [toM, setToM] = useState(0)\r\n\tconst [toAP, setToAP] = useState('AM')\r\n\r\n\tconst mountedRef = useRef(true)\r\n\r\n\tuseEffect(() => {\r\n\t\treturn () => {\r\n\t\t\tmountedRef.current = false\r\n\t\t}\r\n\t}, [])\r\n\r\n\tconst getFromMinute = () => {\r\n\t\treturn (fromH * 1 + (fromAP === 'AM'? 0 : 12)) * 60 + fromM * 1\r\n\t}\r\n\r\n\tconst getToMinute = () => {\r\n\t\t// to midnight\r\n\t\tconsole.log(toH)\r\n\t\tconsole.log(toM)\r\n\t\tconsole.log(toAP)\r\n\t\tif (toH * 1 == 0 && toM * 1 == 0 && toAP == 'AM'){\r\n\t\t\tconsole.log('visit')\r\n\t\t\treturn 24*60\r\n\t\t}\r\n\t\treturn (toH * 1 + (toAP === 'AM'? 0 : 12)) * 60 + toM * 1\r\n\t}\r\n\r\n\tconst handleAddAvailability = (e) => {\r\n\t\te.preventDefault()\r\n\t\tlet timeFrom = getFromMinute()\r\n\t\tlet timeTo = getToMinute()\r\n\r\n\r\n\t\tif(timeFrom >= timeTo){\r\n\t\t\tconsole.log('timefrom', timeFrom)\r\n\t\t\tconsole.log('timeto', timeTo)\r\n\t\t\treturn setFetchErrors(['Incorrect time.'])\r\n\t\t}\r\n\r\n\t\tconsole.log('after')\r\n\r\n\t\tif (!mountedRef.current) {\r\n\t\t\tconsole.log('mountedRef false')\r\n\t\t\treturn null\r\n\t\t}\r\n\t\tsetFetchErrors([])\r\n\t\tsetIsLoading(true)\r\n\r\n\t\tconsole.log('1')\r\n\t\tconst days = getSelectedDaysValue()\r\n\r\n\t\tif (!days) {\r\n\t\t\tsetDayError('At least one day must be selected.')\r\n\t\t\tsetIsLoading(false)\r\n\t\t\treturn\r\n\t\t} else {\r\n\t\t\tsetDayError('')\r\n\t\t}\r\n\t\tconsole.log('2')\r\n\r\n\t\tconst requestOptions = {\r\n\t\t\tmethod: 'POST',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t'Accept': 'application/json'\r\n\t\t\t},\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\ttimeFrom: timeFrom,\r\n\t\t\t\ttimeTo: timeTo,\r\n\t\t\t\tdays: getSelectedDaysValue()\r\n\t\t\t}),\r\n\t\t\tcredentials: 'include'\r\n\t\t}\r\n\r\n\t\tfetch(`${API_URL}/api/availability/`, requestOptions)\r\n\t\t\t.then(res => {\r\n\t\t\t\tif (res.status === 401) {\r\n\t\t\t\t\tthrow new Error('Unauthorized.')\r\n\t\t\t\t}\r\n\t\t\t\treturn res\r\n\t\t\t})\r\n\t\t\t.then(res => res.json())\r\n\t\t\t.then((data) => {\r\n\t\t\t\tconsole.log('data: ', data)\r\n\t\t\t\tif (!mountedRef.current) return null\r\n\t\t\t\tconsole.log('yo')\r\n\t\t\t\tif (!data.success) {\r\n\t\t\t\t\tthrow new Error(data.message)\r\n\t\t\t\t}\r\n\t\t\t\tprops.handleClose()\r\n\t\t\t\tprops.signalAddSuccess()\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\tif (!mountedRef.current) return null\r\n\t\t\t\tif (Array.isArray(err)) {\r\n\t\t\t\t\tconsole.log('1', err)\r\n\t\t\t\t\tsetFetchErrors(err)\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tconsole.log('2', err)\r\n\t\t\t\t\tsetFetchErrors([err.message])\r\n\t\t\t\t}\r\n\t\t\t\tsetIsLoading(false)\r\n\t\t\t})\r\n\t}\r\n\r\n\tconsole.log('Create availability form re render')\r\n\r\n\t// return 056 if Sun, Fri, Sat is checked\r\n\tconst getSelectedDaysValue = () => {\r\n\t\tlet val = ''\r\n\t\tselectedDays.map(day => {\r\n\t\t\tif (day.id == EVERYDAY_INDEX) { return }\r\n\t\t\tif (day.isChecked) {\r\n\t\t\t\tval += day.id\r\n\t\t\t}\r\n\t\t})\r\n\t\treturn val\r\n\t}\r\n\r\n\tconst onTimeFromChange = (e) => {\r\n\t\tlet time = destructHHMM(e.target.value)\r\n\r\n\t\tif (timeTo == '' || time < timeTo) {\r\n\t\t\tsetTimeFrom(time)\r\n\t\t\tif (dateError) {\r\n\t\t\t\tsetDateError('')\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\te.target.value = ''\r\n\t\t\tsetDateError('Must be lesser.')\r\n\t\t}\r\n\t}\r\n\r\n\tconst onTimeToChange = (e) => {\r\n\t\tlet time = destructHHMM(e.target.value)\r\n\r\n\t\tif (timeFrom == '' || time > timeFrom) {\r\n\t\t\tsetTimeTo(time)\r\n\t\t\tif (dateError) {\r\n\t\t\t\tsetDateError('')\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\te.target.value = ''\r\n\t\t\tsetDateError('Must be greater.')\r\n\t\t}\r\n\t}\r\n\r\n\tconst destructHHMM = (hhmmStr) => {\r\n\t\tlet list = hhmmStr.split(':')\r\n\t\treturn list[0] * 60 + list[1] * 1\r\n\t}\r\n\r\n\tconst onSelectedDayChange = (e) => {\r\n\t\tsetSelectedDays(selectedDays.map(day => {\r\n\t\t\tif (e.target.id == 7) {\r\n\t\t\t\tselectedDays.map(d => {\r\n\t\t\t\t\td.isChecked = e.target.checked\r\n\t\t\t\t})\r\n\t\t\t} else {\r\n\t\t\t\tif (e.target.id == day.id) {\r\n\t\t\t\t\tday.isChecked = e.target.checked\r\n\t\t\t\t\tselectedDays[7].isChecked = false\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn {\r\n\t\t\t\t...day\r\n\t\t\t}\r\n\t\t}))\r\n\t\tconsole.log(selectedDays)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className=\"mt-3 mb-3\">\r\n\t\t\t\t<form className=\"form-default-box\" onSubmit={handleAddAvailability} style={{ margin: \"auto\", maxWidth: 320 }}>\r\n\r\n\t\t\t\t\t{/* {TIME INPUTS} */}\r\n\t\t\t\t\t<div className=\"py-1\" style={{ textAlign: \"center\" }}>\r\n\t\t\t\t\t\t<b>From</b>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div style={{ margin: \"5px auto\", width: \"100%\", textAlign: \"center\" }}>\r\n\t\t\t\t\t\t<div style={{ display: \"inline-block\" }}>\r\n\t\t\t\t\t\t\t<select className=\"form-select\" defaultValue={fromH} name=\"fromH\" id=\"fromH\"\t\t\t\t\t\r\n\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\t\tsetFromH(e.target.value)\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<option value=\"0\">12</option>\r\n\t\t\t\t\t\t\t\t<option value=\"1\">01</option>\r\n\t\t\t\t\t\t\t\t<option value=\"2\">02</option>\r\n\t\t\t\t\t\t\t\t<option value=\"3\">03</option>\r\n\t\t\t\t\t\t\t\t<option value=\"4\">04</option>\r\n\t\t\t\t\t\t\t\t<option value=\"5\">05</option>\r\n\t\t\t\t\t\t\t\t<option value=\"6\">06</option>\r\n\t\t\t\t\t\t\t\t<option value=\"7\">07</option>\r\n\t\t\t\t\t\t\t\t<option value=\"8\">08</option>\r\n\t\t\t\t\t\t\t\t<option value=\"9\">09</option>\r\n\t\t\t\t\t\t\t\t<option value=\"10\">10</option>\r\n\t\t\t\t\t\t\t\t<option value=\"11\">11</option>\r\n\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t&nbsp;<b>:</b>&nbsp;\r\n\t\t\t\t\t\t<div style={{ display: \"inline-block\" }}>\r\n\t\t\t\t\t\t\t<select className=\"form-select\" defaultValue={fromM} name=\"fromM\" id=\"fromM\" \r\n\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\tsetFromM(e.target.value)\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<option value=\"0\">00</option>\r\n\t\t\t\t\t\t\t\t<option value=\"30\">30</option>\r\n\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t&nbsp;\r\n\t\t\t\t\t\t<div style={{ display: \"inline-block\" }}>\r\n\t\t\t\t\t\t\t<select className=\"form-select\" defaultValue={fromAP} name=\"fromAP\" id=\"fromAP\" \r\n\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\tsetFromAP(e.target.value)\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<option value=\"AM\">AM</option>\r\n\t\t\t\t\t\t\t\t<option value=\"PM\">PM</option>\r\n\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"py-1\" style={{ textAlign: \"center\" }}>\r\n\t\t\t\t\t\t<b>To</b>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div style={{ margin: \"5px auto\", width: \"100%\", textAlign: \"center\" }}>\r\n\t\t\t\t\t\t<div style={{ display: \"inline-block\" }}>\r\n\t\t\t\t\t\t\t<select className=\"form-select\" defaultValue={toH} name=\"toH\" id=\"toH\" \r\n\t\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\t\tsetToH(e.target.value)\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<option value=\"0\">12</option>\r\n\t\t\t\t\t\t\t\t<option value=\"1\">01</option>\r\n\t\t\t\t\t\t\t\t<option value=\"2\">02</option>\r\n\t\t\t\t\t\t\t\t<option value=\"3\">03</option>\r\n\t\t\t\t\t\t\t\t<option value=\"4\">04</option>\r\n\t\t\t\t\t\t\t\t<option value=\"5\">05</option>\r\n\t\t\t\t\t\t\t\t<option value=\"6\">06</option>\r\n\t\t\t\t\t\t\t\t<option value=\"7\">07</option>\r\n\t\t\t\t\t\t\t\t<option value=\"8\">08</option>\r\n\t\t\t\t\t\t\t\t<option value=\"9\">09</option>\r\n\t\t\t\t\t\t\t\t<option value=\"10\">10</option>\r\n\t\t\t\t\t\t\t\t<option value=\"11\">11</option>\r\n\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t&nbsp;<b>:</b>&nbsp;\r\n\t\t\t\t\t\t<div style={{ display: \"inline-block\" }}>\r\n\t\t\t\t\t\t\t<select className=\"form-select\" defaultValue={toM} name=\"toM\" id=\"toM\" \r\n\t\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\t\tsetToM(e.target.value)\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<option value=\"0\">00</option>\r\n\t\t\t\t\t\t\t\t<option value=\"30\">30</option>\r\n\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t&nbsp;\r\n\t\t\t\t\t\t<div style={{ display: \"inline-block\" }}>\r\n\t\t\t\t\t\t\t<select className=\"form-select\" defaultValue={toAP} name=\"toAP\" id=\"toAP\" \r\n\t\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\t\tsetToAP(e.target.value)\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<option value=\"AM\">AM</option>\r\n\t\t\t\t\t\t\t\t<option value=\"PM\">PM</option>\r\n\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"form-check\">\r\n\t\t\t\t\t\t{selectedDays.map((day) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<div key={day.id}>\r\n\t\t\t\t\t\t\t\t\t<input className=\"form-check-input\" type=\"checkbox\" id={day.id} onChange={onSelectedDayChange} checked={day.isChecked} />\r\n\t\t\t\t\t\t\t\t\t<label className=\"form-check-label\" htmlFor={day.id}>{day.day}</label>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</div>\r\n\r\n\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tdateError\r\n\t\t\t\t\t\t&&\r\n\t\t\t\t\t\t<div className=\"alert alert-danger\" role=\"alert\">\r\n\t\t\t\t\t\t\t{dateError}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t}\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tdayError\r\n\t\t\t\t\t\t&&\r\n\t\t\t\t\t\t<div className=\"alert alert-danger\" role=\"alert\">\r\n\t\t\t\t\t\t\t{dayError}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t}\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tfetchErrors.map((error, index) => {\r\n\t\t\t\t\t\t\tconsole.log(error)\r\n\t\t\t\t\t\t\tconsole.log(`the error is: ${index}: ${error}`)\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<div key={index} className=\"alert alert-danger\" role=\"alert\">\r\n\t\t\t\t\t\t\t\t\t{error}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t{/* {Submit and Cancel buttons} */}\r\n\t\t\t\t\t<div style={{ width: \"100%\", height: 20, marginTop: 20 }}>\r\n\t\t\t\t\t\t<button type=\"button\" className=\"btn btn-danger d-inline-block float-start\"\r\n\t\t\t\t\t\t\tonClick={() => props.handleClose()}>Cancel</button>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tisLoading ?\r\n\t\t\t\t\t\t\t\t<button className=\"btn btn-primary float-end\" type=\"button\" disabled>\r\n\t\t\t\t\t\t\t\t\t<span className=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\r\n\t\t\t\t\t\t\t\t\t<span className=\"sr-only\">Loading...</span>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t\t<button type=\"submit\" className=\"btn btn-primary d-inline-block float-end\">Add</button>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t</div >\r\n\t)\r\n}\r\n\r\nexport default CrateAvailabilityForm\r\n","import React, { useState, useEffect, useRef } from 'react'\r\nimport { TiEdit, TiTrash } from 'react-icons/ti'\r\nimport { API_URL } from '../JS/variables';\r\n\r\n\r\nfunction Availability({availability, removeAvailability}) {\r\n\tconst [isLoading, setIsLoading] = useState(false)\r\n\tconst [error, setError] = useState('')\r\n\tconst mountedRef = useRef(true)\r\n\r\n\tconst WEEK = [\r\n\t\t'Sun', 'Mon', 'Tu', 'Wed', 'Th', 'Fri', 'Sat'\r\n\t]\r\n\r\n\tconst minutesToHhMmAPmString = (minutes) => {\r\n\t\t// 12:00 AM is a special case for 12:00 AM - 12:00AM (terminal)\r\n\t\tif(minutes == 24*60){\r\n\t\t\treturn '12:00 AM'\r\n\t\t}\r\n\t\tlet hours = Math.floor(minutes / 60)\r\n\t\tconst suffix = hours >= 12 ? \"PM\" : \"AM\"\r\n\t\tlet minutePart = ((minutes % 60) + '0').substring(0, 2)\r\n\t\thours = `${((hours + 11) % 12 + 1)}:${minutePart} ${suffix}`\r\n\t\treturn hours\r\n\t}\r\n\r\n\tconst start_time = minutesToHhMmAPmString(availability.start_minute)\r\n\tconst end_time = minutesToHhMmAPmString(availability.end_minute)\r\n\r\n\tconst getAvailDisplay = () => {\r\n\t\tlet week = [0, 0, 0, 0, 0, 0, 0]\r\n\t\tlet days = availability.days\r\n\t\tfor (let i = 0; i < days.length; i++) {\r\n\t\t\tweek[days[i]] = 1\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<div style={{ margin: \"10px auto\" }}>\r\n\t\t\t\t{week.map((day, index) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<div key={index} style={{ display: \"inline-block\", textAlign: \"center\", minWidth: 40, color: day ? 'orange' : '#eee' }}>{WEEK[index]}</div>\r\n\t\t\t\t\t)\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\r\n\tconst deleteAvailability = () => {\r\n\t\tsetIsLoading(true)\r\n\t\tsetError('')\r\n\t\tconst requestionOptions =\r\n\t\t{\r\n\t\t\tmethod: 'DELETE',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t'Accept': 'application/json'\r\n\t\t\t},\r\n\t\t\tcredentials: 'include'\r\n\t\t}\r\n\r\n\t\tfetch(`${API_URL}/api/availability/delete/${availability.availability_id}`, requestionOptions)\r\n\t\t\t.then(res => res.json())\r\n\t\t\t.then(data => {\r\n\t\t\t\tif (!data.success) {\r\n\t\t\t\t\tthrow new Error(data.message)\r\n\t\t\t\t}\r\n\t\t\t\tif (!mountedRef.current) return null\r\n\t\t\t\tsetIsLoading(false)\r\n\t\t\t\tsetError('')\r\n\t\t\t\tremoveAvailability(availability.availability_id)\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (!mountedRef.current) return null\r\n\t\t\t\tsetIsLoading(false)\r\n\t\t\t\tsetError(error.message)\r\n\t\t\t})\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className=\"mb-2 pd-4 default-wrapper mw-400\">\r\n\t\t\t\t<div className=\"\">\r\n\t\t\t\t\t<div className=\"mb-2\">\r\n\t\t\t\t\t\t{getAvailDisplay()}\r\n\t\t\t\t\t\t<p className=\"mb-1 text-secondary\"><b>{start_time == end_time ? 'All day' : `${start_time} - ${end_time}`}</b></p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{/* <button type=\"button\" title=\"edit\" className=\"btn btn-secondary py-1\">\r\n                            <TiEdit size={20} />\r\n                            <span className=\"align-middle\" style={{ fontSize: 15 }}>EDIT</span>\r\n                        </button> */}\r\n\r\n\t\t\t\t\t{/* {error warning} */}\r\n\t\t\t\t\t{error &&\r\n\t\t\t\t\t\t<div className=\"alert alert-danger\" role=\"alert\">\r\n\t\t\t\t\t\t\t{error}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t{/* {button panel} */}\r\n\t\t\t\t\t<div style={{ height: 30 }}>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tisLoading ?\r\n\t\t\t\t\t\t\t\t<button className=\"btn btn-danger py-1 float-end\" type=\"button\" disabled>\r\n\t\t\t\t\t\t\t\t\t<span className=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\r\n\t\t\t\t\t\t\t\t\t<span className=\"sr-only\">Deleting...</span>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t\t<button onClick={deleteAvailability} type=\"button\" title=\"delete\" className=\"btn btn-danger py-1 float-end\" >\r\n\t\t\t\t\t\t\t\t\t<TiTrash size={20} />\r\n\t\t\t\t\t\t\t\t\t<span className=\"align-middle button-text\" style={{ fontSize: 10 }}>DELETE</span>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div >\r\n\t)\r\n}\r\n\r\nexport default Availability\r\n","import React, { useState, useEffect, useRef } from 'react';\r\nimport CreateAvailabilityForm from './CreateAvailabilityForm';\r\nimport Availability from './Availability';\r\nimport { API_URL } from '../JS/variables';\r\n\r\nfunction AvailabilityPanel() {\r\n\tconst [formMessage, setFormMessage] = useState({ success: false })\r\n\tconst [availabilities, setAvailabilities] = useState([])\r\n\tconst mountedRef = useRef(true)\r\n\tconst [showForm, setShowForm] = useState(false)\r\n\tconst [addSuccess, setAddSuccess] = useState(false)\r\n\tconst [dummy, setDummy] = useState(0)\r\n\tconst [isLoading, setIsLoading] = useState(false)\r\n\tconst [error, setError] = useState('')\r\n\r\n\tconst signalAddSuccess = () => {\r\n\t\tsetAddSuccess(true)\r\n\t\tsetDummy(dummy + 1)\r\n\t\tsetTimeout(() => {\r\n\t\t\tsetAddSuccess(false)\r\n\t\t}, 2000)\r\n\t}\r\n\r\n\tfunction compare(a, b) {\r\n\t\tif (a.days < b.days) {\r\n\t\t\treturn -1;\r\n\t\t}\r\n\t\tif (a.days > b.days) {\r\n\t\t\treturn 1;\r\n\t\t}\r\n\t\treturn 0;\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\treturn () => {\r\n\t\t\tmountedRef.current = false\r\n\t\t}\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!mountedRef.current) return null\r\n\t\tsetIsLoading(true)\r\n\t\tsetError('')\r\n\t\tconst requestOptions = {\r\n\t\t\tmethod: 'GET',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t'Accept': 'application/json',\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfetch(`${API_URL}/api/availability/all`, requestOptions)\r\n\t\t\t.then(res => res.json())\r\n\t\t\t.then(res => {\r\n\t\t\t\tif (!mountedRef.current) return null\r\n\t\t\t\tif (!res.success) {\r\n\t\t\t\t\tthrow new Error(res.message)\r\n\t\t\t\t}\r\n\t\t\t\tconst avails = res.data\r\n\t\t\t\tavails.sort(compare)\r\n\t\t\t\tsetAvailabilities(res.data)\r\n\t\t\t\tsetError('')\r\n\t\t\t\tsetIsLoading(false)\r\n\t\t\t})\r\n\t\t\t.catch(err => {\r\n\t\t\t\tif (!mountedRef.current) return null\r\n\t\t\t\tconsole.log(err.message)\r\n\t\t\t\tsetError(err.message)\r\n\t\t\t\tsetIsLoading(false)\r\n\t\t\t})\r\n\r\n\r\n\t}, [dummy])\r\n\r\n\tconst removeAvailability = (id) => {\r\n\t\tsetAvailabilities(availabilities.filter(availability => availability.availability_id != id))\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"mt-3\">\r\n\t\t\t{/* {msg when successfully add new availability} */}\r\n\t\t\t{\r\n\t\t\t\taddSuccess &&\r\n\t\t\t\t<div className=\"alert alert-success\" role=\"alert\">\r\n\t\t\t\t\tSuccessfully added.\r\n\t\t\t\t</div>\r\n\t\t\t}\r\n\r\n\t\t\t{/* {Form component} */}\r\n\t\t\t{\r\n\t\t\t\tshowForm ?\r\n\t\t\t\t\t<CreateAvailabilityForm signalAddSuccess={signalAddSuccess} handleClose={() => setShowForm(false)} />\r\n\t\t\t\t\t:\r\n\t\t\t\t\t<div style={{ textAlign: \"center\" }}>\r\n\t\t\t\t\t\t<button type=\"button\" className=\"btn btn-primary mb-5\" onClick={() => setShowForm(true)}>\r\n\t\t\t\t\t\t\tAdd availability\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t}\r\n\r\n\t\t\t{/* {LOADING && ERROR} */}\r\n\t\t\t{\r\n\t\t\t\tisLoading ?\r\n\t\t\t\t\t<div className=\"text-center\">\r\n\t\t\t\t\t\t<div className=\"spinner-border\" role=\"status\" style={{color: \"orange\"}}>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t: (error &&\r\n\t\t\t\t\t\t<div className=\"alert alert-danger\" role=\"alert\">\r\n\t\t\t\t\t\t\t{error}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)\r\n\t\t\t}\r\n\r\n\t\t\t{/* {Availability list} */}\r\n\t\t\t{\r\n\t\t\t\tavailabilities.map(avail => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<Availability\r\n\t\t\t\t\t\t\tkey={avail.availability_id}\r\n\t\t\t\t\t\t\tremoveAvailability={removeAvailability}\r\n\t\t\t\t\t\t\tavailability={avail}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)\r\n\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default AvailabilityPanel\r\n","import React, {useState, useEffect} from 'react'\r\n\r\nfunction AppModal({show, onClose, title, children}) {\r\n\r\n    useEffect(() => {\r\n        document.addEventListener('keydown', closeOnEscapeKeyDown)\r\n        return () => {\r\n            document.removeEventListener('keydown', closeOnEscapeKeyDown)\r\n        }\r\n    }, [])\r\n\r\n    const closeOnEscapeKeyDown = (e) => {\r\n        if( e.keyCode === 27) {\r\n            onClose()\r\n        } \r\n    }\r\n\r\n    return (\r\n        <div className={`app-modal ${show? 'show' : ''}`} onClick={onClose}>\r\n            <div className=\"app-modal-content\" onClick={(e) => {e.stopPropagation()}}>\r\n                <div className=\"modal-header\">\r\n                    <h4 className=\"app-modal-title\">{title}</h4>\r\n                </div>\r\n                <div className=\"app-modal-body\">\r\n                    {children}\r\n                </div>\r\n                <div className=\"app-modal-footer\">\r\n                    <button className=\"btn btn-secondary\" onClick={onClose}>\r\n                        Close\r\n                    </button>\r\n                </div>\r\n            </div>\r\n            \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default AppModal\r\n","import React, { useState, useEffect, useRef } from 'react'\r\nimport { API_URL } from '../JS/variables';\r\n\r\nfunction Appointment({ id, onUpdate }) {\r\n\tconst [appointment, setAppointment] = useState(null)\r\n\tconst [isLoading, setIsLoading] = useState(false)\r\n\tconst [error, setError] = useState('')\r\n\tconst [showForm, setShowForm] = useState(false)\r\n\tconst [cancelText, setCancelText] = useState('')\r\n\tconst [cancelLoading, setCancelLoading] = useState(false)\r\n\tconst [cancelError, setCancelError] = useState('')\r\n\tconst mountedRef = useRef(true)\r\n\r\n\tuseEffect(() => {\r\n\t\treturn () => {\r\n\t\t\tmountedRef.current = false\r\n\t\t}\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!id) {\r\n\t\t\tconsole.log('id is null')\r\n\t\t\tsetAppointment(null)\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tsetIsLoading(true)\r\n\t\tsetError('')\r\n\r\n\t\tconst requestOptions = {\r\n\t\t\tmethod: 'GET',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t'Accept': 'application/json'\r\n\t\t\t},\r\n\t\t\tcredentials: 'include'\r\n\t\t}\r\n\t\tconsole.log('id is: ', id)\r\n\r\n\t\tfetch(`${API_URL}/api/appointment/id/${id}`, requestOptions)\r\n\t\t\t.then(res => res.json())\r\n\t\t\t.then(data => {\r\n\t\t\t\tif (!mountedRef.current) return null\r\n\t\t\t\tif (!data.success) {\r\n\t\t\t\t\tthrow new Error(data.message)\r\n\t\t\t\t}\r\n\t\t\t\tsetIsLoading(false)\r\n\t\t\t\tsetError('')\r\n\t\t\t\tconsole.log(data.appointment)\r\n\t\t\t\tsetAppointment(data.appointment)\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tif (!mountedRef.current) return null\r\n\t\t\t\tconsole.log(error)\r\n\t\t\t\tsetIsLoading(false)\r\n\t\t\t\tsetError(error.message)\r\n\t\t\t})\r\n\t}, [id])\r\n\r\n\tconst minutesToHhMmAPmString = (minutes) => {\r\n\t\tlet hours = Math.floor(minutes / 60)\r\n\t\tconst suffix = hours >= 12 ? \"PM\" : \"AM\"\r\n\t\tlet minutePart = ((minutes % 60) + '0').substring(0, 2)\r\n\t\thours = `${((hours + 11) % 12 + 1)}:${minutePart} ${suffix}`\r\n\t\treturn hours\r\n\t}\r\n\r\n\tconst convertDateAndTimeRangeString = (date, duration) => {\r\n\t\tlet d = date.getDate()\r\n\t\tlet m = date.getMonth() + 1\r\n\t\tlet y = date.getFullYear()\r\n\t\tlet start_time_string = minutesToHhMmAPmString(Math.floor(date.getHours()) * 60 + date.getMinutes())\r\n\t\tlet end_time_string = minutesToHhMmAPmString(Math.floor(date.getHours()) * 60 + date.getMinutes() + duration)\r\n\r\n\t\treturn `${d}/${m}/${y} ${start_time_string} - ${end_time_string}`\r\n\t}\r\n\r\n\tconst onCancelTextChange = (e) => {\r\n\t\t// auto adjust textarea height\r\n\t\te.target.style.height = \"\";\r\n\t\te.target.style.height = Math.min(e.target.scrollHeight, 300) + \"px\";\r\n\t\tsetCancelText(e.target.value)\r\n\t}\r\n\t\r\n\tconst handleCancelAppointment = (e) => {\r\n\t\te.preventDefault()\r\n\t\tconst requestOptions = {\r\n\t\t\tmethod: 'POST',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t'Accept': 'application/json'\r\n\t\t\t},\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\tid: appointment.appointment_id,\r\n\t\t\t\tmessage: cancelText\r\n\t\t\t}),\r\n\t\t\tcredentials: 'include'\r\n\t\t}\r\n\r\n\t\tsetCancelLoading(true)\r\n\t\tsetCancelError('')\r\n\r\n\t\tfetch(`${API_URL}/api/appointment/admincancel?id=${appointment.appointment_id}}`, requestOptions)\r\n\t\t\t.then(res => res.json())\r\n\t\t\t.then(data => {\r\n\t\t\t\tif(!mountedRef.current) return null\r\n\t\t\t\tif(!data.success){\r\n\t\t\t\t\tthrow new Error(data.message)\r\n\t\t\t\t}\r\n\t\t\t\tonUpdate()\r\n\t\t\t\t\r\n\t\t\t})\r\n\t\t\t.catch(error=> {\r\n\t\t\t\tconsole.log(error)\r\n\t\t\t\tsetCancelLoading(false)\r\n\t\t\t\tsetCancelError(error.message)\r\n\t\t\t})\r\n\t}\r\n\treturn (\r\n\t\t<div className=\"mb-2\">\r\n\t\t\t<div className=\"appointment-info-upcoming-wrapper py-2 px-2\">\r\n\t\t\t\t{/* {LOADING && ERROR} */}\r\n\t\t\t\t{\r\n\t\t\t\t\tisLoading ? <div className=\"text-center\">\r\n\t\t\t\t\t\t<div className=\"spinner-border\" role=\"status\">\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t\t: (error &&\r\n\t\t\t\t\t\t\t<div className=\"alert alert-danger\" role=\"alert\">\r\n\t\t\t\t\t\t\t\t{error}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t\t{\r\n\t\t\t\t\tappointment &&\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<p style={{color: \"black\"}}><b>Datetime: {convertDateAndTimeRangeString(new Date(appointment.appointment_start), appointment.duration)} ({appointment.duration} minutes)</b></p>\r\n\t\t\t\t\t\t<p><b>Appointment ID: </b>{appointment.appointment_id}</p>\r\n\t\t\t\t\t\t<p><b>Lesson: </b>{appointment.lesson_name}</p>\r\n\t\t\t\t\t\t<p><b>Customer: </b>{appointment.customer_name}</p>\r\n\t\t\t\t\t\t<p><b>Email: </b>{appointment.customer_email}</p>\r\n\t\t\t\t\t\t<p><b>Phone: </b>{appointment.customer_phone}</p>\r\n\t\t\t\t\t\t<p><b>Note: </b>{appointment.note}</p>\r\n\t\t\t\t\t\t<p><b>Fee: </b>${appointment.fee}</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t\t<div className=\"mt-2\">\r\n\t\t\t\t{\r\n\t\t\t\t\t!showForm ?\r\n\t\t\t\t\t\t<button className=\"btn btn-danger float-end\" onClick={() => setShowForm(true)}>\r\n\t\t\t\t\t\t\tcancel appointment\r\n\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t\t:\r\n\t\t\t\t\t\t(\r\n\t\t\t\t\t\t\tcancelLoading ?\r\n\t\t\t\t\t\t\t\t<button className=\"btn btn-danger py-1 float-end\" type=\"button\" disabled>\r\n\t\t\t\t\t\t\t\t\t<span className=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<form onSubmit={handleCancelAppointment} className=\"py-2\">\r\n\t\t\t\t\t\t\t\t\t\t<textarea onChange={onCancelTextChange} className=\"form-control\" id=\"cancelText\" rows={5} wrap=\"soft\" placeholder=\"write message here\" />\r\n\t\t\t\t\t\t\t\t\t\t<button type=\"submit\" title=\"delete\" className=\"btn btn-danger my-2 float-end\" >\r\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"align-middle button-text\" style={{ fontSize: 12 }}>confirm cancellation</span>\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t</form >\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Appointment\r\n","import React, { useState, useEffect, useRef } from 'react'\r\nimport { API_URL } from '../JS/variables'\r\nimport AppModal from './AppModal'\r\nimport Appointment from './Appointment'\r\n\r\nfunction Calendar() {\r\n\tconst [date, setDate] = useState(null)\r\n\tconst [dateInputDisplay, setDateInputDisplay] = useState('')\r\n\tconst [week, setWeek] = useState([])\r\n\tconst [data, setData] = useState([])\r\n\tconst [isLoading, setIsLoading] = useState(false)\r\n\tconst [error, setError] = useState('')\r\n\tconst [selectedAppt, setSelectedAppt] = useState('')\r\n\tconst [dummy, setDummy] = useState(0)\r\n\tconst mountedRef = useRef(true)\r\n\r\n\tconst TIME = ['12:00 AM', '12:30 AM', '1:00 AM', '1:30 AM', '2:00 AM', '2:30 AM', '3:00 AM', '3:30 AM', '4:00 AM', '4:30 AM', '5:00 AM', '5:30 AM', '6:00 AM', '6:30 AM', '7:00 AM', '7:30 AM', '8:00 AM', '8:30 AM', '9:00 AM', '9:30 AM', '10:00 AM', '10:30 AM', '11:00 AM', '11:30 AM', '12:00 PM', '12:30 PM', '1:00 PM', '1:30 PM', '2:00 PM', '2:30 PM', '3:00 PM', '3:30 PM', '4:00 PM', '4:30 PM', '5:00 PM', '5:30 PM', '6:00 PM', '6:30 PM', '7:00 PM', '7:30 PM', '8:00 PM', '8:30 PM', '9:00 PM', '9:30 PM', '10:00 PM', '10:30 PM', '11:00 PM', '11:30 PM'\r\n\t]\r\n\r\n\tconst setDateToBeginningOfWeek = (d) => {\r\n\t\td.setDate(d.getDate() - d.getDay())\r\n\t\td.setHours(0)\r\n\t\td.setMinutes(0)\r\n\t\td.setSeconds(0)\r\n\t}\r\n\r\n\r\n\tuseEffect(() => {\r\n\t\tlet today = new Date()\r\n\t\tsetDateInputDisplay(formatDate2(today))\r\n\t\tsetDateToBeginningOfWeek(today)\r\n\t\tsetDate(today)\r\n\r\n\r\n\t\treturn () => {\r\n\t\t\tmountedRef.current = false\r\n\t\t}\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!date) return\r\n\r\n\t\tlet aWeek = []\r\n\r\n\t\tlet beginDate = new Date(date) // beginning of the week (Sunday)\r\n\t\tsetDateToBeginningOfWeek(beginDate)\r\n\r\n\t\t// console.log(`date is: ... ${date}`)\r\n\t\t// console.log(`begin date is: ... ${beginDate}`)\r\n\r\n\t\tconsole.log(`date is: ... ${date}`)\r\n\t\tconsole.log(`begin date is: ... ${beginDate}`)\r\n\r\n\t\t// push seven day in array\r\n\t\tfor (let i = 0; i < 7; i++) {\r\n\t\t\tlet dummyDate = new Date(beginDate)\r\n\t\t\tlet aDate = dummyDate.setDate(beginDate.getDate() + i)\r\n\t\t\taWeek.push(aDate)\r\n\t\t}\r\n\r\n\t\tconsole.log(`setting week to ${aWeek}`)\r\n\t\tsetWeek(aWeek)\r\n\t}, [date])\r\n\r\n\tuseEffect(async () => {\r\n\t\tif (!week.length || !date) return\r\n\r\n\t\t//fetch appointment\r\n\t\tsetError('')\r\n\t\tsetIsLoading(true)\r\n\t\tlet appointments = await fetchWeekAppointment().catch((error) => {\r\n\t\t\tsetError(error.message)\r\n\t\t\tsetIsLoading(false)\r\n\t\t\tconsole.log(error)\r\n\t\t})\r\n\r\n\t\tif (!appointments) {\r\n\t\t\tsetData([])\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\t//find the ealiest time of a day\r\n\t\tlet min = appointments.length ? appointments[0].minuteStart : 0\r\n\r\n\t\tfor (let i = 1; i < appointments.length; i++) {\r\n\t\t\tif (appointments[i].minuteStart < min) {\r\n\t\t\t\tmin = appointments[i].minuteStart\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconsole.log('after find earliest day')\r\n\r\n\t\t// find the index of time to be used in calendar\r\n\t\tlet indexToUse = Math.floor(min / 30)\r\n\t\tlet timeCol = TIME.splice(indexToUse)\r\n\r\n\t\t// create 2D array to store each row (timeCol.length * 8)\r\n\t\tlet preparingData = new Array(timeCol.length)\r\n\r\n\t\tfor (let i = 0; i < preparingData.length; i++) {\r\n\t\t\tpreparingData[i] = new Array('', '', '', '', '', '', '', '')\r\n\t\t}\r\n\r\n\t\t// store time in first index of all data's index\r\n\t\tfor (let i = 0; i < preparingData.length; i++) {\r\n\t\t\tpreparingData[i][0] = {\r\n\t\t\t\ttype: 'time',\r\n\t\t\t\tdata: timeCol[i]\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet startDate = new Date(week[0])\r\n\t\tlet endDate = new Date(startDate)\r\n\t\tendDate.setDate(endDate.getDate() + 7)\r\n\r\n\t\t// store appointment in 2D array\r\n\t\tappointments.forEach(appt => {\r\n\t\t\tlet duration = appt.duration\r\n\t\t\tlet aDate = new Date(appt.appointmentStart)\r\n\t\t\t// console.log(`aappointment start: ${aDate}`)\r\n\t\t\t// console.log(`start date: ${startDate}`)\r\n\t\t\t// console.log(`end date: ${endDate}`)\r\n\t\t\t// console.log('in for each')\r\n\t\t\tif (aDate >= startDate && aDate < endDate) {\r\n\t\t\t\tlet colIndex = aDate.getDay() + 1 //first column is time, thus add 1\r\n\r\n\t\t\t\t// find a row to push appt in\r\n\t\t\t\tlet rowIndex = Math.floor((appt.minuteStart - min) / 30)\r\n\r\n\t\t\t\tpreparingData[rowIndex][colIndex] = {\r\n\t\t\t\t\ttype: 'appointment',\r\n\t\t\t\t\tdata: appt\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// span row will overlap - assign the following rows in the same column to be blank when draw table\r\n\t\t\t\tlet numSpan = Math.floor(duration / 30) - 1 // subtract one because first row already assign\r\n\r\n\t\t\t\tfor (let i = 0; i < numSpan; i++) {\r\n\t\t\t\t\tpreparingData[++rowIndex][colIndex] = {\r\n\t\t\t\t\t\ttype: 'spanned'\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t\tconsole.log('final')\r\n\t\tconsole.log(`date is: ${date}`)\r\n\r\n\t\tsetIsLoading(false)\r\n\t\tsetError('')\r\n\t\tsetData(preparingData)\r\n\t}, [week, dummy])\r\n\r\n\tconst fetchWeekAppointment = () => {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tconst requestOptions = {\r\n\t\t\t\tcredentials: 'include'\r\n\t\t\t}\r\n\t\t\t// console.log('date that i will fetch', date)\r\n\t\t\t// console.log('date that i will fetch utc', date.toUTCString())\r\n\t\t\tconsole.log(`date before sending fetch: ${date}`)\r\n\t\t\tconsole.log(`date before sending fetch (toUTCString): ${date.toUTCString()}`)\r\n\t\t\tfetch(`${API_URL}/api/appointment/week?utcDate=${date.toUTCString()}`, requestOptions)\r\n\t\t\t\t.then(res => res.json())\r\n\t\t\t\t.then(data => {\r\n\t\t\t\t\tif (!mountedRef) return null\r\n\t\t\t\t\tif (!data.success) {\r\n\t\t\t\t\t\tthrow new Error(data.message)\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tlet appointments = data.appointments.map(appt => {\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\tappointmentId: appt.appointment_id,\r\n\t\t\t\t\t\t\tcustomerName: appt.customer_name,\r\n\t\t\t\t\t\t\tlessonName: appt.lesson_name,\r\n\t\t\t\t\t\t\tappointmentStart: new Date(appt.appointment_start),\r\n\t\t\t\t\t\t\tduration: appt.duration,\r\n\t\t\t\t\t\t\tminuteStart: dateToMinuteStart(new Date(appt.appointment_start))\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t})\r\n\t\t\t\t\tconsole.log(`appointments:\\n`)\r\n\t\t\t\t\tconsole.log(appointments)\r\n\t\t\t\t\tresolve(appointments)\r\n\t\t\t\t})\r\n\t\t\t\t.catch(error => {\r\n\t\t\t\t\treject(error)\r\n\t\t\t\t})\r\n\t\t})\r\n\t}\r\n\r\n\tconst refresh = () => {\r\n\t\tsetDummy(dummy + 1)\r\n\t}\r\n\r\n\tconst dateToMinuteStart = (date) => {\r\n\t\treturn date.getHours() * 60 + date.getMinutes()\r\n\t}\r\n\r\n\tconst handleWeekChange = (numWeek) => {\r\n\t\tlet d = new Date(date)\r\n\t\td.setDate(d.getDate() + (7 * numWeek))\r\n\t\r\n\t\tlet dDisplay = new Date(dateInputDisplay)\r\n\t\tdDisplay.setDate(dDisplay.getDate() + (7 * numWeek))\r\n\r\n\t\tsetDateInputDisplay(formatDate2(dDisplay))\r\n\t\tsetDate(d)\r\n\t}\r\n\r\n\tconst formatDate = (datevalue) => {\r\n\t\tlet date = new Date(datevalue),\r\n\t\t\tday = date.getDate(),\r\n\t\t\tmonth = date.getMonth(),\r\n\t\t\tyear = date.getFullYear(),\r\n\t\t\tmonths = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],\r\n\t\t\tweeks = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],\r\n\t\t\tdayOfWeek = date.getDay()\r\n\r\n\t\treturn weeks[dayOfWeek] + ' ' + day + ' ' + months[month] + ' ' + year;\r\n\t}\r\n\r\n\tconst minutesToHhMmAPmString = (minutes) => {\r\n\t\tlet hours = Math.floor(minutes / 60)\r\n\t\tconst suffix = hours >= 12 ? \"PM\" : \"AM\"\r\n\t\tlet minutePart = ((minutes % 60) + '0').substring(0, 2)\r\n\t\thours = `${((hours + 11) % 12 + 1)}:${minutePart} ${suffix}`\r\n\t\treturn hours\r\n\t}\r\n\r\n\tconst convertDateAndTimeRangeString = (date, duration) => {\r\n\t\tlet start_time_string = minutesToHhMmAPmString(Math.floor(date.getHours()) * 60 + date.getMinutes())\r\n\t\tlet end_time_string = minutesToHhMmAPmString(Math.floor(date.getHours()) * 60 + date.getMinutes() + duration)\r\n\r\n\t\treturn `${start_time_string} - ${end_time_string}`\r\n\t}\r\n\r\n\tconst handleApptClicked = (e) => {\r\n\t\te.preventDefault()\r\n\t\tsetSelectedAppt(e.currentTarget.id)\r\n\t}\r\n\r\n\tfunction formatDate2(date) {\r\n\t\tvar d = new Date(date),\r\n\t\t\tmonth = '' + (d.getMonth() + 1),\r\n\t\t\tday = '' + d.getDate(),\r\n\t\t\tyear = d.getFullYear();\r\n\t\r\n\t\tif (month.length < 2) \r\n\t\t\tmonth = '0' + month;\r\n\t\tif (day.length < 2) \r\n\t\t\tday = '0' + day;\r\n\t\r\n\t\treturn [year, month, day].join('-');\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t{\r\n\t\t\t\tisLoading ?\r\n\t\t\t\t\t<div className=\"text-center\">\r\n\t\t\t\t\t\t<div className=\"spinner-border\" role=\"status\" style={{ color: \"orange\" }}>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t: (error &&\r\n\t\t\t\t\t\t<div className=\"alert alert-danger\" role=\"alert\">\r\n\t\t\t\t\t\t\t{error}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)\r\n\r\n\t\t\t}\r\n\t\t\t<div className=\"mx-auto text-center\" style={{ overflowY: \"auto\", maxHeight: \"100vh\" }}>\r\n\t\t\t\t<div className=\"mw-1000 mx-auto my-3\">\r\n\t\t\t\t\t<button className=\"me-5\" onClick={() => handleWeekChange(-1)}>previous</button>\r\n\t\t\t\t\t<input type=\"date\" value= {dateInputDisplay}\r\n\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\tlet d = new Date(e.target.value)\r\n\t\t\t\t\t\t\tsetDateInputDisplay(formatDate2(d))\r\n\t\t\t\t\t\t\tconsole.log(`this value will be use to create date: ${e.target.value}`)\r\n\t\t\t\t\t\t\tconsole.log(`date created by that value: ${d}`)\r\n\t\t\t\t\t\t\tsetDateToBeginningOfWeek(d)\r\n\t\t\t\t\t\t\tconsole.log(`this run in input arrow function`)\r\n\t\t\t\t\t\t\tconsole.log(`date after set: ${d}`)\r\n\t\t\t\t\t\t\tsetDate(d)\r\n\t\t\t\t\t\t}} />\r\n\t\t\t\t\t<button onClick={() => refresh()}>refresh</button>\r\n\t\t\t\t\t<button className=\"ms-5\" onClick={() => handleWeekChange(1)}>next</button>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"mw-1000 mx-auto\" style={{ overflowX: \"scroll\", maxHeight: \"90vh\" }}>\r\n\t\t\t\t\t<table className=\"calendar\">\r\n\t\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t<th style={{ maxWidth: 60 }}></th>\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tweek.map((day, index) => {\r\n\t\t\t\t\t\t\t\t\t\tlet [w, d, m, y] = formatDate(day).split(' ')\r\n\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t<th className=\"head-fixed\" key={index}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<p>{w}</p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<p>{d} {m} {y}</p>\r\n\t\t\t\t\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t</thead>\r\n\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t<th className=\"header-fixed\"></th>\r\n\t\t\t\t\t\t\t\t<td colSpan={7} style={{ height: \"20px\" }}></td>\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tdata.map((row, index) => {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<tr key={index}>\r\n\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\trow.map((col, index) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tswitch (col.type) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'appointment':\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlet appt = col.data\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td className=\"td-with-data\" rowSpan={Math.floor(appt.duration / 30)} key={index}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div id={appt.appointmentId} onClick={handleApptClicked}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p>{convertDateAndTimeRangeString(appt.appointmentStart, appt.duration)}</p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p>{appt.lessonName}</p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p>{appt.customerName}</p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p>{appt.duration} minutes</p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p>{appt.appointmentId}</p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'time':\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th className=\"header-fixed\" key={index} style={{ verticalAlign: \"top\" }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div style={{ minHeight: 25 }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"time\" style={{ position: \"absolute\", top: -12, right: 5 }}>{col.data}</p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase 'spanned':\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td key={index}></td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t</table>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t{\r\n\t\t\t\tselectedAppt &&\r\n\t\t\t\t<AppModal\r\n\t\t\t\t\tshow={selectedAppt ? true : false}\r\n\t\t\t\t\tonClose={() => setSelectedAppt('')}\r\n\t\t\t\t\ttitle={`Appointment: ${selectedAppt}`}>\r\n\t\t\t\t\t<Appointment\r\n\t\t\t\t\t\tid={selectedAppt}\r\n\t\t\t\t\t\tonUpdate={() => {\r\n\t\t\t\t\t\t\trefresh()\r\n\t\t\t\t\t\t\tsetSelectedAppt('')\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</AppModal>\r\n\t\t\t}\r\n\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Calendar\r\n","import React from 'react';\r\nimport { Switch, Route, Redirect } from 'react-router-dom';\r\nimport Sidebar from './Sidebar';\r\nimport LessonPanel from './LessonPanel';\r\nimport Booking from './Booking';\r\nimport AvailabilityPanel from './AvailabilityPanel';\r\nimport Calendar from './Calendar';\r\n\r\n\r\nfunction Upload() {\r\n  return (\r\n    <div>\r\n      Upload\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nfunction AdminPanel() {\r\n  return (\r\n    <div>\r\n      <div style={{position: \"relative\"}}>\r\n        <Sidebar />\r\n          <div className=\"content-wrapper\">\r\n              <Switch>\r\n                <Route exact path=\"/\">\r\n                  Greeting user\r\n                </Route>\r\n                <Route path=\"/calendar\">\r\n                  <Calendar />\r\n                </Route>\r\n                <Route path=\"/lesson\">\r\n                  <LessonPanel />\r\n                </Route>\r\n                <Route path=\"/availability\">\r\n                  <AvailabilityPanel />\r\n                </Route>\r\n                <Route path=\"/upload\">\r\n                  <Upload />\r\n                </Route>\r\n                <Route path=\"/booking\">\r\n                  <Booking />\r\n                </Route>\r\n              </Switch>\r\n          </div>\r\n\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default AdminPanel\r\n","import React, { useState, useEffect, useContext } from 'react'\r\nimport {AppContext} from './AppContext'\r\nimport Cookies from 'js-cookie'\r\nimport { API_URL } from '../JS/variables'\r\n\r\nfunction Login() {\r\n    const {user, setUser} = useContext(AppContext)\r\n    const [email, setEmail] = useState('')\r\n    const [password, setPassword] = useState('')\r\n    const [isLoading, setIsLoading] = useState(false)\r\n    const [error, setError] = useState('')\r\n\r\n\r\n    useEffect(() => {\r\n        document.body.style = \"background: #f29a04\"\r\n\r\n        return () => {\r\n            document.body.style = { background: \"#eee\" }  //whenever the component removes it will executes\r\n        }\r\n    }, [])\r\n\r\n    const handleLogin = (e) => {\r\n        e.preventDefault()\r\n        const requestOptions = {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Accept': 'application/json',\r\n            },\r\n            body: JSON.stringify({\r\n                email: email,\r\n                password: password\r\n            }),\r\n            credentials: 'include'\r\n        }\r\n        setIsLoading(true)\r\n        setError(false)\r\n\r\n        fetch(`${API_URL}/api/auth/login`, requestOptions)\r\n            .then((res) => {\r\n                console.log(res)\r\n\r\n                return res\r\n            })\r\n            .then(res => res.json())\r\n            .then(data => {\r\n                if(!data.success){\r\n                    throw new Error(data.message)\r\n                }\r\n                Cookies.set('loggedIn', true)\r\n                Cookies.set('email', data.email)\r\n                console.log(document.cookie)\r\n                setUser({loggedIn: true})\r\n            })\r\n            .catch(error => {\r\n                console.log(error)\r\n                setIsLoading(false)\r\n                setError(error.message)\r\n            })\r\n    }\r\n\r\n    return (\r\n        <div >\r\n            <div className=\"box\">\r\n                <h2>Login</h2>\r\n                <form onSubmit={handleLogin}>\r\n                    <div className=\"inputBox\">\r\n                        <input type=\"email\" name=\"email\" onChange={(e) => setEmail(e.target.value)} required/>\r\n                        <label htmlFor=\"email\">Username</label>\r\n                    </div>\r\n                    <div className=\"inputBox\">\r\n                        <input type=\"password\" name=\"password\" onChange={(e) => setPassword(e.target.value)} required/>\r\n                        <label htmlFor=\"password\">password</label>\r\n                    </div>\r\n\r\n                    {error &&\r\n                        <div className=\"alert alert-danger  show mt-3\" role=\"alert\">\r\n                            {error}\r\n                        </div>\r\n                    }\r\n                    {\r\n                        isLoading ?\r\n                            <button className=\"btn btn-primary float-end\" type=\"button\" disabled>\r\n                                <span className=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\r\n                                <span className=\"sr-only\">Loading...</span>\r\n                            </button>\r\n                            :\r\n                            <button type=\"submit\" className=\"btn btn-primary d-inline-block float-end\">Submit</button>\r\n                    }\r\n\r\n                </form>\r\n\r\n\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Login\r\n","import React from 'react'\r\nimport { EatLoading } from 'react-loadingg'\r\n\r\nfunction Loading() {\r\n    return (\r\n        <div>\r\n            <EatLoading size=\"40\" />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Loading\r\n","import './App.css';\nimport React, { useState, useEffect } from 'react'\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom'\nimport AdminPanel from './components/AdminPanel'\nimport Login from './components/Login'\nimport { AppContext } from './components/AppContext';\nimport Cookies from 'js-cookie'\nimport Loading from './components/Loading';\n//logged_in\n\n\nfunction App() {\n  const [user, setUser] = useState(null)\n  const [isLoading, setIsLoading] = useState(true)\n\n  useEffect(() => {\n\n    if (Cookies.get('loggedIn')) {\n      setUser({ loggedIn: true })\n    }\n\n    setIsLoading(false)\n  }, [])\n\n\n\n  return (\n    <AppContext.Provider value={{ user, setUser }} >\n      <div>\n        <Router basename={'admin'}>\n          {\n          isLoading ? \n            <Loading />\n\n          :\n          \n          user ?\n\n            <AdminPanel />\n            :\n\n            <Login />\n\n          }\n        </Router>\n      </div>\n    </AppContext.Provider>\n  );\n}\n\n\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}